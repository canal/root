function findAccountNotificationContact(c){if((c!=undefined)&&(c!=null)&&(c.length>0)){for(var b=0;b<c.length;b++){var a=c[b];if(a.type=="Account Notification"){return a}}}return null}function findAlternateNotificationContact(c){var d=new Array();if((c!=undefined)&&(c!=null)&&(c.length>0)){for(var b=0;b<c.length;b++){var a=c[b];if(a.type=="Alternate"){d.push(a)}}}return d}function getExceptionalClientEmailList(d){var e=new Array();var b=findAccountNotificationContact(d);if(b!=null){e.push(b)}var a=findAlternateNotificationContact(d);if(a.length>0){for(var c=0;c<a.length;c++){e.push(a[c])}}return e}function getClientEmailList(c){var e=new Array();var b=findPrimaryEmailContact(c);if(b!=null){e.push(b)}var d=findAlternateEmailContact(c);if(d.length>0){for(var a=0;a<d.length;a++){e.push(d[a])}}return e}function findPrimaryEmailContact(c){if((c!=undefined)&&(c!=null)&&(c.length>0)){for(var b=0;b<c.length;b++){var a=c[b];if(a.primary){return a}}}return null}function findAlternateEmailContact(c){var d=new Array();if((c!=undefined)&&(c!=null)&&(c.length>0)){for(var b=0;b<c.length;b++){var a=c[b];if(!a.primary){d.push(a)}}}return d}function isUserInRepricerRole(a){var c=false;if(a){for(i=0;i<a.length;i++){var b=a[i].children;if(b){for(j=0;j<b.length;j++){var d=b[j];if(d!=null&&d!=undefined&&(d.id=="RMHCFAREP"||d.id=="RMUBREP")){c=true}}}}}return c}Ext.namespace("idxm.selfprofile.links.ApplicationLinks");idxm.selfprofile.links.ApplicationLinks=function(config){var applicationTpl=new Ext.XTemplate('<table width="100%">',"<tr>","<td>",'<div class="links-applicationlinks-heading">My Applications</div>','<div class="enduser-dotted-line">&nbsp;</div>',"</td>","</tr>",'<tpl for="list">','<tr><td><div class="enduser-application-link">> <a class="enduser-application-link" href="{link}" target="_blank">{name}</a></div></td></tr>',"</tpl>","</table>");var ExternalPersonPanel=new Ext.Panel({renderTo:config.formPanelDivID,layout:"fit",bodyBorder:false,border:false,hideBorders:true,html:applicationTpl.applyTemplate({list:IDXM.Utilities.ApplicationLinks({userClass:config.userData.userClassCode,env:config.enviroment,repricer:config.repricer})})});var jsonFunctionObject={doCancel:function(){if(config.redirectURL){eval("document."+config.redirectFormName+".submit()")}else{document.location=config.urlUpdateProfile+"?systemUserId="+config.userData.sysKey}},noCancel:function(){}}};Ext.namespace("idxm.selfprofile.popups.AdviceNotificationOption");idxm.selfprofile.popups.AdviceNotificationOption=function(a){var b=new Ext.Window({width:600,height:200,modal:true,autoScroll:true,closable:false,resizable:false,layout:"fit",plain:true,items:[{xtype:"panel",border:false,bodyBorder:false,hideBorders:true,style:"background-color:#FFFFFF; background:#FFFFFF; padding:5px;",items:[{xtype:"idxmStatusBox",status:"warning",statusText:"Select Advice Notification Option"},{xtype:"panel",height:100,style:"padding-left:15px;",autoScroll:true,html:"<span class='advice-pop-up-message-txt'><BR>You must make a selection for Advice Notification<BR></span><span class='advice-pop-up-description-txt'><br>Select either an email address or fax number.</span>"}],buttons:[{ctCls:"support-portal-btn",text:"CLOSE",handler:function(){b.hide()}}]}]});b.show()};Ext.namespace("idxm.selfprofile.popups.AdviceNotificationWarning");idxm.selfprofile.popups.AdviceNotificationWarning=function(a){var b=new Ext.Window({width:550,height:215,modal:true,autoScroll:true,closable:false,resizable:false,layout:"fit",plain:true,items:[{xtype:"panel",border:false,bodyBorder:false,hideBorders:true,style:"background-color:#FFFFFF; background:#FFFFFF; padding:5px;",items:[{xtype:"idxmStatusBox",status:"warning",statusText:"Advice Notification Address"},{xtype:"panel",height:100,style:"padding-left:15px;",autoScroll:true,html:"<span class='advice-pop-up-description-txt'><br><b>"+a.emailOrFax+"</b> is currently where your Advice Notifications are being sent.<br></span><span class='advice-pop-up-description-txt'><br>Before you can delete <b>"+a.emailOrFax+"</b>, please deselect it as your preferred contact method using the Update Advice Notifications link from the home page.</span>"}],buttons:[{ctCls:"support-portal-btn",text:"CLOSE",handler:function(){b.hide()}}]}]});b.show()};Ext.namespace("idxm.selfprofile.popups.PasswordExpireAlert");idxm.selfprofile.popups.PasswordExpireAlert=function(a){var b=new Ext.Window({width:400,height:175,modal:true,autoScroll:true,closable:false,resizable:false,layout:"fit",plain:true,buttonAlign:"center",items:[{xtype:"panel",border:false,bodyBorder:false,hideBorders:true,style:"background-color:#FFFFFF; background:#FFFFFF; padding:5px;",items:[{xtype:"idxmStatusBox",status:"warning",statusText:"Your Password will expire in "+a.passwordExpirationDays+" day"},{xtype:"panel",height:100,style:"padding-left:15px;",autoScroll:true,html:"<span class='advice-pop-up-message-txt'><BR>Please update your password.</span>"}],buttons:[{ctCls:"support-portal-btn",text:"OK",handler:function(){b.hide()}}]}]});b.show()};Ext.namespace("idxm.selfprofile.repricing.RepricingPreferences");idxm.selfprofile.repricing.RepricingPreferences=function(d){Ext.form.Field.prototype.msgTarget="sideDetails";var q=[];var p=userData.email;var c=0;if(p!=null){var h=p;if(d.userData.accountNotificationEmailIndicator=="on"){h=getExceptionalClientEmailList(p)}else{h=getClientEmailList(p)}for(var m=0;m<h.length;m++){try{if(h[m]!=null){var l=new Object();l.id=h[m].id;l.name="adviceNotificationRadio";l.checked=h[m].adviceNotification;l.inputValue=h[m].value;l.listeners={check:function(t,e){Ext.getCmp("isFormUpdated").setValue("true");for(var s=0;s<h.length;s++){var r=h[s];if(r.id==t.id){if(this.checked){r.adviceNotification=true}else{r.adviceNotification=false}}}}};l.boxLabel=h[m].value+" ("+h[m].type+")";q[c++]=l}}catch(n){}}}var k=userData.fax;if(k!=null){for(var m=0;m<k.length;m++){try{if(k[m]!=null){var l=new Object();l.id=k[m].id;l.name="adviceNotificationRadio";l.checked=k[m].adviceNotification;l.inputValue=k[m].value;l.listeners={check:function(t,e){Ext.getCmp("isFormUpdated").setValue("true");for(var r=0;r<k.length;r++){var s=k[r];if(s.id==t.id){if(this.checked){s.adviceNotification=true}else{s.adviceNotification=false}}}}};l.boxLabel=k[m].value+" ("+k[m].type+" Fax)";q[c++]=l}}catch(n){}}}function g(){var e=Ext.getCmp(d.id).getForm();g_hideStatusBox();e.submit({url:d.urlSubmitUpdatePreferences,isMessageIgnore:false,success:function(w,x){Ext.getCmp("updateButton"+d.nameSpace).enable();Ext.get(document.body.id).unmask();g_showStatusBox();var s=uRadixUtilities.jsonDecode(x.response.responseText);if(s.messages.inputFields){for(var t=0;t<s.messages.inputFields.length;t++){var v=[];if(s.messages.inputFields[t].faultID=="8001"){var u=new Object();var r="Unable to update below selected preference. ";r+="Please refresh the screen.";u.description=r;v[0]=u;uRadixClientMessageHandler.setAdvice(false,v)}}}else{uRadixClientMessageHandler.setAdvice(true,s.advice)}Ext.getCmp("isFormUpdated").setValue("false")},failure:function(r,s){g_showStatusBox();Ext.getCmp("updateButton"+d.nameSpace).enable();Ext.get(document.body.id).unmask()}})}function o(){var e=Ext.getCmp(d.id).getForm();var r=e.getValues();var s=Ext.getCmp("isFormUpdated").getValue();if(s!=null&&s=="false"){return}Ext.getCmp("emails").setValue(uRadixUtilities.jsonEncode(p));Ext.getCmp("faxes").setValue(uRadixUtilities.jsonEncode(k));Ext.getCmp("updateButton"+d.nameSpace).disable();Ext.get(document.body.id).mask("<b> Loading...</b> ","x-mask-loading");g()}new Ext.Panel({renderTo:d.formPanelDivID,border:false,bodyBorder:false,hideBorders:true,width:650,items:[{xtype:"panel",border:false,bodyBorder:false,hideBorders:true,items:[{xtype:"panel",border:false,bodyBorder:false,hideBorders:true,id:d.idToToggle,hidden:((d.g_PreferencesHideAndShow)&&(d.g_PreferencesHideAndShow!=undefined))?true:false,items:[{xtype:"uRadix.form.FormPanel",autoScroll:true,id:d.id,labelAlign:"top",hidden:false,items:[{xtype:"panel",height:30,border:0,style:"boder:none;",bodyBorder:0,bodyStyle:"border:none",hideBorders:true,style:"padding-left:20px;",html:"<br><span class='preferences-text'>Select where you would like to receive advice Notifications.</span>"},{xtype:"panel",bodyStyle:"padding-left:45px;",border:false,layout:"form",items:[{xtype:"hidden",id:"isFormUpdated",name:"isFormUpdated",value:"false"},{xtype:"hidden",id:"emails",name:"emails",value:""},{xtype:"hidden",id:"faxes",name:"faxes",value:""},{xtype:"radiogroup",id:"adviceNotificationRadioGroup",name:"adviceNotificationRadioGroup",style:"padding-left:2px;padding-bottom:10px;",vertical:true,columns:1,items:q}]}],buttons:[{id:"updateButton"+d.nameSpace,text:"UPDATE",ctCls:"support-portal-btn",handler:o}],listeners:{uradix_enterkey:o}}]}]}]});var b=Ext.getCmp(d.id);var a=false;b.getForm().items.each(function(e){e.on("change",function(){a=true})});Ext.getCmp(d.id).getForm().setValues(d.userData);var f={noCancel:function(){}};return f};Ext.namespace("idxm.selfprofile.update.demographics.ExternalExceptionClient");idxm.selfprofile.update.demographics.ExternalExceptionClient=function(config){if(config.redirectURL){if(!((config.redirectURL.substring(0,7).toLowerCase().trim()=="http://")||(config.redirectURL.substring(0,8).toLowerCase().trim()=="https://"))){}}Ext.form.Field.prototype.msgTarget="sideDetails";var isPhoneRequired=false;var blnDisplayAdvicesheet=false;if(config.userData.userClassCode==IDXM_USER_CLASS_CLIENT){blnDisplayAdvicesheet=true;if(config.userData.phone&&config.userData.phone.length>0){if((config.userData.userStatus.statusCode!=IDXM_USER_STATUS_CODE_MAP.TERMINATED)){isPhoneRequired=true}}}var contactCodeMap={};contactCodeMap.email0=(userData.accountNotificationEmailIndicator==""||userData.accountNotificationEmailIndicator=="off")?"Primary":"Account Notification";contactCodeMap.email1="Alternate";contactCodeMap.phone0="Primary";contactCodeMap.phone1="Alternate";contactCodeMap.fax0="Primary";contactCodeMap.fax1="Alternate";function setContactValues(o){var _email=o.email;var _phone=o.phone;var _fax=o.fax;for(var i=0;i<=1;i++){try{if(_email[i].type=="Account Notification"||_email[i].type=="Primary"){Ext.getCmp("emailAddress0").setValue(_email[i].value);Ext.getCmp("emailId0").setValue(_email[i].id);Ext.getCmp("emailAdviceSheetNotification0").setValue(_email[i].adviceNotification)}else{Ext.getCmp("emailAddress1").setValue(_email[i].value);Ext.getCmp("emailId1").setValue(_email[i].id);Ext.getCmp("emailAdviceSheetNotification1").setValue(_email[i].adviceNotification)}}catch(e){}try{if(_phone[i].type=="Primary"){Ext.getCmp("phoneAddress0").setValue(_phone[i].value);Ext.getCmp("phoneId0").setValue(_phone[i].id);Ext.getCmp("phoneExtension0").setValue(_phone[i].extention)}else{Ext.getCmp("phoneAddress1").setValue(_phone[i].value);Ext.getCmp("phoneId1").setValue(_phone[i].id);Ext.getCmp("phoneExtension1").setValue(_phone[i].extention)}}catch(e){}try{if(_fax[i].type=="Primary"){Ext.getCmp("faxAddress0").setValue(_fax[i].value);Ext.getCmp("faxId0").setValue(_fax[i].id);Ext.getCmp("faxAdviceSheetNotification0").setValue(_fax[i].adviceNotification)}else{Ext.getCmp("faxAddress1").setValue(_fax[i].value);Ext.getCmp("faxId1").setValue(_fax[i].id);Ext.getCmp("faxAdviceSheetNotification1").setValue(_fax[i].adviceNotification)}}catch(e){}}}function formSubmit(){Ext.getCmp("updateButton"+config.nameSpace).disable();var formObj=Ext.getCmp("idxmExternalUserProfilePanelForm"+config.nameSpace).getForm();g_hideStatusBox();formObj.submit({url:config.urlSubmitUpdateProfile,clientValidation:true,isRedirect:true,success:function(form,action){if(config.redirectURL){eval("document."+config.redirectFormName+".submit()")}else{uRadixRedirectHandler.redirect(config.urlUpdateProfile+"?systemUserId="+config.userData.sysKey)}},failure:function(form,action){g_showStatusBox();Ext.getCmp("updateButton"+config.nameSpace).enable();Ext.get(document.body.id).unmask()}})}function formSubmitHandler(){var formObj=Ext.getCmp("idxmExternalUserProfilePanelForm"+config.nameSpace).getForm();var formValues=formObj.getValues();var emailCounter=0,faxCounter=0,phoneCounter=0;for(var i=0;i<=1;i++){try{if(!Ext.isEmpty(Ext.getCmp("emailAddress"+i).getValue())){emailCounter++;Ext.getCmp("emailDeleted"+i).setValue("false");Ext.getCmp("emailTypeCode"+i).setValue(contactCodeMap["email"+i])}else{if(!Ext.isEmpty(Ext.getCmp("emailId"+i).getValue())){Ext.getCmp("emailDeleted"+i).setValue("true")}}}catch(e){}try{if(!Ext.isEmpty(Ext.getCmp("phoneAddress"+i).getValue())){phoneCounter++;Ext.getCmp("phoneDeleted"+i).setValue("false");Ext.getCmp("phoneTypeCode"+i).setValue(contactCodeMap["phone"+i])}else{if(!Ext.isEmpty(Ext.getCmp("phoneId"+i).getValue())){Ext.getCmp("phoneDeleted"+i).setValue("true")}}}catch(e){}try{if(!Ext.isEmpty(Ext.getCmp("faxAddress"+i).getValue())){faxCounter++;Ext.getCmp("faxDeleted"+i).setValue("false");Ext.getCmp("faxTypeCode"+i).setValue(contactCodeMap["fax"+i])}else{if(!Ext.isEmpty(Ext.getCmp("faxId"+i).getValue())){Ext.getCmp("faxDeleted"+i).setValue("true")}}}catch(e){}}Ext.getCmp("emailContactCounter").setValue(emailCounter);Ext.getCmp("phoneContactCounter").setValue(phoneCounter);Ext.getCmp("faxContactCounter").setValue(faxCounter);if(formObj.isValid()){var _email=config.userData.email;var _fax=config.userData.fax;var isValidAdviceNotification=true;var emailOrFax="";for(var i=0;i<=1;i++){try{if(Ext.isEmpty(Ext.getCmp("emailAddress"+i).getValue())&&!Ext.isEmpty(Ext.getCmp("emailAdviceSheetNotification"+i).getValue())&&Ext.getCmp("emailAdviceSheetNotification"+i).getValue()=="true"){emailOrFax=_email[i].value;isValidAdviceNotification=false;break}}catch(e){}try{if(Ext.isEmpty(Ext.getCmp("faxAddress"+i).getValue())&&!Ext.isEmpty(Ext.getCmp("faxAdviceSheetNotification"+i).getValue())&&Ext.getCmp("faxAdviceSheetNotification"+i).getValue()=="true"){emailOrFax=_fax[i].value;isValidAdviceNotification=false;break}}catch(e){}}if(!isValidAdviceNotification){idxm.selfprofile.popups.AdviceNotificationWarning({emailOrFax:emailOrFax});Ext.getCmp("updateButton"+config.nameSpace).enable()}else{Ext.get(document.body.id).mask("<b> Loading...</b> ","x-mask-loading");formSubmit()}}}new Ext.Panel({renderTo:config.formPanelDivID,border:false,bodyBorder:false,hideBorders:true,width:(config.userData.userClassCode==IDXM_USER_CLASS_CLIENT)?1000:850,items:[{xtype:"panel",border:false,cls:"portal-title",html:"Update User Profile"},{xtype:"panel",height:8,border:0,style:"boder:none;",bodyBorder:0,bodyStyle:"border:none",hideBorders:true},{xtype:"panel",border:0,style:"boder:none;",bodyBorder:0,bodyStyle:"border:none",hideBorders:true,html:"<span class='idxmTextSmall'><b>*Required</b></span>"},{xtype:"uRadix.form.FormPanel",autoScroll:true,id:"idxmExternalUserProfilePanelForm"+config.nameSpace,labelAlign:"top",items:[{xtype:"idxm.selfprofile.ux.panel.ExternalPerson",id:"idxmExternalUserProfilePanel"+config.nameSpace,userData:config.userData,formObjectName:"userProfileAction"+config.nameSpace},{xtype:"panel",bodyStyle:"padding-left:25px;",border:false,layout:"form",items:[{xtype:"textfield",fieldLabel:(userData.accountNotificationEmailIndicator==""||userData.accountNotificationEmailIndicator=="off")?"Primary Email":"Account Notification Email",allowBlank:false,id:"emailAddress0",name:"emailAddress0",vtype:"email",maxLength:256,width:200},{xtype:"hidden",id:"emailTypeCode0",name:"emailTypeCode0",value:(userData.accountNotificationEmailIndicator==""||userData.accountNotificationEmailIndicator=="off")?"Primary":"Account Notification"},{xtype:"hidden",id:"emailId0",name:"emailId0"},{xtype:"hidden",id:"emailDeleted0",name:"emailDeleted0",value:"false"},{xtype:"hidden",id:"emailAdviceSheetNotification0",name:"emailAdviceSheetNotification0",value:""},{xtype:"textfield",fieldLabel:"Alternate Email",allowBlank:true,id:"emailAddress1",name:"emailAddress1",vtype:"email",maxLength:256,width:200},{xtype:"hidden",id:"emailTypeCode1",name:"emailTypeCode1"},{xtype:"hidden",id:"emailId1",name:"emailId1"},{xtype:"hidden",id:"emailDeleted1",name:"emailDeleted1",value:"false"},{xtype:"hidden",id:"emailAdviceSheetNotification1",name:"emailAdviceSheetNotification1",value:""},{xtype:"hidden",id:"emailContactCounter",name:"emailContactCounter",value:"1"},{xtype:"panel",width:900,layout:"column",border:false,items:[{xtype:"panel",width:200,border:false,layout:"form",items:[{xtype:"textfield",fieldLabel:"Primary Phone",allowBlank:(isPhoneRequired)?false:true,id:"phoneAddress0",name:"phoneAddress0",maxLength:20,width:200,msgTarget:"under"},{xtype:"hidden",id:"phoneTypeCode0",name:"phoneTypeCode0",msgTarget:"under"}]},{layout:"form",width:15,style:"padding-top:22px; padding-left:5px;",cls:"portal-plain-panel",border:false,html:"X"},{xtype:"panel",width:50,border:false,layout:"form",items:[{xtype:"textfield",fieldLabel:"&nbsp;",labelSeparator:" ",allowBlank:true,id:"phoneExtension0",name:"phoneExtension0",maxLength:10,width:50,msgTarget:"phoneAddressTarget0",msgLengthText:"The maximum length for phone extension is 10"}]},{id:"phoneAddressTarget0",layout:"form",cls:"invalid-target-field-panel",style:"padding-top:22px;padding-left:10px;",border:false},{xtype:"hidden",id:"phoneId0",name:"phoneId0"},{xtype:"hidden",id:"phoneDeleted0",name:"phoneDeleted0",value:"false"},{xtype:"hidden",id:"phoneContactCounter",name:"phoneContactCounter",value:"1"}]},{xtype:"panel",width:900,layout:"column",border:false,items:[{xtype:"panel",width:200,border:false,layout:"form",items:[{xtype:"textfield",fieldLabel:"Alternate Phone",allowBlank:true,id:"phoneAddress1",name:"phoneAddress1",maxLength:20,width:200,msgTarget:"phoneAddressTarget1"},{xtype:"hidden",id:"phoneTypeCode1",name:"phoneTypeCode1"}]},{layout:"form",width:15,style:"padding-top:22px; padding-left:5px;",cls:"portal-plain-panel",border:false,html:"X"},{xtype:"panel",width:50,border:false,layout:"form",items:[{xtype:"textfield",fieldLabel:"&nbsp;",labelSeparator:" ",allowBlank:true,id:"phoneExtension1",name:"phoneExtension1",maxLength:10,width:50,msgTarget:"phoneAddressTarget1",msgLengthText:"The maximum length for phone extension is 10"}]},{id:"phoneAddressTarget1",layout:"form",cls:"invalid-target-field-panel",style:"padding-top:22px;padding-left:10px;",border:false},{xtype:"hidden",id:"phoneId1",name:"phoneId1"},{xtype:"hidden",id:"phoneDeleted1",name:"phoneDeleted1",value:"false"}]},{xtype:"textfield",fieldLabel:"Primary Fax",allowBlank:true,id:"faxAddress0",name:"faxAddress0",maxLength:20,width:200},{xtype:"hidden",id:"faxTypeCode0",name:"faxTypeCode0"},{xtype:"hidden",id:"faxId0",name:"faxId0"},{xtype:"hidden",id:"faxDeleted0",name:"faxDeleted0",value:"false"},{xtype:"hidden",id:"faxAdviceSheetNotification0",name:"faxAdviceSheetNotification0",value:""},{xtype:"textfield",fieldLabel:"Alternate Fax",allowBlank:true,id:"faxAddress1",name:"faxAddress1",maxLength:20,width:200},{xtype:"hidden",id:"faxTypeCode1",name:"faxTypeCode1"},{xtype:"hidden",id:"faxId1",name:"faxId1"},{xtype:"hidden",id:"faxDeleted1",name:"faxDeleted1",value:"false"},{xtype:"hidden",id:"faxAdviceSheetNotification1",name:"faxAdviceSheetNotification1",value:""},{xtype:"hidden",id:"faxContactCounter",name:"faxContactCounter",value:"1"}]}]}],buttons:[{id:"cancelButton"+config.nameSpace,text:"CANCEL",ctCls:"support-portal-btn-cancel",handler:function(){if(isFormPanelDirty){idxm.core.popups.Cancel({doCancelFunction:jsonFunctionObject.doCancel,noCancelFunction:jsonFunctionObject.noCancel})}else{if(config.redirectURL){eval("document."+config.redirectFormName+".submit()")}else{document.location=config.urlUpdateProfile+"?systemUserId="+config.userData.sysKey}}}},{id:"updateButton"+config.nameSpace,text:"UPDATE",ctCls:"support-portal-btn",handler:formSubmitHandler}],listeners:{uradix_enterkey:formSubmitHandler}});var formPanel=Ext.getCmp("idxmExternalUserProfilePanelForm"+config.nameSpace);var isFormPanelDirty=false;formPanel.getForm().items.each(function(f){f.on("change",function(){isFormPanelDirty=true})});Ext.getCmp("idxmExternalUserProfilePanelForm"+config.nameSpace).getForm().setValues(config.userData);setContactValues(config.userData);var jsonFunctionObject={doCancel:function(){if(config.redirectURL){eval("document."+config.redirectFormName+".submit()")}else{document.location=config.urlUpdateProfile+"?systemUserId="+config.userData.sysKey}},noCancel:function(){}};return jsonFunctionObject};Ext.namespace("idxm.selfprofile.update.demographics.ExternalPerson");idxm.selfprofile.update.demographics.ExternalPerson=function(config){if(config.redirectURL){if(!((config.redirectURL.substring(0,7).toLowerCase().trim()=="http://")||(config.redirectURL.substring(0,8).toLowerCase().trim()=="https://"))){}}Ext.form.Field.prototype.msgTarget="sideDetails";isPhoneRequired=false;var blnDisplayAdvicesheet=false;if(config.userData.userClassCode==IDXM_USER_CLASS_CLIENT){blnDisplayAdvicesheet=true;isPhoneRequired=true}var idxmEmailsPanel=new idxm.selfprofile.ux.panel.contacts.EmailPanel({id:"emailFieldPanel"+config.nameSpace,blnDisplayAdvicesheet:blnDisplayAdvicesheet,unMarkAdviceSheetForFaxPanel:"Ext.getCmp('faxFieldPanel"+config.nameSpace+"').unMarkAdviceSheet()",loadArray:config.userData.email,emailTypes:config.emailTypes,maxTypeRows:config.maxTypeRows});var idxmPhonesPanel=new idxm.selfprofile.ux.panel.contacts.PhonePanel({id:"phoneFieldPanel"+config.nameSpace,loadArray:config.userData.phone,phoneTypes:config.phoneTypes,maxTypeRows:config.maxTypeRows,isPhoneRequired:isPhoneRequired});var idxmFaxPanel=new idxm.selfprofile.ux.panel.contacts.FaxPanel({id:"faxFieldPanel"+config.nameSpace,blnDisplayAdvicesheet:blnDisplayAdvicesheet,unMarkAdviceSheetForEmailPanel:"Ext.getCmp('emailFieldPanel"+config.nameSpace+"').unMarkAdviceSheet()",loadArray:config.userData.fax,faxTypes:config.faxTypes,maxTypeRows:config.maxTypeRows});function formSubmit(){var formObj=Ext.getCmp("idxmExternalUserProfilePanelForm"+config.nameSpace).getForm();g_hideStatusBox();formObj.submit({url:config.urlSubmitUpdateProfile,clientValidation:false,isRedirect:true,success:function(form,action){if(config.redirectURL){eval("document."+config.redirectFormName+".submit()")}else{uRadixRedirectHandler.redirect(config.urlUpdateProfile+"?systemUserId="+config.userData.sysKey)}},failure:function(form,action){g_showStatusBox();Ext.getCmp("updateButton"+config.nameSpace).enable();Ext.get(document.body.id).unmask()}})}function formSubmitHandler(){var formObj=Ext.getCmp("idxmExternalUserProfilePanelForm"+config.nameSpace).getForm();var formValues=formObj.getValues();var areEmailContactsValid=idxm.selfprofile.validation.EmailContacts({formId:"idxmExternalUserProfilePanelForm"+config.nameSpace,contactCounter:formValues.emailContactCounter,booleanVariableTobeSet:"areEmailContactsValid"});var arePhoneContactsValid=idxm.selfprofile.validation.PhoneContacts({formId:"idxmExternalUserProfilePanelForm"+config.nameSpace,contactCounter:formValues.phoneContactCounter,booleanVariableTobeSet:"arePhoneContactsValid",isPhoneRequired:isPhoneRequired});var areFaxContactsValid=idxm.selfprofile.validation.FaxContacts({formId:"idxmExternalUserProfilePanelForm"+config.nameSpace,contactCounter:formValues.faxContactCounter,booleanVariableTobeSet:"areFaxContactsValid"});if(areEmailContactsValid&&arePhoneContactsValid&&areFaxContactsValid){if(blnDisplayAdvicesheet){var isEmailAdviceSheetValid=Ext.getCmp("emailFieldPanel"+config.nameSpace).isAdviceSheetValid(Ext.getCmp("idxmExternalUserProfilePanelForm"+config.nameSpace),"AdviceNotificationCheckBox");var isFaxAdviceSheetValid=Ext.getCmp("faxFieldPanel"+config.nameSpace).isAdviceSheetValid(Ext.getCmp("idxmExternalUserProfilePanelForm"+config.nameSpace),"AdviceNotificationCheckBox");if(isEmailAdviceSheetValid&&isFaxAdviceSheetValid){Ext.getCmp("updateButton"+config.nameSpace).disable();formSubmit()}else{idxm.selfprofile.popups.AdviceNotificationOption({})}}else{Ext.getCmp("updateButton"+config.nameSpace).disable();Ext.get(document.body.id).mask("<b> Loading...</b> ","x-mask-loading");formSubmit()}}}var smallTextForAdvice;if(blnDisplayAdvicesheet){smallTextForAdvice={xtype:"panel",height:20,border:0,style:"boder:none;",bodyBorder:0,bodyStyle:"border:none",hideBorders:true,style:"padding-left:10px;",html:""}}else{smallTextForAdvice={xtype:"panel",border:0,style:"boder:none;",bodyBorder:0,bodyStyle:"border:none",hideBorders:true,html:""}}new Ext.Panel({renderTo:config.formPanelDivID,border:false,bodyBorder:false,hideBorders:true,width:(config.userData.userClassCode==IDXM_USER_CLASS_CLIENT)?1000:850,items:[{xtype:"panel",border:false,cls:"portal-title",html:"Update User Profile"},{xtype:"panel",height:8,border:0,style:"boder:none;",bodyBorder:0,bodyStyle:"border:none",hideBorders:true},{xtype:"panel",border:0,style:"boder:none;",bodyBorder:0,bodyStyle:"border:none",hideBorders:true,html:"<span class='idxmTextSmall'><b>*Required</b></span>"},smallTextForAdvice,{xtype:"uRadix.form.FormPanel",autoScroll:true,id:"idxmExternalUserProfilePanelForm"+config.nameSpace,items:[{xtype:"idxm.selfprofile.ux.panel.ExternalPerson",id:"idxmExternalUserProfilePanel"+config.nameSpace,userData:config.userData,formObjectName:"userProfileAction"+config.nameSpace},idxmEmailsPanel,idxmPhonesPanel,idxmFaxPanel]}],buttons:[{id:"cancelButton"+config.nameSpace,text:"CANCEL",ctCls:"support-portal-btn-cancel",handler:function(){if(isFormPanelDirty){idxm.core.popups.Cancel({doCancelFunction:jsonFunctionObject.doCancel,noCancelFunction:jsonFunctionObject.noCancel})}else{if(config.redirectURL){eval("document."+config.redirectFormName+".submit()")}else{document.location=config.urlUpdateProfile+"?systemUserId="+config.userData.sysKey}}}},{id:"updateButton"+config.nameSpace,text:"UPDATE",ctCls:"support-portal-btn",handler:formSubmitHandler}],listeners:{uradix_enterkey:formSubmitHandler}});var formPanel=Ext.getCmp("idxmExternalUserProfilePanelForm"+config.nameSpace);var isFormPanelDirty=false;formPanel.getForm().items.each(function(f){f.on("change",function(){isFormPanelDirty=true})});Ext.getCmp("idxmExternalUserProfilePanelForm"+config.nameSpace).getForm().setValues(config.userData);var jsonFunctionObject={doCancel:function(){if(config.redirectURL){eval("document."+config.redirectFormName+".submit()")}else{document.location=config.urlUpdateProfile+"?systemUserId="+config.userData.sysKey}},noCancel:function(){}};return jsonFunctionObject};Ext.namespace("idxm.selfprofile.update.demographics.ExternalPersonProvider");idxm.selfprofile.update.demographics.ExternalPersonProvider=function(config){if(config.redirectURL){if(!((config.redirectURL.substring(0,7).toLowerCase().trim()=="http://")||(config.redirectURL.substring(0,8).toLowerCase().trim()=="https://"))){}}Ext.form.Field.prototype.msgTarget="sideDetails";var isPhoneRequired=false;var blnDisplayAdvicesheet=false;if(config.userData.userClassCode==IDXM_USER_CLASS_CLIENT){blnDisplayAdvicesheet=true;if(config.userData.phone&&config.userData.phone.length>0){if((config.userData.userStatus.statusCode!=IDXM_USER_STATUS_CODE_MAP.TERMINATED)){isPhoneRequired=true}}}var contactCodeMap={};contactCodeMap.email0="Primary";contactCodeMap.email1="Alternate";contactCodeMap.phone0="Primary";contactCodeMap.phone1="Alternate";contactCodeMap.fax0="Primary";contactCodeMap.fax1="Alternate";function setContactValues(o){var _email=o.email;var _phone=o.phone;var _fax=o.fax;for(var i=0;i<=1;i++){try{if(_email[i].type=="Account Notification"||_email[i].type=="Primary"){Ext.getCmp("emailAddress0").setValue(_email[i].value);Ext.getCmp("emailId0").setValue(_email[i].id);Ext.getCmp("emailAdviceSheetNotification0").setValue(_email[i].adviceNotification)}else{Ext.getCmp("emailAddress1").setValue(_email[i].value);Ext.getCmp("emailId1").setValue(_email[i].id);Ext.getCmp("emailAdviceSheetNotification1").setValue(_email[i].adviceNotification)}}catch(e){}try{if(_phone[i].type=="Primary"){Ext.getCmp("phoneAddress0").setValue(_phone[i].value);Ext.getCmp("phoneId0").setValue(_phone[i].id);Ext.getCmp("phoneExtension0").setValue(_phone[i].extention)}else{Ext.getCmp("phoneAddress1").setValue(_phone[i].value);Ext.getCmp("phoneId1").setValue(_phone[i].id);Ext.getCmp("phoneExtension1").setValue(_phone[i].extention)}}catch(e){}try{if(_fax[i].type=="Primary"){Ext.getCmp("faxAddress0").setValue(_fax[i].value);Ext.getCmp("faxId0").setValue(_fax[i].id);Ext.getCmp("faxAdviceSheetNotification0").setValue(_fax[i].adviceNotification)}else{Ext.getCmp("faxAddress1").setValue(_fax[i].value);Ext.getCmp("faxId1").setValue(_fax[i].id);Ext.getCmp("faxAdviceSheetNotification1").setValue(_fax[i].adviceNotification)}}catch(e){}}}function formSubmit(){Ext.getCmp("updateButton"+config.nameSpace).disable();var formObj=Ext.getCmp("idxmExternalUserProfilePanelForm"+config.nameSpace).getForm();g_hideStatusBox();formObj.submit({url:config.urlSubmitUpdateProfile,clientValidation:true,isRedirect:true,success:function(form,action){if(config.redirectURL){eval("document."+config.redirectFormName+".submit()")}else{uRadixRedirectHandler.redirect(config.urlUpdateProfile+"?systemUserId="+config.userData.sysKey)}},failure:function(form,action){g_showStatusBox();Ext.getCmp("updateButton"+config.nameSpace).enable();Ext.get(document.body.id).unmask()}})}function formSubmitHandler(){var formObj=Ext.getCmp("idxmExternalUserProfilePanelForm"+config.nameSpace).getForm();var formValues=formObj.getValues();var emailCounter=0,faxCounter=0,phoneCounter=0;for(var i=0;i<=1;i++){try{if(!Ext.isEmpty(Ext.getCmp("emailAddress"+i).getValue())){emailCounter++;Ext.getCmp("emailDeleted"+i).setValue("false");Ext.getCmp("emailTypeCode"+i).setValue(contactCodeMap["email"+i])}else{if(!Ext.isEmpty(Ext.getCmp("emailId"+i).getValue())){Ext.getCmp("emailDeleted"+i).setValue("true")}}}catch(e){}try{if(!Ext.isEmpty(Ext.getCmp("phoneAddress"+i).getValue())){phoneCounter++;Ext.getCmp("phoneDeleted"+i).setValue("false");Ext.getCmp("phoneTypeCode"+i).setValue(contactCodeMap["phone"+i])}else{if(!Ext.isEmpty(Ext.getCmp("phoneId"+i).getValue())){Ext.getCmp("phoneDeleted"+i).setValue("true")}}}catch(e){}try{if(!Ext.isEmpty(Ext.getCmp("faxAddress"+i).getValue())){faxCounter++;Ext.getCmp("faxDeleted"+i).setValue("false");Ext.getCmp("faxTypeCode"+i).setValue(contactCodeMap["fax"+i])}else{if(!Ext.isEmpty(Ext.getCmp("faxId"+i).getValue())){Ext.getCmp("faxDeleted"+i).setValue("true")}}}catch(e){}}Ext.getCmp("emailContactCounter").setValue(emailCounter);Ext.getCmp("phoneContactCounter").setValue(phoneCounter);Ext.getCmp("faxContactCounter").setValue(faxCounter);if(formObj.isValid()){var _email=config.userData.email;var _fax=config.userData.fax;var isValidAdviceNotification=true;var emailOrFax="";for(var i=0;i<=1;i++){try{if(Ext.isEmpty(Ext.getCmp("emailAddress"+i).getValue())&&!Ext.isEmpty(Ext.getCmp("emailAdviceSheetNotification"+i).getValue())&&Ext.getCmp("emailAdviceSheetNotification"+i).getValue()=="true"){emailOrFax=_email[i].value;isValidAdviceNotification=false;break}}catch(e){}try{if(Ext.isEmpty(Ext.getCmp("faxAddress"+i).getValue())&&!Ext.isEmpty(Ext.getCmp("faxAdviceSheetNotification"+i).getValue())&&Ext.getCmp("faxAdviceSheetNotification"+i).getValue()=="true"){emailOrFax=_fax[i].value;isValidAdviceNotification=false;break}}catch(e){}}if(!isValidAdviceNotification){idxm.selfprofile.popups.AdviceNotificationWarning({emailOrFax:emailOrFax});Ext.getCmp("updateButton"+config.nameSpace).enable()}else{Ext.get(document.body.id).mask("<b> Loading...</b> ","x-mask-loading");formSubmit()}}}new Ext.Panel({renderTo:config.formPanelDivID,border:false,bodyBorder:false,hideBorders:true,width:(config.userData.userClassCode==IDXM_USER_CLASS_CLIENT)?1000:850,items:[{xtype:"panel",border:false,cls:"portal-title",html:"Update User Profile"},{xtype:"panel",height:8,border:0,style:"boder:none;",bodyBorder:0,bodyStyle:"border:none",hideBorders:true},{xtype:"panel",border:0,style:"boder:none;",bodyBorder:0,bodyStyle:"border:none",hideBorders:true,html:"<span class='idxmTextSmall'><b>*Required</b></span>"},{xtype:"uRadix.form.FormPanel",autoScroll:true,id:"idxmExternalUserProfilePanelForm"+config.nameSpace,labelAlign:"top",items:[{xtype:"idxm.selfprofile.ux.panel.ExternalPerson",id:"idxmExternalUserProfilePanel"+config.nameSpace,userData:config.userData,formObjectName:"userProfileAction"+config.nameSpace},{xtype:"panel",bodyStyle:"padding-left:25px;",border:false,layout:"form",items:[{xtype:"textfield",fieldLabel:"Email",allowBlank:false,id:"emailAddress0",name:"emailAddress0",vtype:"email",maxLength:256,width:200},{xtype:"hidden",id:"emailTypeCode0",name:"emailTypeCode0",value:"Primary"},{xtype:"hidden",id:"emailId0",name:"emailId0"},{xtype:"hidden",id:"emailDeleted0",name:"emailDeleted0",value:"false"},{xtype:"hidden",id:"emailAdviceSheetNotification0",name:"emailAdviceSheetNotification0",value:""},{xtype:"textfield",fieldLabel:"Alternate Email",allowBlank:true,id:"emailAddress1",name:"emailAddress1",vtype:"email",maxLength:256,width:200},{xtype:"hidden",id:"emailTypeCode1",name:"emailTypeCode1"},{xtype:"hidden",id:"emailId1",name:"emailId1"},{xtype:"hidden",id:"emailDeleted1",name:"emailDeleted1",value:"false"},{xtype:"hidden",id:"emailAdviceSheetNotification1",name:"emailAdviceSheetNotification1",value:""},{xtype:"hidden",id:"emailContactCounter",name:"emailContactCounter",value:"1"},{xtype:"panel",width:900,layout:"column",border:false,items:[{xtype:"panel",width:200,border:false,layout:"form",items:[{xtype:"textfield",fieldLabel:"Phone",allowBlank:(isPhoneRequired)?false:true,id:"phoneAddress0",name:"phoneAddress0",maxLength:20,width:200,msgTarget:"under"},{xtype:"hidden",id:"phoneTypeCode0",name:"phoneTypeCode0",msgTarget:"under"}]},{layout:"form",width:15,style:"padding-top:22px; padding-left:5px;",cls:"portal-plain-panel",border:false,html:"X"},{xtype:"panel",width:50,border:false,layout:"form",items:[{xtype:"textfield",fieldLabel:"&nbsp;",labelSeparator:" ",allowBlank:true,id:"phoneExtension0",name:"phoneExtension0",maxLength:10,width:50,msgTarget:"phoneAddressTarget0",msgLengthText:"The maximum length for phone extension is 10"}]},{id:"phoneAddressTarget0",layout:"form",cls:"invalid-target-field-panel",style:"padding-top:22px;padding-left:10px;",border:false},{xtype:"hidden",id:"phoneId0",name:"phoneId0"},{xtype:"hidden",id:"phoneDeleted0",name:"phoneDeleted0",value:"false"},{xtype:"hidden",id:"phoneContactCounter",name:"phoneContactCounter",value:"1"}]},{xtype:"panel",width:900,layout:"column",border:false,items:[{xtype:"panel",width:200,border:false,layout:"form",items:[{xtype:"textfield",fieldLabel:"Alternate Phone",allowBlank:true,id:"phoneAddress1",name:"phoneAddress1",maxLength:20,width:200,msgTarget:"phoneAddressTarget1"},{xtype:"hidden",id:"phoneTypeCode1",name:"phoneTypeCode1"}]},{layout:"form",width:15,style:"padding-top:22px; padding-left:5px;",cls:"portal-plain-panel",border:false,html:"X"},{xtype:"panel",width:50,border:false,layout:"form",items:[{xtype:"textfield",fieldLabel:"&nbsp;",labelSeparator:" ",allowBlank:true,id:"phoneExtension1",name:"phoneExtension1",maxLength:10,width:50,msgTarget:"phoneAddressTarget1",msgLengthText:"The maximum length for phone extension is 10"}]},{id:"phoneAddressTarget1",layout:"form",cls:"invalid-target-field-panel",style:"padding-top:22px;padding-left:10px;",border:false},{xtype:"hidden",id:"phoneId1",name:"phoneId1"},{xtype:"hidden",id:"phoneDeleted1",name:"phoneDeleted1",value:"false"}]},{xtype:"textfield",fieldLabel:"Fax",allowBlank:true,id:"faxAddress0",name:"faxAddress0",maxLength:20,width:200},{xtype:"hidden",id:"faxTypeCode0",name:"faxTypeCode0"},{xtype:"hidden",id:"faxId0",name:"faxId0"},{xtype:"hidden",id:"faxDeleted0",name:"faxDeleted0",value:"false"},{xtype:"hidden",id:"faxAdviceSheetNotification0",name:"faxAdviceSheetNotification0",value:""},{xtype:"textfield",fieldLabel:"Alternate Fax",allowBlank:true,id:"faxAddress1",name:"faxAddress1",maxLength:20,width:200},{xtype:"hidden",id:"faxTypeCode1",name:"faxTypeCode1"},{xtype:"hidden",id:"faxId1",name:"faxId1"},{xtype:"hidden",id:"faxDeleted1",name:"faxDeleted1",value:"false"},{xtype:"hidden",id:"faxAdviceSheetNotification1",name:"faxAdviceSheetNotification1",value:""},{xtype:"hidden",id:"faxContactCounter",name:"faxContactCounter",value:"1"}]}]}],buttons:[{id:"cancelButton"+config.nameSpace,text:"CANCEL",ctCls:"support-portal-btn-cancel",handler:function(){if(isFormPanelDirty){idxm.core.popups.Cancel({doCancelFunction:jsonFunctionObject.doCancel,noCancelFunction:jsonFunctionObject.noCancel})}else{if(config.redirectURL){eval("document."+config.redirectFormName+".submit()")}else{document.location=config.urlUpdateProfile+"?systemUserId="+config.userData.sysKey}}}},{id:"updateButton"+config.nameSpace,text:"UPDATE",ctCls:"support-portal-btn",handler:formSubmitHandler}],listeners:{uradix_enterkey:formSubmitHandler}});var formPanel=Ext.getCmp("idxmExternalUserProfilePanelForm"+config.nameSpace);var isFormPanelDirty=false;formPanel.getForm().items.each(function(f){f.on("change",function(){isFormPanelDirty=true})});Ext.getCmp("idxmExternalUserProfilePanelForm"+config.nameSpace).getForm().setValues(config.userData);setContactValues(config.userData);var jsonFunctionObject={doCancel:function(){if(config.redirectURL){eval("document."+config.redirectFormName+".submit()")}else{document.location=config.urlUpdateProfile+"?systemUserId="+config.userData.sysKey}},noCancel:function(){}};return jsonFunctionObject};Ext.namespace("idxm.selfprofile.update.demographics.InternalPerson");idxm.selfprofile.update.demographics.InternalPerson=function(config){if(config.redirectURL){if(!((config.redirectURL.substring(0,7).toLowerCase().trim()=="http://")||(config.redirectURL.substring(0,8).toLowerCase().trim()=="https://"))){}}Ext.form.Field.prototype.msgTarget="sideDetails";var isPhoneRequired=false;var idxmEmailsPanel=new idxm.selfprofile.ux.panel.contacts.EmailPanel({loadArray:config.userData.email,emailTypes:config.emailTypes,maxTypeRows:config.maxTypeRows});var idxmPhonesPanel=new idxm.selfprofile.ux.panel.contacts.PhonePanel({loadArray:config.userData.phone,phoneTypes:config.phoneTypes,maxTypeRows:config.maxTypeRows,isPhoneRequired:isPhoneRequired});var idxmFaxPanel=new idxm.selfprofile.ux.panel.contacts.FaxPanel({loadArray:config.userData.fax,faxTypes:config.faxTypes,maxTypeRows:config.maxTypeRows});function formSubmit(){var formObj=Ext.getCmp("idxmEndUserDemographicsPanelForm"+config.nameSpace).getForm();g_hideStatusBox();formObj.submit({url:config.urlSubmitUpdateProfile,clientValidation:false,isRedirect:true,success:function(form,action){if(config.redirectURL){eval("document."+config.redirectFormName+".submit()")}else{uRadixRedirectHandler.redirect(config.urlUpdateProfile+"?systemUserId="+config.userData.sysKey)}},failure:function(form,action){g_showStatusBox();Ext.getCmp("updateButton"+config.nameSpace).enable();Ext.get(document.body.id).unmask()}})}function formSubmitHandler(){var formObj=Ext.getCmp("idxmEndUserDemographicsPanelForm"+config.nameSpace).getForm();var formValues=formObj.getValues();var areEmailContactsValid=idxm.selfprofile.validation.EmailContacts({formId:"idxmEndUserDemographicsPanelForm"+config.nameSpace,contactCounter:formValues.emailContactCounter,booleanVariableTobeSet:"areEmailContactsValid"});var arePhoneContactsValid=idxm.selfprofile.validation.PhoneContacts({formId:"idxmEndUserDemographicsPanelForm"+config.nameSpace,contactCounter:formValues.phoneContactCounter,booleanVariableTobeSet:"arePhoneContactsValid"});var areFaxContactsValid=idxm.selfprofile.validation.FaxContacts({formId:"idxmEndUserDemographicsPanelForm"+config.nameSpace,contactCounter:formValues.faxContactCounter,booleanVariableTobeSet:"areFaxContactsValid"});if(areEmailContactsValid&&arePhoneContactsValid&&areFaxContactsValid){Ext.getCmp("updateButton"+config.nameSpace).disable();Ext.get(document.body.id).mask("<b> Loading...</b> ","x-mask-loading");formSubmit()}}var thisObject=this;var formPanel=new Ext.Panel({renderTo:config.formPanelDivID,border:false,bodyBorder:false,hideBorders:true,width:850,items:[{xtype:"panel",border:false,cls:"portal-title",html:"Update Your Profile"},{xtype:"panel",height:8,border:0,style:"boder:none;",bodyBorder:0,bodyStyle:"border:none",hideBorders:true},{xtype:"panel",height:20,border:0,style:"boder:none;",bodyBorder:0,bodyStyle:"border:none",hideBorders:true,html:"<span class='idxmTextSmall'><b>*Required</b></span>"},{xtype:"uRadix.form.FormPanel",autoScroll:true,id:"idxmEndUserDemographicsPanelForm"+config.nameSpace,items:[{xtype:"idxm.selfprofile.ux.panel.InternalPerson",id:"idxmUserProfilePanel"+config.nameSpace,suffixList:config.suffixes,prefixList:config.prefixes,userData:config.userData,formObjectName:"Ext.getCmp('idxmEndUserDemographicsPanelForm"+config.nameSpace+"')"},idxmEmailsPanel,idxmPhonesPanel,idxmFaxPanel]}],buttons:[{id:"cancelButton"+config.nameSpace,text:"CANCEL",ctCls:"support-portal-btn-cancel",handler:function(){if(isFormPanelDirty){idxm.core.popups.Cancel({doCancelFunction:jsonFunctionObject.doCancel,noCancelFunction:jsonFunctionObject.noCancel})}else{if(config.redirectURL){eval("document."+config.redirectFormName+".submit()")}else{document.location=config.urlUpdateProfile+"?systemUserId="+config.userData.sysKey}}}},{id:"updateButton"+config.nameSpace,text:"UPDATE",ctCls:"support-portal-btn",handler:formSubmitHandler}],listeners:{uradix_enterkey:formSubmitHandler}});var formPanel=Ext.getCmp("idxmEndUserDemographicsPanelForm"+config.nameSpace);var isFormPanelDirty=false;formPanel.getForm().items.each(function(f){f.on("change",function(){isFormPanelDirty=true})});Ext.getCmp("idxmEndUserDemographicsPanelForm"+config.nameSpace).getForm().setValues(config.userData);var jsonFunctionObject={doCancel:function(){if(config.redirectURL){eval("document."+config.redirectFormName+".submit()")}else{document.location=config.urlUpdateProfile+"?systemUserId="+config.userData.sysKey}},noCancel:function(){}};return jsonFunctionObject};Ext.namespace("idxm.selfprofile.resetpassword.ResetPassword");idxm.selfprofile.resetpassword.ResetPassword=function(config){if(config.redirectURL){if(!((config.redirectURL.substring(0,7).toLowerCase().trim()=="http://")||(config.redirectURL.substring(0,8).toLowerCase().trim()=="https://"))){}}function formSubmitHandler(){var formObj=Ext.getCmp(config.formId).getForm();if(formObj.isValid()){var password=formObj.findField("password");var passwordValue=password.getValue();var passwordConfirm=formObj.findField("passwordConfirm");var passwordConfirmValue=passwordConfirm.getValue();if(passwordValue.trim()!=passwordConfirmValue.trim()){password.markInvalid("Passwords do not match");passwordConfirm.markInvalid("Passwords do not match")}else{Ext.getCmp("resetButton"+config.nameSpace).disable();Ext.get(document.body.id).mask("<b> Loading...</b> ","x-mask-loading");formObj.submit({url:config.submitToAction,success:function(form,action){if(config.redirectURL){eval("document."+config.redirectFormName+".submit()")}else{uRadixRedirectHandler.redirect(config.userBaseURL)}},failure:function(form,action){var jsonResponse=uRadixUtilities.jsonDecode(action.response.responseText);if((jsonResponse.advice!=undefined)&&(jsonResponse.advice!=null)){g_showStatusBox()}Ext.getCmp("resetButton"+config.nameSpace).enable();Ext.get(document.body.id).unmask()}})}}}Ext.form.Field.prototype.msgTarget="sideDetails";var currentPasswordJson={xtype:"panel",layout:"form",border:false,bodyBorder:false,hideBorder:true,height:65,width:300,items:[{xtype:"textfield",width:200,fieldLabel:"Current Password",name:"currentPassword",inputType:"password",allowBlank:false,minLength:1,maxLength:17,msgTarget:"sideDetails",tabIndex:1,validationEvent:"blur"}]};if(config.isNetworX=="true"||config.isNetworX==true){currentPasswordJson={xtype:"hidden",name:"networX",value:true}}var createPasswordPanel=new Ext.Panel({border:false,bodyBorder:false,hideBorders:true,height:285,items:[{xtype:"panel",border:false,bodyBorder:false,hideBorders:true,items:[{xtype:"panel",border:false,cls:"portal-title",html:(config.isNetworX=="true"||config.isNetworX==true)?"Update NetworX Password":"Update Password"},{xtype:"panel",height:8,border:0,style:"boder:none;",bodyBorder:0,bodyStyle:"border:none",hideBorders:true},{xtype:"panel",border:false,bodyBorder:false,hideBorders:true,layout:"column",items:[{border:false,bodyBorder:false,hideBorders:true,width:400,items:[{xtype:"uRadix.form.FormPanel",id:config.formId,border:false,width:400,bodyBorder:false,hideBorders:true,items:[{xtype:"panel",layout:"form",labelAlign:"top",autoScroll:true,items:[currentPasswordJson,{xtype:"panel",layout:"form",border:false,bodyBorder:false,hideBorder:true,height:65,width:400,items:[{xtype:"textfield",width:200,fieldLabel:"New Password",name:"password",inputType:"password",allowBlank:false,minLength:8,msgTarget:"sideDetails",tabIndex:2,validationEvent:"blur"}]},{xtype:"panel",layout:"form",border:false,bodyBorder:false,hideBorder:true,height:65,width:400,items:[{xtype:"textfield",width:200,fieldLabel:"Confirm Password",name:"passwordConfirm",inputType:"password",allowBlank:false,minLength:8,msgTarget:"sideDetails",tabIndex:3,validationEvent:"blur"}]}]}],buttonAlign:"right",buttons:[{id:"cancelButton"+config.namenameSpace,text:"CANCEL",ctCls:"support-portal-btn-cancel",tabIndex:5,handler:function(){if(isFormPanelDirty){idxm.core.popups.Cancel({doCancelFunction:jsonFunctionObject.doCancel,noCancelFunction:jsonFunctionObject.noCancel})}else{if(config.redirectURL){eval("document."+config.redirectFormName+".submit()")}else{document.location=config.userBaseURL}}}},{id:"resetButton"+config.nameSpace,text:"RESET",ctCls:"support-portal-btn",tabIndex:4,handler:formSubmitHandler}]}]},{border:false,width:400,bodyBorder:false,hideBorders:true,items:[{xtype:"idxm.core.ux.panel.PasswordHint"}]}]}]}]});var windowContainerObject=new Ext.Panel({renderTo:config.renderTo,style:"background-color:#FFFFFF; background:#FFFFFF",border:false,bodyBorder:false,hideBorders:true,bodyStyle:"padding:5px;",items:[createPasswordPanel]});var formPanel=Ext.getCmp(config.formId);var isFormPanelDirty=false;formPanel.getForm().items.each(function(f){f.on("change",function(){isFormPanelDirty=true})});var jsonFunctionObject={doCancel:function(){if(config.redirectURL){eval("document."+config.redirectFormName+".submit()")}else{document.location=config.userBaseURL}},noCancel:function(){}};return jsonFunctionObject};Ext.namespace("idxm.selfprofile.ux.panel.ExternalPerson");idxm.selfprofile.ux.panel.ExternalPerson=Ext.extend(Ext.Panel,{initComponent:function(){Ext.apply(this,{layout:"form",style:"padding-left:10px; padding-right:10px;",bodyStyle:"padding-left:15px;",bodyBorder:false,border:false,hideBorders:true,labelAlign:"top",items:[{xtype:"hidden",name:"sysKey"},{xtype:"textfield",fieldLabel:"First Name",name:"firstName",maxLength:50,width:200,msgTarget:"sideDetails",validateOnBlur:true,allowBlank:false},{xtype:"textfield",fieldLabel:"Last Name",name:"lastName",msgTarget:"sideDetails",maxLength:50,width:200,allowBlank:false}]});Ext.apply(this.initialConfig,{layout:this.layout,style:this.style,bodyBorder:this.bodyBorder,border:this.border,width:this.width,items:this.items});idxm.selfprofile.ux.panel.ExternalPerson.superclass.initComponent.call(this)}});Ext.reg("idxm.selfprofile.ux.panel.ExternalPerson",idxm.selfprofile.ux.panel.ExternalPerson);Ext.namespace("idxm.selfprofile.ux.panel.InternalPerson");idxm.selfprofile.ux.panel.InternalPerson=Ext.extend(Ext.Panel,{initComponent:function(){if(!this.prefixList){this.prefixList=[{id:"1",name:"Dr."},{id:"2",name:"Miss"},{id:"3",name:"Mr."},{id:"4",name:"Mrs."},{id:"5",name:"Rev."}]}if(!this.suffixList){this.suffixList=[{id:"1",name:"II"},{id:"2",name:"III"},{id:"3",name:"IV"},{id:"4",name:"Esq."},{id:"5",name:"Jr."},{id:"6",name:"Sr."}]}if(!this.locationList){this.locationList=[{id:"",name:"- Select One -"},{id:"1",name:"Arlingnton"},{id:"2",name:"Brookfield"},{id:"3",name:"Dallas"},{id:"4",name:"DePere"},{id:"5",name:"Irvine"},{id:"6",name:"Kansas City"},{id:"5",name:"New Orleans"},{id:"6",name:"New York"},{id:"5",name:"Remote"},{id:"6",name:"Rockville"},{id:"6",name:"Rosemont"},{id:"6",name:"Syracuse"},{id:"6",name:"Waltham"}]}if(!this.departmentList){this.departmentList=[{id:"",name:"- Select One -"},{id:"1",name:"Customer Service"},{id:"2",name:"HR"},{id:"3",name:"Legal"},{id:"4",name:"Management"},{id:"5",name:"Operations"},{id:"6",name:"IT"}]}this.prefixList=[{id:"",name:"- Select One -"}].concat(this.prefixList);this.suffixList=[{id:"",name:"- Select One -"}].concat(this.suffixList);var b=this.formObjectName;var a=this.userData;Ext.apply(this,{layout:"form",style:"padding-left:10px; padding-right:10px;",bodyStyle:"padding-left:15px;",bodyBorder:false,border:false,hideBorders:true,labelAlign:"top",items:[{xtype:"hidden",name:"sysKey"},{xtype:"hidden",name:"userTypeCode"},{xtype:"hidden",name:"userClassCode"},{xtype:"hidden",name:"userSubClassCode"},{xtype:"combo",fieldLabel:"Prefix",hiddenName:"prefix",name:"prefixText",mode:"local",store:new Ext.data.JsonStore({fields:["id","name"],root:"rows",idProperty:"id",data:{rows:this.prefixList}}),valueField:"id",displayField:"name",triggerAction:"all",emptyText:"- Select One -",forceSelection:true,selectOnFocus:true,width:200,typeAhead:true,typeAheadDelay:0,listeners:{render:function(){this.el.dom.name=this.name}}},{xtype:"textfield",fieldLabel:"First Name",name:"firstName",maxLength:50,width:200,allowBlank:false},{xtype:"textfield",fieldLabel:"Middle Name/Initial",name:"middleName",maxLength:50,width:200},{xtype:"textfield",fieldLabel:"Last Name",name:"lastName",maxLength:50,width:200,allowBlank:false},{xtype:"combo",fieldLabel:"Suffix",hiddenName:"suffix",name:"suffixText",mode:"local",store:new Ext.data.JsonStore({fields:["id","name"],root:"rows",idProperty:"id",data:{rows:this.suffixList}}),valueField:"id",emptyText:"- Select One -",displayField:"name",triggerAction:"all",forceSelection:false,selectOnFocus:true,width:200,listeners:{render:function(){this.el.dom.name=this.name}},typeAhead:true,typeAheadDelay:0}]});Ext.apply(this.initialConfig,{layout:this.layout,style:this.style,bodyBorder:this.bodyBorder,border:this.border,width:this.width,items:this.items});idxm.selfprofile.ux.panel.InternalPerson.superclass.initComponent.call(this)}});Ext.reg("idxm.selfprofile.ux.panel.InternalPerson",idxm.selfprofile.ux.panel.InternalPerson);Ext.namespace("idxm.selfprofile.ux.panel.contacts.EmailMultipleRowPanel");idxm.selfprofile.ux.panel.contacts.EmailMultipleRowPanel=Ext.extend(Ext.Panel,{initComponent:function(){if(!this.blnDisplayAdvicesheet){this.blnDisplayAdvicesheet=false}var b=this.id;var a=this.blnDisplayAdvicesheet;var d=[{xtype:"label",text:"* Email(s):",cls:"supportPortalFormLabelBold"},{xtype:"panel",border:false,bodyBorder:false,hideBorders:true,height:5}];if(this.fieldArray.length){var e=0;for(var c=0;c<this.fieldArray.length;c++){e+=1;if(c){this.fieldArray[c]=new idxm.selfprofile.ux.panel.contacts.EmailRowPanel({id:b+"dynamicID"+c,dynamicID:c,emailContact:this.fieldArray[c],emailTypes:this.emailTypes,blnDisplayAdvicesheet:a})}else{this.fieldArray[c]=new idxm.selfprofile.ux.panel.contacts.EmailRowPanel({id:b+"dynamicID"+c,dynamicID:c,allowDelete:false,emailContact:this.fieldArray[c],emailTypes:this.emailTypes,blnDisplayAdvicesheet:a})}d[d.length]=this.fieldArray[c]}if(e<this.maxTypeRows){this.fieldArray[this.fieldArray.length]=new idxm.selfprofile.ux.panel.contacts.EmailRowPanel({id:b+"dynamicID"+this.fieldArray.length,dynamicID:this.fieldArray.length,emailTypes:this.emailTypes,blnDisplayAdvicesheet:a});d[d.length]=this.fieldArray[this.fieldArray.length-1]}}else{this.fieldArray[0]=new idxm.selfprofile.ux.panel.contacts.EmailRowPanel({id:b+"dynamicID0",dynamicID:0,allowDelete:false,emailTypes:this.emailTypes,blnDisplayAdvicesheet:a});this.fieldArray[1]=new idxm.selfprofile.ux.panel.contacts.EmailRowPanel({id:b+"dynamicID1",dynamicID:1,emailTypes:this.emailTypes,blnDisplayAdvicesheet:a});d[d.length]=this.fieldArray[0];d[d.length]=this.fieldArray[1]}Ext.apply(this,{layout:"form",style:"padding-left:25px;",items:d});Ext.apply(this.initialConfig,{id:this.id,items:this.items});idxm.selfprofile.ux.panel.contacts.EmailMultipleRowPanel.superclass.initComponent.call(this)}});Ext.reg("idxm.selfprofile.ux.panel.contacts.EmailMultipleRowPanel",idxm.selfprofile.ux.panel.contacts.EmailMultipleRowPanel);Ext.namespace("idxm.selfprofile.ux.panel.contacts.EmailPanel");idxm.selfprofile.ux.panel.contacts.EmailPanel=Ext.extend(Ext.Panel,{initComponent:function(config){if(!this.maxTypeRows){this.maxTypeRows=5}if(!this.blnDisplayAdvicesheet){this.blnDisplayAdvicesheet=false}var panelID=this.id;var hiddenEmailContactsCounter=new Ext.form.Hidden({name:"emailContactCounter"});var fieldsEmailArray;var emailMultiplePanel;var emailTypes=this.emailTypes;var maxTypeRows=this.maxTypeRows;var unMarkAdviceSheetForFaxPanel=this.unMarkAdviceSheetForFaxPanel;var blnDisplayAdvicesheet=this.blnDisplayAdvicesheet;function validateFieldsInPanelHaveValue(m_EmailsObject){var isValid=true;var arrayCount=0;for(i=0;i<fieldsEmailArray.length;i++){if(fieldsEmailArray[i]!=null){arrayCount+=1;var temp=fieldsEmailArray[i].emailAddressObject.getRawValue();if(temp.length<=0){isValid=false;break}var temp=fieldsEmailArray[i].emailTypeObject.getRawValue();if(temp.length<=0){isValid=false;break}var temp=fieldsEmailArray[i].emailTypeOther;if(temp&&!temp.disabled){temp=temp.getRawValue();if(temp.length<=0){isValid=false;break}}}}if(isValid&&arrayCount<maxTypeRows){var emailsObject=m_EmailsObject;var newFieldPanel=new idxm.selfprofile.ux.panel.contacts.EmailRowPanel({id:"emailMultiplePanel"+panelID+"dynamicID"+fieldsEmailArray.length,dynamicID:fieldsEmailArray.length,emailTypes:emailTypes,blnDisplayAdvicesheet:blnDisplayAdvicesheet});fieldsEmailArray[fieldsEmailArray.length]=newFieldPanel;emailsObject.add(newFieldPanel);addListenersFieldsInPanel(emailsObject);emailsObject.doLayout()}return isValid}if(blnDisplayAdvicesheet){function markAdviceSheet(m_adviceObject){for(i=0;i<fieldsEmailArray.length;i++){if(fieldsEmailArray[i]!=null){if(m_adviceObject.adviceIndex==i){fieldsEmailArray[i].emailAdviceSheetNotification.setValue(true)}else{fieldsEmailArray[i].emailAdviceSheetNotification.setValue(false)}}}}}function addListenersFieldsInPanel(m_EmailsObject){var emailsObject=m_EmailsObject;for(i=0;i<fieldsEmailArray.length;i++){if(fieldsEmailArray[i]!=null){fieldsEmailArray[i].emailAddressObject.on("blur",function(){validateFieldsInPanelHaveValue(emailsObject)});fieldsEmailArray[i].emailTypeObject.on("blur",function(){validateFieldsInPanelHaveValue(emailsObject)});fieldsEmailArray[i].emailTypeOther.on("blur",function(){validateFieldsInPanelHaveValue(emailsObject)});if(blnDisplayAdvicesheet){fieldsEmailArray[i].AdviceSheetRadioButton.on("check",function(){eval(unMarkAdviceSheetForFaxPanel);markAdviceSheet(Ext.decode(this.getRawValue()),emailsObject);this.checked=true;this.checked=false})}var panelToDelete=fieldsEmailArray[i].interiorFieldButtonPanel;try{fieldsEmailArray[i].interiorEraseButton.on("click",function(panelToDelete,emailsObject,i){var arrayID=this.arrayID;Ext.getCmp("emailMultiplePanel"+panelID+"dynamicID"+this.arrayID).cascade(function(item){if(item.isFormField){if(item.name=="emailDeleted"+arrayID){item.setValue("true")}}});if(blnDisplayAdvicesheet){fieldsEmailArray[this.arrayID].emailAdviceSheetNotification.setValue(false)}Ext.getCmp("emailMultiplePanel"+panelID+"dynamicID"+this.arrayID).setVisible(false);fieldsEmailArray[this.arrayID]=null})}catch(e){}}}hiddenEmailContactsCounter.setValue(fieldsEmailArray.length-1)}if(this.loadArray&&this.loadArray.length){fieldsEmailArray=this.loadArray;emailMultiplePanel=new idxm.selfprofile.ux.panel.contacts.EmailMultipleRowPanel({id:"emailMultiplePanel"+panelID,fieldArray:this.loadArray,emailTypes:this.emailTypes,maxTypeRows:maxTypeRows,blnDisplayAdvicesheet:blnDisplayAdvicesheet})}else{fieldsEmailArray=new Array();emailMultiplePanel=new idxm.selfprofile.ux.panel.contacts.EmailMultipleRowPanel({id:"emailMultiplePanel"+panelID,fieldArray:fieldsEmailArray,emailTypes:this.emailTypes,blnDisplayAdvicesheet:blnDisplayAdvicesheet})}addListenersFieldsInPanel(emailMultiplePanel);Ext.apply(this,{layout:"form",bodyBorder:false,border:false,ctCls:"portal-plain-panel",hideBorders:true,items:[emailMultiplePanel,hiddenEmailContactsCounter]});Ext.apply(this.initialConfig,{layout:this.layout,style:this.style,bodyBorder:this.bodyBorder,border:this.border,ctCls:"portal-plain-panel",width:this.width,items:this.items});if(blnDisplayAdvicesheet){this.unMarkAdviceSheet=function(){var fieldsEmailArray=this.fieldsEmailArray;for(i=0;i<fieldsEmailArray.length;i++){if(fieldsEmailArray[i]!=null){fieldsEmailArray[i].emailAdviceSheetNotification.setValue(false)}}};this.isAdviceSheetValid=function(formPanelObject,fieldName){var AdviceNotificationCheckBoxFieldArray=formPanelObject.find("name",fieldName);var areAllNotificationChecksEmpty=true;var adviceNotificationValue;for(i=0;i<AdviceNotificationCheckBoxFieldArray.length;i++){if(AdviceNotificationCheckBoxFieldArray[i].getValue()){areAllNotificationChecksEmpty=false;adviceNotificationValue=AdviceNotificationCheckBoxFieldArray[i].getRawValue()}}if(areAllNotificationChecksEmpty){return false}else{var adviceNotificationValueJson=Ext.decode(adviceNotificationValue);if(adviceNotificationValueJson.adviceType=="email"){if(!Ext.isEmpty(fieldsEmailArray[adviceNotificationValueJson.adviceIndex])){if(fieldsEmailArray[adviceNotificationValueJson.adviceIndex].emailAddressObject.getValue().trim()==""&&fieldsEmailArray[adviceNotificationValueJson.adviceIndex].emailTypeOther.getValue().trim()==""){return false}else{return true}}else{return false}}else{return true}}}}this.fieldsEmailArray=fieldsEmailArray;idxm.selfprofile.ux.panel.contacts.EmailPanel.superclass.initComponent.call(this)}});Ext.reg("idxm.selfprofile.ux.panel.contacts.EmailPanel",idxm.selfprofile.ux.panel.contacts.EmailPanel);Ext.namespace("idxm.selfprofile.ux.panel.contacts.EmailRowPanel");idxm.selfprofile.ux.panel.contacts.EmailRowPanel=Ext.extend(Ext.Panel,{initComponent:function(){this.emailTypes=[{id:"",name:"- Select One -"}].concat(this.emailTypes);if(!this.blnDisplayAdvicesheet){this.blnDisplayAdvicesheet=false}var b=this.blnDisplayAdvicesheet;this.emailDeletedJson={id:"emailDeleted"+this.dynamicID,name:"emailDeleted"+this.dynamicID};this.emailIdJson={id:"emailId"+this.dynamicID,name:"emailId"+this.dynamicID};this.emailAddressJson={hideLabel:true,labelSeparator:"",id:"emailAddress"+this.dynamicID,name:"emailAddress"+this.dynamicID,maxLength:256,width:200,msgTarget:"emailAddressTarget"+this.dynamicID,msgDisplay:"",vtype:"email",validationEvent:"blur",allowBlank:true};this.emailTypeJson={hideLabel:true,width:225,labelSeparator:"",hiddenId:"emailTypeCode"+this.dynamicID,hiddenName:"emailTypeCode"+this.dynamicID,id:"emailTypeText"+this.dynamicID,name:"emailTypeText"+this.dynamicID,msgTarget:"emailAddressTarget"+this.dynamicID,msgDisplay:"",mode:"local",store:new Ext.data.JsonStore({fields:["id","name"],root:"rows",idProperty:"id",data:{rows:this.emailTypes}}),valueField:"id",emptyText:"- Select One -",displayField:"name",triggerAction:"all",editable:false,allowBlank:true,forceSelection:false,selectOnFocus:true,listeners:{render:function(){this.el.dom.name=this.name},select:function(){if(this.getValue()=="Other"){c.enable();c.show();c.cascade(function(f){if(f.isFormField){f.enable();f.show()}})}else{c.enable();c.disable();c.hide();c.cascade(function(f){if(f.isFormField){f.disable();f.hide()}})}}}};this.emailAdviceSheetNotification=new Ext.form.Hidden({id:"emailAdviceSheetNotification"+this.dynamicID,name:"emailAdviceSheetNotification"+this.dynamicID,value:false});var a=this.dynamicID;this.AdviceSheetRadioButton=new Ext.form.Radio({hideLabel:true,labelSeparator:"",boxLabel:"Use For Advice Notification",name:"AdviceNotificationCheckBox",inputValue:Ext.encode({adviceType:"email",adviceIndex:a}),value:this.dynamicID,ctCls:"advice-box-label",cls:"advice-box-label",listeners:{check:function(){}}});if(this.emailContact!=undefined&&this.emailContact.value!=undefined){this.emailIdJson.value=this.emailContact.id;this.emailAddressJson.value=this.emailContact.value;this.emailTypeJson.value=this.emailContact.type;this.emailTypeJson.hiddenValue=this.emailContact.type;if(this.emailContact.adviceNotification!=undefined){this.emailAdviceSheetNotification.value=this.emailContact.adviceNotification;if(this.emailContact.adviceNotification){this.AdviceSheetRadioButton.checked=this.emailContact.adviceNotification}}}this.emailDeletedObject=new Ext.form.Hidden(this.emailDeletedJson);this.emailIdObject=new Ext.form.Hidden(this.emailIdJson);this.emailAddressObject=new Ext.form.TextField(this.emailAddressJson);this.emailTypeObject=new Ext.form.ComboBox(this.emailTypeJson);this.emailTypeOther=new Ext.form.TextField({hideLabel:true,width:120,labelSeparator:"",disabled:true,hidden:true,id:"emailOther"+this.dynamicID,name:"emailOther"+this.dynamicID,maxLength:20,msgTarget:"emailAddressTarget"+this.dynamicID,msgDisplay:"",allowBlank:true});this.emailTypeOtherPanel=new Ext.Panel({layout:"form",width:133,style:"padding-right:5px;",hidden:true,disabled:true,border:false,bodyBorder:false,hideBorders:true,items:[this.emailTypeOther]});var d=this.emailTypeOther;var c=this.emailTypeOtherPanel;if(typeof(this.allowDelete)=="undefined"){this.allowDelete=true}if(this.allowDelete){this.interiorEraseButton=new Ext.Button({arrayID:this.dynamicID,text:"X",cls:"support-portal-btn"});this.EraseButtonPanel=new Ext.Panel({layout:"form",width:30,cls:"portal-plain-panel",border:false,bodyBorder:false,hideBorders:true,items:[this.interiorEraseButton]})}else{this.EraseButtonPanel=new Ext.Panel({layout:"form",width:30,cls:"portal-plain-panel",border:false,bodyBorder:false,hideBorders:true,html:"&nbsp;"})}var e={border:false,bodyBorder:false,hideBorders:true};if(b){e={layout:"column",cls:"portal-plain-panel",border:false,bodyBorder:false,hideBorders:true,items:[{width:10,html:"&nbsp;"},this.AdviceSheetRadioButton,this.emailAdviceSheetNotification]}}this.interiorFieldButtonPanel=new Ext.Panel({layout:"form",bodyBorder:false,border:false,hideBorders:true,ctCls:"portal-plain-panel",items:[{layout:"column",cls:"portal-plain-panel",border:false,bodyBorder:false,hideBorders:true,items:[{layout:"form",width:205,cls:"portal-plain-panel",border:false,bodyBorder:false,hideBorders:true,items:[this.emailDeletedObject,this.emailIdObject,this.emailAddressObject]},{layout:"form",width:230,style:"padding-right:5px;",cls:"portal-plain-panel",border:false,bodyBorder:false,hideBorders:true,items:[this.emailTypeObject]},this.emailTypeOtherPanel,this.EraseButtonPanel,{id:"emailAddressTarget"+this.dynamicID,layout:"form",cls:"invalid-target-field-panel",style:"padding-top:5px;",border:false,bodyBorder:false,hideBorders:true}]},e]});Ext.apply(this,{layout:"form",bodyBorder:false,border:false,hideBorders:true,ctCls:"portal-plain-panel",items:[this.interiorFieldButtonPanel]});Ext.apply(this.initialConfig,{layout:this.layout,style:this.style,ctCls:this.ctCls,bodyBorder:this.bodyBorder,border:this.border,width:this.width,items:this.items});idxm.selfprofile.ux.panel.contacts.EmailRowPanel.superclass.initComponent.call(this)}});Ext.reg("idxm.selfprofile.ux.panel.contacts.EmailRowPanel",idxm.selfprofile.ux.panel.contacts.EmailRowPanel);Ext.namespace("idxm.selfprofile.ux.panel.contacts.FaxMultipleRowContactPanel");idxm.selfprofile.ux.panel.contacts.FaxMultipleRowContactPanel=Ext.extend(Ext.Panel,{initComponent:function(){if(!this.blnDisplayAdvicesheet){this.blnDisplayAdvicesheet=false}var b=this.id;var a=this.blnDisplayAdvicesheet;var d=[{xtype:"label",text:"Fax(s):",cls:"supportPortalFormLabel"},{xtype:"panel",border:false,bodyBorder:false,hideBorders:true,height:5}];if(this.fieldArray.length){var e=0;for(var c=0;c<this.fieldArray.length;c++){e+=1;if(c){this.fieldArray[c]=new idxm.selfprofile.ux.panel.contacts.FaxRowContactPanel({id:b+"dynamicID"+c,dynamicID:c,faxContact:this.fieldArray[c],faxTypes:this.faxTypes,blnDisplayAdvicesheet:a})}else{this.fieldArray[c]=new idxm.selfprofile.ux.panel.contacts.FaxRowContactPanel({id:b+"dynamicID"+c,dynamicID:c,allowDelete:false,faxContact:this.fieldArray[c],faxTypes:this.faxTypes,blnDisplayAdvicesheet:a})}d[d.length]=this.fieldArray[c]}if(e<this.maxTypeRows){this.fieldArray[this.fieldArray.length]=new idxm.selfprofile.ux.panel.contacts.FaxRowContactPanel({id:b+"dynamicID"+this.fieldArray.length,dynamicID:this.fieldArray.length,faxTypes:this.faxTypes,blnDisplayAdvicesheet:a});d[d.length]=this.fieldArray[this.fieldArray.length-1]}}else{this.fieldArray[0]=new idxm.selfprofile.ux.panel.contacts.FaxRowContactPanel({id:b+"dynamicID0",dynamicID:0,allowDelete:false,faxTypes:this.faxTypes,blnDisplayAdvicesheet:a});this.fieldArray[1]=new idxm.selfprofile.ux.panel.contacts.FaxRowContactPanel({id:b+"dynamicID1",dynamicID:1,faxTypes:this.faxTypes,blnDisplayAdvicesheet:a});d[d.length]=this.fieldArray[0];d[d.length]=this.fieldArray[1]}Ext.apply(this,{layout:"form",style:"padding-left:25px;",items:d});Ext.apply(this.initialConfig,{id:this.id,items:this.items});idxm.selfprofile.ux.panel.contacts.FaxMultipleRowContactPanel.superclass.initComponent.call(this)}});Ext.reg("idxm.selfprofile.ux.panel.contacts.FaxMultipleRowContactPanel",idxm.selfprofile.ux.panel.contacts.FaxMultipleRowContactPanel);Ext.namespace("idxm.selfprofile.ux.panel.contacts.FaxPanel");idxm.selfprofile.ux.panel.contacts.FaxPanel=Ext.extend(Ext.Panel,{initComponent:function(config){if(!this.maxTypeRows){this.maxTypeRows=5}if(!this.blnDisplayAdvicesheet){this.blnDisplayAdvicesheet=false}var panelID=this.id;var faxTypes=this.faxTypes;var maxTypeRows=this.maxTypeRows;var hiddenFaxContactsCounter=new Ext.form.Hidden({name:"faxContactCounter"});var unMarkAdviceSheetForEmailPanel=this.unMarkAdviceSheetForEmailPanel;var fieldsFaxArray;var faxMultiplePanel;var blnDisplayAdvicesheet=this.blnDisplayAdvicesheet;function validateFieldsInPanelHaveValue(m_FaxsObject){var isValid=true;var arrayCount=0;for(i=0;i<fieldsFaxArray.length;i++){if(fieldsFaxArray[i]!=null){arrayCount+=1;var temp=fieldsFaxArray[i].faxAddressObject.getRawValue();if(temp.length<=0){isValid=false;break}var temp=fieldsFaxArray[i].faxTypeObject.getRawValue();if(temp.length<=0){isValid=false;break}var temp=fieldsFaxArray[i].faxTypeOther;if(temp&&!temp.disabled){temp=temp.getRawValue();if(temp.length<=0){isValid=false;break}}}}if(isValid&&arrayCount<maxTypeRows){var faxsObject=m_FaxsObject;var newFieldPanel=new idxm.selfprofile.ux.panel.contacts.FaxRowContactPanel({id:"faxMultiplePanel"+panelID+"dynamicID"+fieldsFaxArray.length,dynamicID:fieldsFaxArray.length,faxTypes:faxTypes,blnDisplayAdvicesheet:blnDisplayAdvicesheet});fieldsFaxArray[fieldsFaxArray.length]=newFieldPanel;faxsObject.add(newFieldPanel);addListenersFieldsInPanel(faxsObject);faxsObject.doLayout()}return isValid}if(blnDisplayAdvicesheet){function markAdviceSheet(m_adviceObject){for(i=0;i<fieldsFaxArray.length;i++){if(fieldsFaxArray[i]!=null){if(m_adviceObject.adviceIndex==i){fieldsFaxArray[i].faxAdviceSheetNotification.setValue(true)}else{fieldsFaxArray[i].faxAdviceSheetNotification.setValue(false)}}}}}function makeFirstRowDeletable(){var blnMakeFirstRowDeletable=true;for(i=1;i<fieldsFaxArray.length;i++){if(fieldsFaxArray[i]!=null){if(fieldsFaxArray[i].faxDeletedObject.getValue()!=undefined&&fieldsFaxArray[i].faxDeletedObject.getValue()!="true"){if((fieldsFaxArray[i].faxAddressObject.getValue()!=undefined&&fieldsFaxArray[i].faxAddressObject.getValue().trim()!="")||(fieldsFaxArray[i].faxTypeObject.getValue()!=undefined&&fieldsFaxArray[i].faxTypeObject.getValue().trim()!="")){blnMakeFirstRowDeletable=false}}}}fieldsFaxArray[0].EraseButtonPanel.setVisible(blnMakeFirstRowDeletable)}function addListenersFieldsInPanel(m_FaxsObject){var faxsObject=m_FaxsObject;for(i=0;i<fieldsFaxArray.length;i++){if(fieldsFaxArray[i]!=null){fieldsFaxArray[i].faxAddressObject.on("blur",function(){validateFieldsInPanelHaveValue(faxsObject);makeFirstRowDeletable()});fieldsFaxArray[i].faxTypeObject.on("blur",function(){validateFieldsInPanelHaveValue(faxsObject);makeFirstRowDeletable()});fieldsFaxArray[i].faxTypeOther.on("blur",function(){validateFieldsInPanelHaveValue(faxsObject);makeFirstRowDeletable()});if(blnDisplayAdvicesheet){fieldsFaxArray[i].AdviceSheetRadioButton.on("check",function(){makeFirstRowDeletable();eval(unMarkAdviceSheetForEmailPanel);markAdviceSheet(Ext.decode(this.getRawValue()),faxsObject);this.checked=true;this.checked=false})}var panelToDelete=fieldsFaxArray[i].interiorFieldButtonPanel;try{if(i){fieldsFaxArray[i].interiorEraseButton.on("click",function(panelToDelete,faxsObject,i){var arrayID=this.arrayID;Ext.getCmp("faxMultiplePanel"+panelID+"dynamicID"+this.arrayID).cascade(function(item){if(item.isFormField){if(item.name=="faxDeleted"+arrayID){item.setValue("true")}}});makeFirstRowDeletable();if(blnDisplayAdvicesheet){fieldsFaxArray[this.arrayID].faxAdviceSheetNotification.setValue(false)}Ext.getCmp("faxMultiplePanel"+panelID+"dynamicID"+this.arrayID).setVisible(false);fieldsFaxArray[this.arrayID]=null})}else{fieldsFaxArray[i].interiorEraseButton.on("click",function(panelToDelete,faxsObject,i){var arrayID=this.arrayID;fieldsFaxArray[this.arrayID].faxAddressObject.setValue("");fieldsFaxArray[this.arrayID].faxTypeObject.setValue("");fieldsFaxArray[this.arrayID].faxTypeOther.setValue("");if(blnDisplayAdvicesheet){fieldsFaxArray[this.arrayID].faxAdviceSheetNotification.setValue(false)}})}}catch(e){}}}hiddenFaxContactsCounter.setValue(fieldsFaxArray.length-1)}if(this.loadArray&&this.loadArray.length){fieldsFaxArray=this.loadArray;faxMultiplePanel=new idxm.selfprofile.ux.panel.contacts.FaxMultipleRowContactPanel({id:"faxMultiplePanel"+panelID,fieldArray:this.loadArray,faxTypes:this.faxTypes,maxTypeRows:maxTypeRows,blnDisplayAdvicesheet:blnDisplayAdvicesheet})}else{fieldsFaxArray=new Array();faxMultiplePanel=new idxm.selfprofile.ux.panel.contacts.FaxMultipleRowContactPanel({id:"faxMultiplePanel"+panelID,fieldArray:fieldsFaxArray,faxTypes:this.faxTypes,blnDisplayAdvicesheet:blnDisplayAdvicesheet})}addListenersFieldsInPanel(faxMultiplePanel);makeFirstRowDeletable();Ext.apply(this,{layout:"form",bodyBorder:false,border:false,ctCls:"portal-plain-panel",hideBorders:true,items:[faxMultiplePanel,hiddenFaxContactsCounter]});Ext.apply(this.initialConfig,{layout:this.layout,style:this.style,bodyBorder:this.bodyBorder,border:this.border,ctCls:"portal-plain-panel",width:this.width,items:this.items});if(blnDisplayAdvicesheet){this.unMarkAdviceSheet=function(){var fieldsFaxArray=this.fieldsFaxArray;for(i=0;i<fieldsFaxArray.length;i++){if(fieldsFaxArray[i]!=null){fieldsFaxArray[i].faxAdviceSheetNotification.setValue(false)}}};this.isAdviceSheetValid=function(formPanelObject,fieldName){var AdviceNotificationCheckBoxFieldArray=formPanelObject.find("name",fieldName);var areAllNotificationChecksEmpty=true;var adviceNotificationValue;for(i=0;i<AdviceNotificationCheckBoxFieldArray.length;i++){if(AdviceNotificationCheckBoxFieldArray[i].getValue()){areAllNotificationChecksEmpty=false;adviceNotificationValue=AdviceNotificationCheckBoxFieldArray[i].getRawValue()}}if(areAllNotificationChecksEmpty){return false}else{var adviceNotificationValueJson=Ext.decode(adviceNotificationValue);if(adviceNotificationValueJson.adviceType=="fax"){if(!Ext.isEmpty(fieldsFaxArray[adviceNotificationValueJson.adviceIndex])){if(fieldsFaxArray[adviceNotificationValueJson.adviceIndex].faxAddressObject.getValue().trim()==""&&fieldsFaxArray[adviceNotificationValueJson.adviceIndex].faxTypeOther.getValue().trim()==""){return false}else{return true}}else{return false}}else{return true}}}}this.fieldsFaxArray=fieldsFaxArray;idxm.selfprofile.ux.panel.contacts.FaxPanel.superclass.initComponent.call(this)}});Ext.reg("idxm.selfprofile.ux.panel.contacts.FaxPanel",idxm.selfprofile.ux.panel.contacts.FaxPanel);Ext.namespace("idxm.selfprofile.ux.panel.contacts.FaxRowContactPanel");idxm.selfprofile.ux.panel.contacts.FaxRowContactPanel=Ext.extend(Ext.Panel,{initComponent:function(){this.faxTypes=[{id:"",name:"- Select One -"}].concat(this.faxTypes);if(!this.blnDisplayAdvicesheet){this.blnDisplayAdvicesheet=false}var c=this.blnDisplayAdvicesheet;this.faxDeletedJson={id:"faxDeleted"+this.dynamicID,name:"faxDeleted"+this.dynamicID,value:false};this.faxIdJson={id:"faxId"+this.dynamicID,name:"faxId"+this.dynamicID};this.faxAddressJson={hideLabel:true,labelSeparator:"",id:"faxAddress"+this.dynamicID,name:"faxAddress"+this.dynamicID,maxLength:256,width:200,msgTarget:"faxAddressTarget"+this.dynamicID,msgDisplay:"",vtype:"phone",validationEvent:"blur",allowBlank:true};this.faxTypeJson={hideLabel:true,width:225,labelSeparator:"",hiddenId:"faxTypeCode"+this.dynamicID,hiddenName:"faxTypeCode"+this.dynamicID,id:"faxTypeText"+this.dynamicID,name:"faxTypeText"+this.dynamicID,msgTarget:"faxAddressTarget"+this.dynamicID,msgDisplay:"",mode:"local",store:new Ext.data.JsonStore({fields:["id","name"],root:"rows",idProperty:"id",data:{rows:this.faxTypes}}),valueField:"id",emptyText:"- Select One -",displayField:"name",triggerAction:"all",editable:false,allowBlank:true,forceSelection:false,selectOnFocus:true,listeners:{render:function(){this.el.dom.name=this.name},select:function(){if(this.getValue()=="Other"){b.enable();b.show();b.cascade(function(f){if(f.isFormField){f.enable();f.show()}})}else{b.enable();b.disable();b.hide();b.cascade(function(f){if(f.isFormField){f.disable();f.hide()}})}}}};this.faxAdviceSheetNotification=new Ext.form.Hidden({id:"faxAdviceSheetNotification"+this.dynamicID,name:"faxAdviceSheetNotification"+this.dynamicID,value:false});var a=this.dynamicID;this.AdviceSheetRadioButton=new Ext.form.Radio({hideLabel:true,labelSeparator:"",boxLabel:"Use For Advice Notification",name:"AdviceNotificationCheckBox",inputValue:Ext.encode({adviceType:"fax",adviceIndex:a}),value:this.dynamicID,ctCls:"advice-box-label",cls:"advice-box-label",listeners:{check:function(){}}});if(this.faxContact!=undefined&&this.faxContact.value!=undefined){this.faxIdJson.value=this.faxContact.id;this.faxAddressJson.value=this.faxContact.value;this.faxTypeJson.value=this.faxContact.type;this.faxTypeJson.hiddenValue=this.faxContact.type;if(this.faxContact.adviceNotification!=undefined){this.faxAdviceSheetNotification.value=this.faxContact.adviceNotification;if(this.faxContact.adviceNotification){this.AdviceSheetRadioButton.checked=this.faxContact.adviceNotification}}}this.faxDeletedObject=new Ext.form.Hidden(this.faxDeletedJson);this.faxIdObject=new Ext.form.Hidden(this.faxIdJson);this.faxAddressObject=new Ext.form.TextField(this.faxAddressJson);this.faxTypeObject=new Ext.form.ComboBox(this.faxTypeJson);this.faxTypeOther=new Ext.form.TextField({hideLabel:true,width:120,labelSeparator:"",disabled:true,hidden:true,id:"faxOther"+this.dynamicID,name:"faxOther"+this.dynamicID,maxLength:30,msgTarget:"faxAddressTarget"+this.dynamicID,msgDisplay:"",allowBlank:true});this.faxTypeOtherPanel=new Ext.Panel({layout:"form",width:133,style:"padding-right:5px;",hidden:true,disabled:true,border:false,bodyBorder:false,hideBorders:true,items:[this.faxTypeOther]});var d=this.faxTypeOther;var b=this.faxTypeOtherPanel;if(typeof(this.allowDelete)=="undefined"){this.allowDelete=true}if(this.allowDelete){this.interiorEraseButton=new Ext.Button({arrayID:this.dynamicID,text:"X",ctCls:"support-portal-btn"});this.EraseButtonPanel=new Ext.Panel({layout:"form",width:30,cls:"portal-plain-panel",border:false,bodyBorder:false,hideBorders:true,items:[this.interiorEraseButton]})}else{this.interiorEraseButton=new Ext.Button({arrayID:this.dynamicID,text:"X",ctCls:"support-portal-btn"});this.EraseButtonPanel=new Ext.Panel({layout:"form",width:30,cls:"portal-plain-panel",border:false,bodyBorder:false,hideBorders:true,hidden:true,items:[this.interiorEraseButton]})}var e={border:false,bodyBorder:false,hideBorders:true};if(c){e={layout:"column",cls:"portal-plain-panel",border:false,bodyBorder:false,hideBorders:true,items:[{width:10,html:"&nbsp;"},this.AdviceSheetRadioButton,this.faxAdviceSheetNotification]}}this.interiorFieldButtonPanel=new Ext.Panel({layout:"form",bodyBorder:false,border:false,hideBorders:true,ctCls:"portal-plain-panel",items:[{layout:"column",cls:"portal-plain-panel",border:false,bodyBorder:false,hideBorders:true,items:[{layout:"form",width:205,cls:"portal-plain-panel",border:false,bodyBorder:false,hideBorders:true,items:[this.faxDeletedObject,this.faxIdObject,this.faxAddressObject]},{layout:"form",width:230,style:"padding-right:5px;",cls:"portal-plain-panel",border:false,bodyBorder:false,hideBorders:true,items:[this.faxTypeObject]},this.faxTypeOtherPanel,this.EraseButtonPanel,{id:"faxAddressTarget"+this.dynamicID,layout:"form",cls:"invalid-target-field-panel",style:"padding-top:5px;",border:false,bodyBorder:false,hideBorders:true}]},e]});Ext.apply(this,{layout:"form",bodyBorder:false,border:false,hideBorders:true,ctCls:"portal-plain-panel",items:[this.interiorFieldButtonPanel]});Ext.apply(this.initialConfig,{layout:this.layout,style:this.style,ctCls:this.ctCls,bodyBorder:this.bodyBorder,border:this.border,width:this.width,items:this.items});idxm.selfprofile.ux.panel.contacts.FaxRowContactPanel.superclass.initComponent.call(this)}});Ext.reg("idxm.selfprofile.ux.panel.contacts.FaxRowContactPanel",idxm.selfprofile.ux.panel.contacts.FaxRowContactPanel);Ext.namespace("idxm.selfprofile.ux.panel.contacts.PhoneMultipleRowContactPanel");idxm.selfprofile.ux.panel.contacts.PhoneMultipleRowContactPanel=Ext.extend(Ext.Panel,{initComponent:function(){var b=this.id;var a=(this.isPhoneRequired!=undefined)?this.isPhoneRequired:true;var d=[{xtype:"label",text:(a)?"* Phone(s):":"Phone(s):",cls:(a)?"supportPortalFormLabelBold":"supportPortalFormLabel"},{xtype:"panel",border:false,bodyBorder:false,hideBorders:true,height:5}];if(this.fieldArray.length){var e=0;for(var c=0;c<this.fieldArray.length;c++){e+=1;if(c){this.fieldArray[c]=new idxm.selfprofile.ux.panel.contacts.PhoneRowContactPanel({id:b+"dynamicID"+c,dynamicID:c,phoneContact:this.fieldArray[c],phoneTypes:this.phoneTypes,isPhoneRequired:a})}else{this.fieldArray[c]=new idxm.selfprofile.ux.panel.contacts.PhoneRowContactPanel({id:b+"dynamicID"+c,dynamicID:c,allowDelete:false,phoneContact:this.fieldArray[c],phoneTypes:this.phoneTypes,isPhoneRequired:a})}d[d.length]=this.fieldArray[c]}if(e<this.maxTypeRows){this.fieldArray[this.fieldArray.length]=new idxm.selfprofile.ux.panel.contacts.PhoneRowContactPanel({id:b+"dynamicID"+this.fieldArray.length,dynamicID:this.fieldArray.length,phoneTypes:this.phoneTypes,isPhoneRequired:a});d[d.length]=this.fieldArray[this.fieldArray.length-1]}}else{this.fieldArray[0]=new idxm.selfprofile.ux.panel.contacts.PhoneRowContactPanel({id:b+"dynamicID0",dynamicID:0,allowDelete:false,phoneTypes:this.phoneTypes,isPhoneRequired:a});this.fieldArray[1]=new idxm.selfprofile.ux.panel.contacts.PhoneRowContactPanel({id:b+"dynamicID1",dynamicID:1,phoneTypes:this.phoneTypes,isPhoneRequired:a});d[d.length]=this.fieldArray[0];d[d.length]=this.fieldArray[1]}Ext.apply(this,{layout:"form",style:"padding-left:25px;",items:d});Ext.apply(this.initialConfig,{id:this.id,items:this.items});idxm.selfprofile.ux.panel.contacts.PhoneMultipleRowContactPanel.superclass.initComponent.call(this)}});Ext.reg("idxm.selfprofile.ux.panel.contacts.PhoneMultipleRowContactPanel",idxm.selfprofile.ux.panel.contacts.PhoneMultipleRowContactPanel);Ext.namespace("idxm.selfprofile.ux.panel.contacts.PhonePanel");idxm.selfprofile.ux.panel.contacts.PhonePanel=Ext.extend(Ext.Panel,{initComponent:function(d){if(!this.maxTypeRows){this.maxTypeRows=5}var k=this.id;var c=this.phoneTypes;var b=(this.isPhoneRequired!=undefined)?this.isPhoneRequired:true;var h=this.maxTypeRows;var a=new Ext.form.Hidden({name:"phoneContactCounter"});var g;var m;function l(p){var s=true;var q=0;for(i=0;i<g.length;i++){if(g[i]!=null){q+=1;var o=g[i].phoneAddressObject.getRawValue();if(o.length<=0){s=false;break}var o=g[i].phoneTypeObject.getRawValue();if(o.length<=0){s=false;break}var o=g[i].phoneTypeOther;if(o&&!o.disabled){o=o.getRawValue();if(o.length<=0){s=false;break}}}}if(s&&q<h){var n=p;var r=new idxm.selfprofile.ux.panel.contacts.PhoneRowContactPanel({id:"phoneMultiplePanel"+k+"dynamicID"+g.length,dynamicID:g.length,phoneTypes:c,isPhoneRequired:b});g[g.length]=r;n.add(r);f(n);n.doLayout()}return s}function e(){var n=true;for(i=1;i<g.length;i++){if(g[i]!=null){if(g[i].phoneDeletedObject.getValue()!=undefined&&g[i].phoneDeletedObject.getValue()!="true"){if((g[i].phoneAddressObject.getValue()!=undefined&&g[i].phoneAddressObject.getValue().trim()!="")||(g[i].phoneTypeObject.getValue()!=undefined&&g[i].phoneTypeObject.getValue().trim()!="")){n=false}}}}g[0].EraseButtonPanel.setVisible(n)}function f(p){var n=p;for(i=0;i<g.length;i++){if(g[i]!=null){g[i].phoneAddressObject.on("blur",function(){l(n);if(!b){e()}});g[i].phoneTypeObject.on("blur",function(){l(n);if(!b){e()}});g[i].phoneTypeOther.on("blur",function(){l(n);if(!b){e()}});var o=g[i].interiorFieldButtonPanel;try{if(i){g[i].interiorEraseButton.on("click",function(s,r,t){var u=this.arrayID;Ext.getCmp("phoneMultiplePanel"+k+"dynamicID"+this.arrayID).cascade(function(v){if(v.isFormField){if(v.name=="phoneDeleted"+u){v.setValue("true")}}});if(!b){e()}Ext.getCmp("phoneMultiplePanel"+k+"dynamicID"+this.arrayID).setVisible(false);g[this.arrayID]=null})}else{g[i].interiorEraseButton.on("click",function(s,r,t){var u=this.arrayID;g[this.arrayID].phoneAddressObject.setValue("");g[this.arrayID].phoneTypeObject.setValue("");g[this.arrayID].phoneTypeOther.setValue("")})}}catch(q){}}}a.setValue(g.length-1)}if(this.loadArray&&this.loadArray.length){g=this.loadArray;m=new idxm.selfprofile.ux.panel.contacts.PhoneMultipleRowContactPanel({id:"phoneMultiplePanel"+k,fieldArray:this.loadArray,phoneTypes:this.phoneTypes,maxTypeRows:h,isPhoneRequired:(this.isPhoneRequired!=undefined)?this.isPhoneRequired:true})}else{g=new Array();m=new idxm.selfprofile.ux.panel.contacts.PhoneMultipleRowContactPanel({id:"phoneMultiplePanel"+k,fieldArray:g,phoneTypes:this.phoneTypes,isPhoneRequired:(this.isPhoneRequired!=undefined)?this.isPhoneRequired:true})}f(m);if(!b){e()}Ext.apply(this,{layout:"form",bodyBorder:false,border:false,ctCls:"portal-plain-panel",hideBorders:true,items:[m,a]});Ext.apply(this.initialConfig,{layout:this.layout,style:this.style,bodyBorder:this.bodyBorder,border:this.border,ctCls:"portal-plain-panel",width:this.width,items:this.items});idxm.selfprofile.ux.panel.contacts.PhonePanel.superclass.initComponent.call(this)}});Ext.reg("idxm.selfprofile.ux.panel.contacts.PhonePanel",idxm.selfprofile.ux.panel.contacts.PhonePanel);Ext.namespace("idxm.selfprofile.ux.panel.contacts.PhoneRowContactPanel");idxm.selfprofile.ux.panel.contacts.PhoneRowContactPanel=Ext.extend(Ext.Panel,{initComponent:function(){var b=(this.isPhoneRequired!=undefined)?this.isPhoneRequired:true;this.phoneTypes=[{id:"",name:"- Select One -"}].concat(this.phoneTypes);this.phoneDeletedJson={id:"phoneDeleted"+this.dynamicID,name:"phoneDeleted"+this.dynamicID,value:false};this.phoneIdJson={id:"phoneId"+this.dynamicID,name:"phoneId"+this.dynamicID};this.phoneAddressJson={hideLabel:true,labelSeparator:"",id:"phoneAddress"+this.dynamicID,name:"phoneAddress"+this.dynamicID,maxLength:256,width:200,msgTarget:"phoneAddressTarget"+this.dynamicID,msgDisplay:"",vtype:"phone",validationEvent:"blur",allowBlank:true};this.phoneExtensionJson={hideLabel:true,labelSeparator:"",id:"phoneExtension"+this.dynamicID,name:"phoneExtension"+this.dynamicID,maxLength:10,maxLengthText:"The maximum length for phone extension is 10",width:50,msgTarget:"phoneAddressTarget"+this.dynamicID,msgDisplay:"",vtype:"phoneExt",validationEvent:"blur",allowBlank:true};this.phoneTypeJson={hideLabel:true,width:225,labelSeparator:"",hiddenId:"phoneTypeCode"+this.dynamicID,hiddenName:"phoneTypeCode"+this.dynamicID,id:"phoneTypeText"+this.dynamicID,name:"phoneTypeText"+this.dynamicID,msgTarget:"phoneAddressTarget"+this.dynamicID,msgDisplay:"",mode:"local",store:new Ext.data.JsonStore({fields:["id","name"],root:"rows",idProperty:"id",data:{rows:this.phoneTypes}}),valueField:"id",emptyText:"- Select One -",displayField:"name",triggerAction:"all",editable:false,allowBlank:true,forceSelection:false,selectOnFocus:true,listeners:{render:function(){this.el.dom.name=this.name},select:function(){if(this.getValue()=="Other"){c.enable();c.show();c.cascade(function(d){if(d.isFormField){d.enable();d.show()}})}else{c.enable();c.disable();c.hide();c.cascade(function(d){if(d.isFormField){d.disable();d.hide()}})}}}};if(this.phoneContact!=undefined&&this.phoneContact.value!=undefined){this.phoneIdJson.value=this.phoneContact.id;this.phoneAddressJson.value=this.phoneContact.value;this.phoneExtensionJson.value=this.phoneContact.extention;this.phoneTypeJson.value=this.phoneContact.type;this.phoneTypeJson.hiddenValue=this.phoneContact.type}this.phoneDeletedObject=new Ext.form.Hidden(this.phoneDeletedJson);this.phoneIdObject=new Ext.form.Hidden(this.phoneIdJson);this.phoneAddressObject=new Ext.form.TextField(this.phoneAddressJson);this.phoneExtensionObject=new Ext.form.TextField(this.phoneExtensionJson);this.phoneTypeObject=new Ext.form.ComboBox(this.phoneTypeJson);this.phoneTypeOther=new Ext.form.TextField({hideLabel:true,width:120,labelSeparator:"",disabled:true,hidden:true,id:"phoneOther"+this.dynamicID,name:"phoneOther"+this.dynamicID,maxLength:20,msgTarget:"phoneAddressTarget"+this.dynamicID,msgDisplay:"",allowBlank:true});this.phoneTypeOtherPanel=new Ext.Panel({layout:"form",width:133,style:"padding-right:5px;",hidden:true,disabled:true,border:false,bodyBorder:false,hideBorders:true,items:[this.phoneTypeOther]});var a=this.phoneTypeOther;var c=this.phoneTypeOtherPanel;if(typeof(this.allowDelete)=="undefined"){this.allowDelete=true}if(this.allowDelete){this.interiorEraseButton=new Ext.Button({arrayID:this.dynamicID,text:"X",ctCls:"support-portal-btn"});this.EraseButtonPanel=new Ext.Panel({layout:"form",width:30,cls:"portal-plain-panel",border:false,bodyBorder:false,hideBorders:true,items:[this.interiorEraseButton]})}else{this.interiorEraseButton=new Ext.Button({arrayID:this.dynamicID,text:"X",ctCls:"support-portal-btn"});this.EraseButtonPanel=new Ext.Panel({layout:"form",width:30,cls:"portal-plain-panel",border:false,bodyBorder:false,hideBorders:true,hidden:true,items:[this.interiorEraseButton]})}this.interiorFieldButtonPanel=new Ext.Panel({layout:"column",cls:"portal-plain-panel",border:false,bodyBorder:false,hideBorders:true,items:[{layout:"form",width:205,cls:"portal-plain-panel",border:false,bodyBorder:false,hideBorders:true,items:[this.phoneDeletedObject,this.phoneIdObject,this.phoneAddressObject]},{layout:"form",width:10,style:"padding-top:5px;",cls:"portal-plain-panel",border:false,bodyBorder:false,hideBorders:true,html:"X"},{layout:"form",width:55,style:"padding-right:5px;",cls:"portal-plain-panel",border:false,bodyBorder:false,hideBorders:true,items:[this.phoneExtensionObject]},{layout:"form",width:230,style:"padding-right:5px;",cls:"portal-plain-panel",border:false,bodyBorder:false,hideBorders:true,items:[this.phoneTypeObject]},this.phoneTypeOtherPanel,this.EraseButtonPanel,{id:"phoneAddressTarget"+this.dynamicID,layout:"form",cls:"invalid-target-field-panel",style:"padding-top:5px;",border:false,bodyBorder:false,hideBorders:true}]});Ext.apply(this,{layout:"form",bodyBorder:false,border:false,hideBorders:true,ctCls:"portal-plain-panel",items:[this.interiorFieldButtonPanel]});Ext.apply(this.initialConfig,{layout:this.layout,style:this.style,ctCls:this.ctCls,bodyBorder:this.bodyBorder,border:this.border,width:this.width,items:this.items});idxm.selfprofile.ux.panel.contacts.PhoneRowContactPanel.superclass.initComponent.call(this)}});Ext.reg("idxm.selfprofile.ux.panel.contacts.PhoneRowContactPanel",idxm.selfprofile.ux.panel.contacts.PhoneRowContactPanel);Ext.namespace("idxm.selfprofile.validation.EmailContacts");idxm.selfprofile.validation.EmailContacts=function(config){var emailArray=new Array();var hasPrimary=false;var validEmails=true;var blnOneEmailEntered=false;for(var i=0;i<=config.contactCounter;i++){var emailDeleted=Ext.getCmp(config.formId).find("name","emailDeleted"+i);var emailAddress=Ext.getCmp(config.formId).find("name","emailAddress"+i);var emailTypeCode=Ext.getCmp(config.formId).find("hiddenName","emailTypeCode"+i);var emailOther=Ext.getCmp(config.formId).find("name","emailOther"+i);if(emailTypeCode[0].getValue()=="Primary"){hasPrimary=true}if(emailDeleted[0].getValue()!="true"){if(emailAddress[0].getValue()||emailTypeCode[0].getValue()){blnOneEmailEntered=true;if((!emailAddress[0].validate())||(!emailTypeCode[0].validate())){validEmails=false}else{if(emailTypeCode[0].getValue()=="Other"){if(!emailOther[0].validate()){validEmails=false}}}}if(validEmails){if((!emailAddress[0].getValue().trim())&&(emailTypeCode[0].getValue().trim())){validEmails=false;emailAddress[0].markInvalid("Email Number is Required.")}else{if((emailAddress[0].getValue().trim())&&(!emailTypeCode[0].getValue().trim())){validEmails=false;emailTypeCode[0].markInvalid("Email Type is Required.")}else{if(emailTypeCode[0].getValue()=="Other"){if(!emailOther[0].getValue().trim()){validEmails=false;emailOther[0].markInvalid("Email Other Type is Required.")}else{if(emailOther[0].getValue().trim().toLowerCase()=="account notification"){validEmails=false;emailOther[0].markInvalid("Email Other Type value cannot be Account Notification.")}}}}}}emailArray[emailArray.length]={emailDeleted:emailDeleted,emailAddress:emailAddress,emailTypeCode:emailTypeCode,emailOther:emailOther}}}if(validEmails){if(blnOneEmailEntered){if(hasPrimary){eval(config.booleanVariableTobeSet+"= true");idxm.selfprofile.validation.RowContacts(emailArray[0],0,emailArray,"email",config.formId,config.booleanVariableTobeSet);return eval(config.booleanVariableTobeSet)}else{emailArray[0].emailTypeCode[0].markInvalid("Please enter Primary Email Address");return false}}else{emailArray[0].emailAddress[0].markInvalid("Please enter an Email Address");return false}}else{return validEmails}};Ext.namespace("idxm.selfprofile.validation.FaxContacts");idxm.selfprofile.validation.FaxContacts=function(config){var faxArray=new Array();var hasPrimary=false;var validFaxes=true;var blnOneFaxEnter=false;for(var i=0;i<=config.contactCounter;i++){var faxDeleted=Ext.getCmp(config.formId).find("name","faxDeleted"+i);var faxAddress=Ext.getCmp(config.formId).find("name","faxAddress"+i);var faxTypeCode=Ext.getCmp(config.formId).find("hiddenName","faxTypeCode"+i);var faxOther=Ext.getCmp(config.formId).find("name","faxOther"+i);if(faxTypeCode[0].getValue()=="Primary"){hasPrimary=true}if(faxDeleted[0].getValue()!="true"){if(faxAddress[0].getValue()||faxTypeCode[0].getValue()){blnOneFaxEnter=true;if((!faxAddress[0].validate())||(!faxTypeCode[0].validate())){validFaxes=false}else{if(faxTypeCode[0].getValue()=="Other"){if(!faxOther[0].validate()){validFaxes=false}}}if(validFaxes){if((!faxAddress[0].getValue().trim())&&(faxTypeCode[0].getValue().trim())){validFaxes=false;faxAddress[0].markInvalid("Fax Number is Required.")}else{if((faxAddress[0].getValue().trim())&&(!faxTypeCode[0].getValue().trim())){validFaxes=false;faxTypeCode[0].markInvalid("Fax Type is Required.")}else{if(faxTypeCode[0].getValue()=="Other"){if(!faxOther[0].getValue().trim()){validFaxes=false;faxOther[0].markInvalid("Fax Other Type is Required.")}else{if(faxOther[0].getValue().trim().toLowerCase()=="account notification"){validFaxes=false;faxOther[0].markInvalid("Fax Other Type value cannot be Account Notification.")}}}}}}}faxArray[faxArray.length]={faxDeleted:faxDeleted,faxAddress:faxAddress,faxTypeCode:faxTypeCode,faxOther:faxOther}}}if(validFaxes){if(blnOneFaxEnter){if(hasPrimary){eval(config.booleanVariableTobeSet+"= true");idxm.selfprofile.validation.RowContacts(faxArray[0],0,faxArray,"fax",config.formId,config.booleanVariableTobeSet);return eval(config.booleanVariableTobeSet)}else{faxArray[0].faxTypeCode[0].markInvalid("Please enter Primary Fax Number");return false}}else{return true}}else{return validFaxes}};Ext.namespace("idxm.selfprofile.validation.PhoneContacts");idxm.selfprofile.validation.PhoneContacts=function(config){var phoneArray=new Array();var hasPrimary=false;var validPhones=true;var blnOnePhoneEntered=false;var isPhoneRequired=(config.isPhoneRequired)?true:false;for(var i=0;i<=config.contactCounter;i++){var phoneDeleted=Ext.getCmp(config.formId).find("name","phoneDeleted"+i);var phoneAddress=Ext.getCmp(config.formId).find("name","phoneAddress"+i);var phoneExtension=Ext.getCmp(config.formId).find("name","phoneExtension"+i);var phoneTypeCode=Ext.getCmp(config.formId).find("hiddenName","phoneTypeCode"+i);var phoneOther=Ext.getCmp(config.formId).find("name","phoneOther"+i);if(phoneTypeCode[0].getValue()=="Primary"){hasPrimary=true}if(phoneDeleted[0].getValue()!="true"){if(phoneAddress[0].getValue()||phoneTypeCode[0].getValue()||phoneExtension[0].getValue()){blnOnePhoneEntered=true;if((!phoneAddress[0].validate())||(!phoneTypeCode[0].validate())||(!phoneExtension[0].validate())){validPhones=false}else{if(phoneTypeCode[0].getValue()=="Other"){if(!phoneOther[0].validate()){validPhones=false}}}}if(validPhones){if((!phoneAddress[0].getValue().trim())&&(phoneTypeCode[0].getValue().trim())){validPhones=false;phoneAddress[0].markInvalid("Phone Number is Required.")}else{if((phoneAddress[0].getValue().trim())&&(!phoneTypeCode[0].getValue().trim())){validPhones=false;phoneTypeCode[0].markInvalid("Phone Type is Required.")}else{if((!phoneAddress[0].getValue().trim())&&(!phoneTypeCode[0].getValue().trim())&&phoneExtension[0].getValue().trim()){validPhones=false;phoneAddress[0].markInvalid("Phone Number is Required.")}else{if(phoneTypeCode[0].getValue()=="Other"){if(!phoneOther[0].getValue().trim()){validPhones=false;phoneOther[0].markInvalid("Phone Other Type is Required.")}else{if(phoneOther[0].getValue().trim().toLowerCase()=="account notification"){validFaxes=false;phoneOther[0].markInvalid("Fax Other Type value cannot be Account Notification.")}}}}}}}phoneArray[phoneArray.length]={phoneDeleted:phoneDeleted,phoneAddress:phoneAddress,phoneTypeCode:phoneTypeCode,phoneOther:phoneOther}}}if(validPhones){if(blnOnePhoneEntered){if(hasPrimary){eval(config.booleanVariableTobeSet+"= true");idxm.selfprofile.validation.RowContacts(phoneArray[0],0,phoneArray,"phone",config.formId,config.booleanVariableTobeSet);return eval(config.booleanVariableTobeSet)}else{phoneArray[0].phoneTypeCode[0].markInvalid("Please enter Primary Phone Number");return false}}else{if(isPhoneRequired){phoneArray[0].phoneAddress[0].markInvalid("Please enter a Phone Number");return false}else{return true}}}else{return validPhones}};Ext.namespace("idxm.selfprofile.validation.RowContacts");idxm.selfprofile.validation.RowContacts=function(row,startIndex,arrayOfRows,contactType,formPanelID,booleanVariableTobeSet){var startIndex=startIndex;var arrayOfRows=arrayOfRows;var endIndex=arrayOfRows.length;var rowTypeCode;var isRowValid=true;if(eval("row."+contactType+"TypeCode[0].getValue()")=="Other"){rowTypeCode=eval("row."+contactType+"Other[0].getValue()")}else{rowTypeCode=eval("row."+contactType+"TypeCode[0].getValue()")}if(arrayOfRows[startIndex+1]){var i;var field1;var field2;var currentTypeCode;for(i=startIndex+1;i<endIndex;i++){if(eval("arrayOfRows[i]."+contactType+"TypeCode[0].getValue()")=="Other"){currentTypeCode=eval("arrayOfRows[i]."+contactType+"Other[0].getValue()")}else{currentTypeCode=eval("arrayOfRows[i]."+contactType+"TypeCode[0].getValue()")}var formObj=Ext.getCmp(formPanelID).getForm();var formPanel=Ext.getCmp(formPanelID);if(rowTypeCode.toLowerCase().replace(/[^a-zA-Z 0-9]+/g,"").trim()==currentTypeCode.toLowerCase().replace(/[^a-zA-Z 0-9]+/g,"").trim()){if((rowTypeCode.trim()!="")&&(currentTypeCode.trim()!="")){isRowValid=false;var field1Array=formPanel.find("name",eval("row."+contactType+"TypeCode[0].name"));field1=field1Array[0];var field2Array=formPanel.find("name",eval("arrayOfRows[i]."+contactType+"TypeCode[0].name"));field2=field2Array[0]}}}if(field1){eval(booleanVariableTobeSet+"=false;");field1.markInvalid("Duplicate Contact Type")}if(field2){eval(booleanVariableTobeSet+"=false;");field2.markInvalid("Duplicate Contact Type")}}if(startIndex<=endIndex){if(arrayOfRows[startIndex+1]){idxm.selfprofile.validation.RowContacts(arrayOfRows[startIndex+1],startIndex+1,arrayOfRows,contactType,formPanelID,booleanVariableTobeSet)}}return isRowValid};Ext.namespace("idxm.selfprofile.view.profile.ExternalPerson");idxm.selfprofile.view.profile.ExternalPerson=function(c){function d(k){var y=new Ext.XTemplate('<table width="100%">',"<tr>","<td>",'<div class="enduser-internalperson-name">{name}</div>','<div class="enduser-internalperson-userid">{username}</div>','<tpl if="this.isClient(userClassCode)">','<tpl if="doDisplayResetNetworXPassword && isRepricer">','<div class="enduser-internalperson-department">Enterprice submitter ID: {enterPriceSubmitterID}</div>',"</tpl>","</tpl>",'<tpl if="this.isVendor(userClassCode)">','<tpl if="doDisplayResetNetworXPassword">','<div class="enduser-internalperson-department">NetworX User ID: {enterPriceSubmitterID}</div>',"</tpl>","</tpl>",'<div class="enduser-dotted-line">&nbsp;</div>',"</td>","</tr>","<tr>",'<td align="right">',"<table>",'<tr">',"<td>",'<a class="enduser-application-link" href="{userDemographicsURL}" onclick="Ext.get(document.body.id).mask(\'<b> Loading...</b> \', \'x-mask-loading\');">Update Profile</a>',"</td>","<td>&nbsp;|&nbsp;</td>","<td>",'<a class="enduser-application-link" href="{userChangePasswordURL}" onclick="Ext.get(document.body.id).mask(\'<b> Loading...</b> \', \'x-mask-loading\');">Update Password</a>',"</td>","</tr>","</table>","</td>","</tr>","<tr>","<td>",'<span class="enduser-fieldlabel">Phone(s):<br></span><span class="enduser-fieldvalue">{phone}</span><br>','<span class="enduser-fieldlabel">Fax(s):<br></span><span class="enduser-fieldvalue">{fax}</span><br>','<tpl if="isExceptionClient==false">','<span class="enduser-fieldlabel">Other Email(s):<br></span><span class="enduser-fieldvalue">{email}</span><br>',"</tpl>",'<tpl if="isExceptionClient==true">','<span class="enduser-fieldlabel">Email(s):<br></span><span class="enduser-fieldvalue">{email}</span><br>',"</tpl>",'<tpl if="this.isClient(userClassCode)">',"{notification}","</tpl>","</td>","</tr>","</table>",{isClient:function(e){return e==IDXM_USER_CLASS_CLIENT},isVendor:function(e){return e==IDXM_USER_CLASS_VENDOR}});var l=new Ext.XTemplate("<table>",'<tpl for="list">','<tr><td><span class="enduser-fieldvalue">{value}</font></td><td width="15"></td><td><span class="enduser-fieldvalue-small" style="font-weight:normal;">({type})</span></font></td></tr>',"</tpl>","</table>");function n(z){if((z!=undefined)&&(z!=null)&&(z.length>0)){for(var t=0;t<z.length;t++){var e=z[t];if(e.primary){return e}}}return null}function v(A){var t=new Array();if((A!=undefined)&&(A!=null)&&(A.length>0)){for(var z=0;z<A.length;z++){var e=A[z];if(!e.primary){t.push(A[z])}}}return t}var s;var u=v(k.email);if((u!=undefined)&&(u!=null)&&(u.length>0)){s=l.applyTemplate({list:u})}else{s="N/A<br>"}var w;if((k.fax!=undefined)&&(k.fax!=null)&&(k.fax.length>0)){w=l.applyTemplate({list:k.fax})}else{w="N/A<br>"}var g;if((k.phone!=undefined)&&(k.phone!=null)&&(k.phone.length>0)){g=l.applyTemplate({list:k.phone})}else{g="N/A<br>"}var f;var r=n(k.email);try{if(r){f=r.value;f=f.toLowerCase()}else{if(k.accountNotificationEmailIndicator=="on"){f="User ID: "+k.userID}else{f=k.userID+"@multiplan.com";f=f.toLowerCase()}}}catch(q){}var h;if(!k.validReportsToIndicator){h=k.reportsToText+"&nbsp;<span class='templateTextNormal'> (Needs New Manager)</span>"}else{h=k.reportsToText}if(k.repricer){var m;if(k.returnAddress){m='<span class="enduser-fieldlabel">Advice Notification:<br></span><table><tr><td><span class="enduser-fieldvalue">'+k.returnAddress+"<br></span></td></tr></table><br>"}else{m='<span class="enduser-fieldlabel">Advice Notification:<br></span><table><tr><td><span class="enduser-fieldvalue">N/A<br></span></td></tr></table><br>'}}var p=false;var x;if(k.userSecondaryIdentity&&k.userSecondaryIdentity.userNetworxIdentity){if(k.userSecondaryIdentity.userNetworxIdentity.userStatus.statusCode==IDXM_USER_STATUS_CODE_MAP.ACTIVE){p=true;x=k.userSecondaryIdentity.userNetworxIdentity.identityIdentifier.userID}}var o=y.apply({name:IDXM.internalPersonFullName(k),email:s,phone:g,fax:w,username:f,notification:m,userDemographicsURL:c.userDemographicsURL,userChangePasswordURL:c.userChangePasswordURL,thisObjectName:c.thisObjectName,userClassCode:k.userClassCode,enterPriceSubmitterID:x,doDisplayResetNetworXPassword:p,isExceptionClient:(k.accountNotificationEmailIndicator=="on")?true:false,isRepricer:k.repricer});return o}var b=new Ext.XTemplate("<table>",'<tpl for="list">','<tr><td><div class="enduser-application-link">> <a class="enduser-application-link" href="{link}" target="_blank">{name}</a></div></td></tr>',"</tpl>","</table>");var a=new Ext.Panel({renderTo:c.formPanelDivID,layout:"fit",bodyBorder:false,border:false,hideBorders:true,html:d(c.userData)});return jsonFunctionObject={resetPassword:function(){uRadixWindowManager.registerWindowPopup({key:"resetPassword"+c.nameSpace,windowConfig:{width:600,height:475,modal:true,autoScroll:true,closable:false,resizable:false,autoLoad:{url:c.renderUrl+"?action="+c.resetPasswordAction,scripts:true,params:{"$$mpicallback$$":"resetPasswordCallBack"+c.nameSpace,"$$windowKey$$":"resetPassword"+c.nameSpace,systemUserId:c.userData.sysKey,isNetworX:false},method:"POST",text:"Loading Reset Password Popup..."}}});uRadixWindowManager.launch({id:"resetPassword"+c.nameSpace,key:"resetPassword"+c.nameSpace})}}};Ext.namespace("idxm.selfprofile.view.profile.ExternalPersonSummary");idxm.selfprofile.view.profile.ExternalPersonSummary=function(b){function d(k){var r=new Ext.XTemplate('<table width="100%">',"<tr>","<td>",'<div class="enduser-internalperson-name">My Profile</div>','<div class="enduser-dotted-line">&nbsp;</div>',"</td>","</tr>","<tr>","<td>",'<div class="enduser-internalperson-name">{name}</div>','<div class="enduser-internalperson-userid">{username}</div>','<div class="enduser-dotted-line">&nbsp;</div>',"</td>","</tr>","<tr>","<td>",'<span class="enduser-fieldlabel">Email(s):<br></span><span class="enduser-fieldvalue">{email}</span><br>','<span class="enduser-fieldlabel">Phone(s):<br></span><span class="enduser-fieldvalue">{phone}</span><br>','<div class="enduser-dotted-line">&nbsp;</div>',"</td>","</tr>","<tr>",'<td align="right" style="padding-left:370px;">',"<table>",'<tr">',"<td>",'<a class="enduser-application-link" href="{viewProfileURL}" onclick="Ext.get(document.body.id).mask(\'<b> Loading...</b> \', \'x-mask-loading\');">View Full</a>&nbsp;>',"</td>","</tr>","</table>","</td>","</tr>","</table>");var l=new Ext.XTemplate("<table>",'<tpl for="list">','<tr><td><span class="enduser-fieldvalue">{value}</font></td><td width="15"></td><td><span class="enduser-fieldvalue-small" style="font-weight:normal;">({type})</span></font></td></tr>',"</tpl>","</table>");var q;var h=k.email;if((h!=undefined)&&(h!=null)&&(h.length>0)){if(b.userData.accountNotificationEmailIndicator=="on"){h=getExceptionalClientEmailList(k.email)}else{h=getClientEmailList(k.email)}q=l.applyTemplate({list:h})}else{q="N/A<br>"}var g;if((k.phone!=undefined)&&(k.phone!=null)&&(k.phone.length>0)){g=l.applyTemplate({list:k.phone})}else{g="N/A<br>"}function m(t){if((t!=undefined)&&(t!=null)&&(t.length>0)){for(var s=0;s<t.length;s++){var e=t[s];if(e.primary){return e}}}return null}var f;var p=m(k.email);try{if(p){f=p.value;f=f.toLowerCase()}else{if(k.accountNotificationEmailIndicator=="on"){f="User ID: "+k.userID}else{f=k.userID+"@multiplan.com";f=f.toLowerCase()}}}catch(o){}var n=r.apply({name:IDXM.internalPersonFullName(k),email:q,phone:g,username:f,thisObjectName:b.thisObjectName,userClassCode:k.userClassCode,viewProfileURL:b.viewProfileURL});return n}var a=new Ext.XTemplate("<table>",'<tpl for="list">','<tr><td><div class="enduser-application-link">> <a class="enduser-application-link" href="{link}" target="_blank">{name}</a></div></td></tr>',"</tpl>","</table>");var c=new Ext.Panel({renderTo:b.formPanelDivID,layout:"fit",bodyBorder:false,border:false,hideBorders:true,html:d(b.userData)})};Ext.namespace("idxm.selfprofile.view.profile.InternalPerson");idxm.selfprofile.view.profile.InternalPerson=function(c){function e(k){var x=new Ext.XTemplate('<table width="100%">',"<tr>","<td>",'<div class="enduser-internalperson-name">{name}</div>','<div class="enduser-internalperson-userid">{username}</div>','<div class="enduser-internalperson-department">{department}</div>','<div class="enduser-dotted-line">&nbsp;</div>',"</td>","</tr>","<tr>",'<td align="right">',"<table>","<tr>","<td>",'<a class="enduser-application-link" href="{userDemographicsURL}">Update Profile</a>',"</td>",'<tpl if="doDisplayResetNetworXPassword">',"<td>&nbsp;|&nbsp;</td>","<td>",'<a class="enduser-application-link" href="{userChangePasswordURL}">Update NetworX Password</a>',"</td>","</tpl>","</tr>","</table>","</td>","</tr>","<tr>","<td>",'<span class="enduser-fieldlabel">Phone(s):<br></span><span class="enduser-fieldvalue">{phone}</span><br>','<span class="enduser-fieldlabel">Fax(s):<br></span><span class="enduser-fieldvalue">{fax}</span><br>','<span class="enduser-fieldlabel">Other Email(s):<br></span><span class="enduser-fieldvalue">{email}</span><br>','<span class="enduser-fieldlabel">Location:<br></span><span class="enduser-fieldvalue">{location}</span> <span class="idxmTextSmall">{worksFromHome}</span><br><br>','<span class="enduser-fieldlabel">Reports To:<br></span><span class="enduser-fieldvalue">{reportsTo}</span><br><br>','<tpl if="doDisplayResetNetworXPassword">','<span class="enduser-fieldlabel">NetworX User ID:<br></span><span class="enduser-fieldvalue">{enterPriceSubmitterID}</span><br><br>',"</tpl>","</td>","</tr>","</table>");var l=new Ext.XTemplate("<table>",'<tpl for="list">','<tr><td><span class="enduser-fieldvalue">{value}</font></td><td width="15"></td><td><span class="enduser-fieldvalue-small" style="font-weight:normal;">({type})</span></font></td></tr>',"</tpl>","</table>");function m(z){if((z!=undefined)&&(z!=null)&&(z.length>0)){for(var y=0;y<z.length;y++){var t=z[y];if(t.primary){return t}}}return null}function u(A){var y=new Array();if((A!=undefined)&&(A!=null)&&(A.length>0)){for(var z=0;z<A.length;z++){var t=A[z];if(!t.primary){y.push(A[z])}}}return y}var r;var s=u(k.email);if((s!=undefined)&&(s!=null)&&(s.length>0)){r=l.applyTemplate({list:s})}else{r="N/A<br>"}var v;if((k.fax!=undefined)&&(k.fax!=null)&&(k.fax.length>0)){v=l.applyTemplate({list:k.fax})}else{v="N/A<br>"}var g;if((k.phone!=undefined)&&(k.phone!=null)&&(k.phone.length>0)){g=l.applyTemplate({list:k.phone})}else{g="N/A<br>"}var f;var q=m(k.email);if(q){f=q.value}else{f=k.userID+"@multiplan.com"}try{f=f.toLowerCase()}catch(p){}var h;if(!k.validReportsToIndicator){h=k.reportsToText+"&nbsp;<span class='templateTextNormal'> (Needs New Manager)</span>"}else{h=k.reportsToText}var o=false;var w="";if(k.userSecondaryIdentity&&k.userSecondaryIdentity.userNetworxIdentity){if(k.userSecondaryIdentity.userNetworxIdentity.userStatus.statusCode==IDXM_USER_STATUS_CODE_MAP.ACTIVE){o=true;w=k.userSecondaryIdentity.userNetworxIdentity.identityIdentifier.userID}}var n=x.apply({name:IDXM.internalPersonFullName(k),location:k.locationText,department:k.departmentText,reportsTo:h,email:r,phone:g,fax:v,username:f,userDemographicsURL:c.userDemographicsURL,userChangePasswordURL:c.userChangePasswordURL,thisObjectName:c.thisObjectName,doDisplayResetNetworXPassword:o,enterPriceSubmitterID:w});return n}var b=new Ext.XTemplate("<table>",'<tpl for="list">','<tr><td><div class="enduser-application-link">> <a class="enduser-application-link" href="{link}" target="_blank">{name}</a></div></td></tr>',"</tpl>","</table>");var d=[{name:"Enterprice",link:"http://enterprice.multiplan.com"}];var a=new Ext.Panel({renderTo:c.formPanelDivID,layout:"fit",bodyBorder:false,border:false,hideBorders:true,html:e(c.userData)});return jsonFunctionObject={resetNetworXPassword:function(){uRadixWindowManager.registerWindowPopup({key:"resetNetworXPassword"+c.nameSpace,windowConfig:{width:475,height:600,modal:true,autoScroll:true,closable:false,resizable:false,autoLoad:{url:c.renderUrl+"?action="+c.resetPasswordAction,scripts:true,params:{"$$mpicallback$$":"resetNetworXPasswordCallback"+c.nameSpace,"$$windowKey$$":"resetNetworXPassword"+c.nameSpace,systemUserId:c.userData.sysKey,isNetworX:true},method:"POST",text:"Loading Reset NetworX Password Popup..."}}});uRadixWindowManager.launch({id:"resetNetworXPassword"+c.nameSpace,key:"resetNetworXPassword"+c.nameSpace})}}};