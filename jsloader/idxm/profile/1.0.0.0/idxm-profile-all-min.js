Ext.namespace("IDXM.UserProfile.Read");IDXM.UserProfile.Read=function(D){uRadixClientMessageHandler.setMessage=function(F,G){return};var e;var h;var A;var t;var n=D.userData;n.isProfile=true;if(D.userData){if(D.userData.userTypeCode==IDXM_USER_TYPE_PERSON){if(D.userData.userClassCode==IDXM_USER_CLASS_INTERNAL){e=IDXM.internalPersonUserTemplate(n);h=404;t=300;A="ADD ANOTHER INTERNAL USER"}else{if(D.userData.userClassCode==IDXM_USER_CLASS_CLIENT){e=IDXM.clientSingleUserTemplate(n);h=404;t=300;A="ADD ANOTHER CLIENT USER"}else{if(D.userData.userClassCode==IDXM_USER_CLASS_VENDOR){e=IDXM.vendorSingleUserTemplate(n);h=404;t=300;A="ADD ANOTHER VENDOR USER"}else{if(D.userData.userClassCode==IDXM_USER_CLASS_PROVIDER){e=IDXM.providerSingleUserTemplate(n);h=404;t=300;A="ADD ANOTHER PROVIDER USER"}}}}}else{if(D.userData.userTypeCode==IDXM_USER_TYPE_SYSTEM){e=IDXM.internalSystemUserTemplate(n);h=404;t=300;A="ADD ANOTHER INTERNAL USER"}else{if(D.userData.userTypeCode==IDXM_USER_TYPE_DEVICE){e=IDXM.internalDeviceUserTemplate(n);h=404;t=300;A="ADD ANOTHER INTERNAL USER"}}}if(D.userData.sysKey!==undefined&&D.userData.sysKey!=""){uRadixWindowManager.uRadixWindowRegistry["updateUserId"+D.nameSpace].autoLoad.params.systemUserId=D.userData.sysKey;uRadixWindowManager.uRadixWindowRegistry["updateStatus"+D.nameSpace].autoLoad.params.systemUserId=D.userData.sysKey;uRadixWindowManager.uRadixWindowRegistry["updateSubClass"+D.nameSpace].autoLoad.params.systemUserId=D.userData.sysKey;uRadixWindowManager.uRadixWindowRegistry["resendAccountActivation"+D.nameSpace].autoLoad.params.systemUserId=D.userData.sysKey;uRadixWindowManager.uRadixWindowRegistry["accessHistory"+D.nameSpace].autoLoad.params.systemUserId=D.userData.sysKey;uRadixWindowManager.uRadixWindowRegistry["resetPassword"+D.nameSpace].autoLoad.params.systemUserId=D.userData.sysKey;uRadixWindowManager.uRadixWindowRegistry["groupPicker"+D.nameSpace].autoLoad.params.systemUserId=D.userData.sysKey;uRadixWindowManager.uRadixWindowRegistry["rolePicker"+D.nameSpace].autoLoad.params.systemUserId=D.userData.sysKey;uRadixWindowManager.uRadixWindowRegistry["ccodePicker"+D.nameSpace].autoLoad.params.systemUserId=D.userData.sysKey}}var l=new Ext.Panel({bodyBorder:false,border:false,style:"padding-left:10px;",frame:false,autoScroll:true,height:h,width:t,html:e});var q={};if(D.userDemographicsURL){q={xtype:"tbbutton",iconCls:"edit-icon",text:"",handler:function(){uRadixRedirectHandler.redirect(D.userDemographicsURL+"&systemUserId="+D.userData.sysKey)}}}var m;if(D.blnShowAddAnotherUserButton==true){m={xtype:"panel",border:false,bodyBorder:false,hideBorders:true,layout:"form",buttonAlign:"right",buttons:[{id:"addAnotherUserButton"+D.nameSpace,text:A,cls:"support-portal-btn-cancel",handler:function(){uRadixRedirectHandler.redirect(D.mirrorUserURL)}}]}}else{m={xtype:"panel",border:false,bodyBorder:false,hideBorders:true,html:"&nbsp"}}var g=new Ext.Toolbar({ctCls:"toolbar-portal-panel-head-frame",autoheight:true,items:[{xtype:"tbtext",text:"Name & Information"},{xtype:"tbfill"},q]});if(!(D.userData.userTypeCode==IDXM_USER_TYPE_PERSON&&D.userData.userClassCode==IDXM_USER_CLASS_PROVIDER)){var x=new Ext.Toolbar({ctCls:"toolbar-portal-panel-head-frame",autoheight:true,items:[{xtype:"tbtext",text:"Groups & Roles"},{xtype:"tbfill"}]});var y=new Ext.Toolbar({ctCls:"toolbar-portal-panel-head-frame",autoheight:true,items:[{xtype:"tbtext",text:"Groups"},{xtype:"tbfill"},{xtype:"tbbutton",iconCls:"edit-icon",text:"",handler:function(){uRadixWindowManager.uRadixWindowRegistry["groupPicker"+D.nameSpace].autoLoad.params[uRadixWindowManager.MPI_CALLBACK_NAME]=D.thisObjectName+".groupPickerCallBack";uRadixWindowManager.launch({id:"groupPicker"+D.nameSpace,key:"groupPicker"+D.nameSpace})}}]});var b=new Ext.Toolbar({ctCls:"toolbar-portal-panel-head-frame",autoheight:true,items:[{xtype:"tbtext",text:"Roles"},{xtype:"tbfill"},{xtype:"tbbutton",iconCls:"edit-icon",text:"",handler:function(){uRadixWindowManager.uRadixWindowRegistry["rolePicker"+D.nameSpace].autoLoad.params[uRadixWindowManager.MPI_CALLBACK_NAME]=D.thisObjectName+".rolePickerPickerCallBack";uRadixWindowManager.launch({id:"rolePicker"+D.nameSpace,key:"rolePicker"+D.nameSpace})}}]});var o=new Ext.tree.TreeNode({id:"groupsTreeRootID"+D.nameSpace,text:"Groups",draggable:false,leaf:false});if(D.defaultGroups){o.appendChild(D.defaultGroups)}var C=new Ext.tree.TreePanel({id:"ViewTtreePanelGroupID",frame:false,ctCls:"tree-portal-node-no-icon",height:(D.userData.userTypeCode==IDXM_USER_TYPE_PERSON&&D.userData.userClassCode==IDXM_USER_CLASS_INTERNAL)?400:400,width:(D.userData.userTypeCode==IDXM_USER_TYPE_PERSON&&D.userData.userClassCode==IDXM_USER_CLASS_CLIENT)?235:245,useArrows:true,autoScroll:true,autoShow:true,rootVisible:false,containerScroll:true,root:o});var E=new Ext.tree.TreeNode({id:"rolessTreeRootID"+D.nameSpace,text:"Roles",draggable:false,leaf:false});if(D.defaultRoles){E.appendChild(D.defaultRoles)}var c=new Ext.tree.TreePanel({id:"ViewTtreePanelRoleID",frame:false,ctCls:"tree-portal-node-no-icon",height:(D.userData.userTypeCode==IDXM_USER_TYPE_PERSON&&D.userData.userClassCode==IDXM_USER_CLASS_INTERNAL)?400:400,width:(D.userData.userTypeCode==IDXM_USER_TYPE_PERSON&&D.userData.userClassCode==IDXM_USER_CLASS_CLIENT)?235:245,useArrows:true,autoScroll:true,autoShow:true,rootVisible:false,containerScroll:true,root:E})}if(D.userData.userTypeCode==IDXM_USER_TYPE_PERSON&&D.userData.userClassCode==IDXM_USER_CLASS_CLIENT){var w=1100;var k=new Ext.tree.TreeNode({id:"ccodesTreeRootID"+D.nameSpace,text:"CCodes",draggable:false,leaf:false});var B=null;if(D.mpiCCodeList!=null&&D.mpiCCodeList&&D.mpiCCodeList.length>0){B=new Ext.tree.TreeNode({id:IDXM_CLIENT_SOURCE_MULTIPLAN+D.nameSpace,text:"MultiPlan CCodes",draggable:false,leaf:false,expanded:true,recursive:false});f(B,D.mpiCCodeList);k.appendChild(B)}var r=null;if(D.viantCCodeList!=null&&D.viantCCodeList&&D.viantCCodeList.length>0){r=new Ext.tree.TreeNode({id:IDXM_CLIENT_SOURCE_VIANT+D.nameSpace,text:"Viant CCodes",draggable:false,leaf:false,expanded:true,recursive:false});f(r,D.viantCCodeList);k.appendChild(r)}var d=new Ext.tree.TreePanel({id:"ViewTtreePanelRoleID",frame:false,ctCls:"tree-portal-node-no-icon",height:400,width:245,useArrows:true,autoScroll:true,autoShow:true,rootVisible:false,containerScroll:true,root:k});var a=new Ext.Toolbar({ctCls:"toolbar-portal-panel-head-frame",autoheight:true,items:[{xtype:"tbtext",text:"CCodes, Groups & Roles"},{xtype:"tbfill"}]});var z=new Ext.Toolbar({ctCls:"toolbar-portal-panel-head-frame",autoheight:true,items:[{xtype:"tbtext",text:"Access CCodes"},{xtype:"tbfill"},{xtype:"tbbutton",iconCls:"edit-icon",text:"",handler:function(){uRadixWindowManager.uRadixWindowRegistry["ccodePicker"+D.nameSpace].autoLoad.params[uRadixWindowManager.MPI_CALLBACK_NAME]=D.thisObjectName+".ccodePickerCallBack";uRadixWindowManager.launch({id:"ccodePicker"+D.nameSpace,key:"ccodePicker"+D.nameSpace})}}]});var v=new uRadix.form.FormPanel({layout:"column",id:"internalUserFormPanel"+D.nameSpace,bodyBorder:false,border:false,hideBorders:true,width:1100,cls:"user-profile-body",items:[{layout:"column",bodyBorder:false,border:false,hideBorders:true,ctCls:"user-profile-body-column",items:[{width:310,ctCls:"support-portal-panel-head-frame",items:[g,l]},{width:10,html:"&nbsp;"},{width:755,ctCls:"support-portal-panel-head-frame",items:[{xtype:"panel",layout:"column",autoScroll:true,items:[{width:240,items:[z,d]},{width:5,html:"&nbsp;"},{width:250,items:[y,C]},{width:5,html:"&nbsp;"},{width:250,items:[b,c]}]}]}]}]});var u=false;function j(G){if(!u){var F=D.renderUrl+"?action=readCCode&blnAllChildCCodes="+userData.blnAllChildCCodes+"&primaryParentCCode="+userData.ccodeParent;Ext.get(document.body.id).mask("<b> Refreshing CCodes...</b> ","x-mask-loading");Ext.Ajax.request({url:F,success:function(I,M){var K=uRadixUtilities.jsonDecode(I.responseText);var H=K.mpiMultiLevelCCodeList;if(B!=null&&H!=null&&H.length>0){while(B.firstChild){B.removeChild(B.firstChild)}var N=uRadixUtilities.jsonDecode(H);for(i=0;i<N.length;i++){var L=N[i];if(G.id==L.id){L.expanded=true}B.appendChild(L)}B.expand()}var J=K.viantMultiLevelCCodeList;if(r!=null&&J!=null&&J.length>0){while(r.firstChild){r.removeChild(r.firstChild)}r.appendChild(uRadixUtilities.jsonDecode(J));r.expand()}u=true;Ext.get(document.body.id).unmask()},failure:function(H,I){Ext.get(document.body.id).unmask()}})}}}else{var w=850;if(D.userData.userTypeCode==IDXM_USER_TYPE_PERSON&&D.userData.userClassCode==IDXM_USER_CLASS_INTERNAL){var s={width:310,ctCls:"support-portal-panel-head-frame",items:[g,l]}}else{var s={width:310,ctCls:"support-portal-panel-head-frame",items:[g,l]}}if(D.userData.userClassCode==IDXM_USER_CLASS_PROVIDER){var v=new uRadix.form.FormPanel({bodyBorder:false,border:false,autoScroll:true,cls:"user-profile-body",items:[{layout:"column",bodyBorder:false,border:false,hideBorders:true,ctCls:"user-profile-body-column",items:[s]}]})}else{var v=new uRadix.form.FormPanel({bodyBorder:false,border:false,autoScroll:true,cls:"user-profile-body",items:[{layout:"column",bodyBorder:false,border:false,hideBorders:true,ctCls:"user-profile-body-column",items:[s,{width:10,html:"&nbsp;"},{width:510,ctCls:"support-portal-panel-head-frame",items:[{xtype:"panel",layout:"column",autoScroll:true,items:[{width:250,items:[y,C]},{width:5,html:"&nbsp;"},{width:250,items:[b,c]}]}]}]}]})}}var p=new Ext.Panel({renderTo:D.formPanelDivID,bodyBorder:false,border:false,width:w,items:[{xtype:"panel",border:false,cls:"portal-title",html:"User Profile"},{xtype:"panel",height:8,border:0,style:"boder:none;",bodyBorder:0,bodyStyle:"border:none",hideBorders:true},{xtype:"idxm.profile.ux.ProfileBar",nameSpace:D.nameSpace,statusCode:D.userData.userStatus.statusCode,statusName:D.userData.userStatus.statusName,userSubClassCode:D.userData.userSubClassCode,userFirstName:D.userData.firstName,userLastName:D.userData.lastName,userReportsToIndicator:D.userData.validReportsToIndicator,mirrorUserURL:D.mirrorUserURL,sysKey:D.userData.sysKey,userTypeCode:D.userData.userTypeCode,userClassCode:D.userData.userClassCode,isLocked:D.userData.userStatus.locked,lastLoginDate:D.userData.lastLoginDate},v,m]});if(!(D.userData.userTypeCode==IDXM_USER_TYPE_PERSON&&D.userData.userClassCode==IDXM_USER_CLASS_PROVIDER)){if(D.defaultGroups.length){C.expandPath(C.getRootNode().getPath())}if(D.defaultRoles.length){c.expandPath(c.getRootNode().getPath())}}return jsonFunctionObject={cancelUser:function(G){if(G){Ext.getCmp("cancelUser"+D.nameSpace).close();var F=new Ext.data.Connection();F.request({url:Wizard.PortalContainer.getActionURL("removeSessionDataAjax"),method:"POST",success:function(H){Wizard.PortalContainer.navigate({url:Wizard.PortalContainer.getInitActionName()})},failure:function(){Ext.Msg.alert("Status","Unable to reset session data.")}})}else{Ext.getCmp("cancelUser"+D.nameSpace).close()}},generalErrorsCallBack:function(){Ext.getCmp("generalErrors"+D.nameSpace).close();Wizard.PortalContainer.navigate({url:Wizard.PortalContainer.getInitActionName()})},groupPickerCallBack:function(G){try{if(!Ext.isEmpty(G.arrayOfGroups)){IDXM.Utilities.TreeBuilder(G.arrayOfGroups,C,"Groups")}}catch(H){}Ext.getCmp("groupPicker"+D.nameSpace).close();if(Ext.isEmpty(G.noRedirect)){var F=window.location.protocol+"//"+window.location.host+window.location.pathname+"?systemUserId="+uRadixUtilities.getParameter(window.location.search,"systemUserId");uRadixRedirectHandler.redirect(F)}},rolePickerPickerCallBack:function(G){try{if(!Ext.isEmpty(G.arrayOfGroups)){IDXM.Utilities.TreeBuilder(G.arrayOfGroups,c,"Roles")}}catch(H){}Ext.getCmp("rolePicker"+D.nameSpace).close();if(Ext.isEmpty(G.noRedirect)){var F=window.location.protocol+"//"+window.location.host+window.location.pathname+"?systemUserId="+uRadixUtilities.getParameter(window.location.search,"systemUserId");uRadixRedirectHandler.redirect(F)}},ccodePickerCallBack:function(G){if(G.windowObject){G.windowObject.close()}var F=window.location.protocol+"//"+window.location.host+window.location.pathname+"?systemUserId="+uRadixUtilities.getParameter(window.location.search,"systemUserId");uRadixRedirectHandler.redirect(F)}};return jsonFunctionObject;function f(G,F){if(G!=null&&F!=null){for(i=0;i<F.length;i++){var I=F[i];var H=new Ext.tree.TreeNode({id:I.id,text:I.text,draggable:false,leaf:I.leaf,expanded:I.expanded,listeners:{click:function(K,J){j(K)}}});G.appendChild(H)}}}};Ext.namespace("IDXM.emailAddressFieldsPanelNoTitle");IDXM.emailAddressFieldsPanelNoTitle=Ext.extend(Ext.Panel,{initComponent:function(){this.emailTypes=[{id:"",name:"- Select One -"}].concat(this.emailTypes);if(!this.blnDisplayAdvicesheet){this.blnDisplayAdvicesheet=false}var b=this.blnDisplayAdvicesheet;this.emailDeletedJson={id:"emailDeleted"+this.dynamicID,name:"emailDeleted"+this.dynamicID};this.emailIdJson={id:"emailId"+this.dynamicID,name:"emailId"+this.dynamicID};this.emailAddressJson={hideLabel:true,labelSeparator:"",id:"emailAddress"+this.dynamicID,name:"emailAddress"+this.dynamicID,maxLength:256,width:200,msgTarget:"emailAddressTarget"+this.dynamicID,msgDisplay:"",vtype:"email",validationEvent:"blur",allowBlank:true};this.emailTypeJson={hideLabel:true,width:225,labelSeparator:"",hiddenId:"emailTypeCode"+this.dynamicID,hiddenName:"emailTypeCode"+this.dynamicID,id:"emailTypeText"+this.dynamicID,name:"emailTypeText"+this.dynamicID,msgTarget:"emailAddressTarget"+this.dynamicID,msgDisplay:"",mode:"local",store:new Ext.data.JsonStore({fields:["id","name"],root:"rows",idProperty:"id",data:{rows:this.emailTypes}}),valueField:"id",emptyText:"- Select One -",displayField:"name",triggerAction:"all",editable:false,allowBlank:true,forceSelection:false,selectOnFocus:true,listeners:{render:function(){this.el.dom.name=this.name},select:function(){if(this.getValue()=="Other"){c.enable();c.show();c.cascade(function(f){if(f.isFormField){f.enable();f.show()}})}else{c.enable();c.disable();c.hide();c.cascade(function(f){if(f.isFormField){f.disable();f.hide()}})}}}};this.emailAdviceSheetNotification=new Ext.form.Hidden({id:"emailAdviceSheetNotification"+this.dynamicID,name:"emailAdviceSheetNotification"+this.dynamicID,value:false});var a=this.dynamicID;this.AdviceSheetRadioButton=new Ext.form.Radio({hideLabel:true,labelSeparator:"",boxLabel:"Use For Advice Notification",name:"AdviceNotificationCheckBox",inputValue:Ext.encode({adviceType:"email",adviceIndex:a}),value:this.dynamicID,ctCls:"advice-box-label",cls:"advice-box-label",listeners:{check:function(){}}});if(this.emailContact!=undefined&&this.emailContact.value!=undefined){this.emailIdJson.value=this.emailContact.id;this.emailAddressJson.value=this.emailContact.value;this.emailTypeJson.value=this.emailContact.type;this.emailTypeJson.hiddenValue=this.emailContact.type;if(this.emailContact.adviceNotification!=undefined){this.emailAdviceSheetNotification.value=this.emailContact.adviceNotification;if(this.emailContact.adviceNotification){this.AdviceSheetRadioButton.checked=this.emailContact.adviceNotification}}}this.emailDeletedObject=new Ext.form.Hidden(this.emailDeletedJson);this.emailIdObject=new Ext.form.Hidden(this.emailIdJson);this.emailAddressObject=new Ext.form.TextField(this.emailAddressJson);this.emailTypeObject=new Ext.form.ComboBox(this.emailTypeJson);this.emailTypeOther=new Ext.form.TextField({hideLabel:true,width:120,labelSeparator:"",disabled:true,hidden:true,id:"emailOther"+this.dynamicID,name:"emailOther"+this.dynamicID,maxLength:20,msgTarget:"emailAddressTarget"+this.dynamicID,msgDisplay:"",allowBlank:true});this.emailTypeOtherPanel=new Ext.Panel({layout:"form",width:133,style:"padding-right:5px;",hidden:true,disabled:true,border:false,bodyBorder:false,hideBorders:true,items:[this.emailTypeOther]});var d=this.emailTypeOther;var c=this.emailTypeOtherPanel;if(typeof(this.allowDelete)=="undefined"){this.allowDelete=true}if(this.allowDelete){this.interiorEraseButton=new Ext.Button({arrayID:this.dynamicID,text:"X",cls:"support-portal-btn"});this.EraseButtonPanel=new Ext.Panel({layout:"form",width:30,cls:"portal-plain-panel",border:false,bodyBorder:false,hideBorders:true,items:[this.interiorEraseButton]})}else{this.EraseButtonPanel=new Ext.Panel({layout:"form",width:30,cls:"portal-plain-panel",border:false,bodyBorder:false,hideBorders:true,html:"&nbsp;"})}var e={border:false,bodyBorder:false,hideBorders:true};if(b){e={layout:"column",cls:"portal-plain-panel",border:false,bodyBorder:false,hideBorders:true,items:[{width:10,html:"&nbsp;"},this.AdviceSheetRadioButton,this.emailAdviceSheetNotification]}}this.interiorFieldButtonPanel=new Ext.Panel({layout:"form",bodyBorder:false,border:false,hideBorders:true,ctCls:"portal-plain-panel",items:[{layout:"column",cls:"portal-plain-panel",border:false,bodyBorder:false,hideBorders:true,items:[{layout:"form",width:205,cls:"portal-plain-panel",border:false,bodyBorder:false,hideBorders:true,items:[this.emailDeletedObject,this.emailIdObject,this.emailAddressObject]},{layout:"form",width:230,style:"padding-right:5px;",cls:"portal-plain-panel",border:false,bodyBorder:false,hideBorders:true,items:[this.emailTypeObject]},this.emailTypeOtherPanel,this.EraseButtonPanel,{id:"emailAddressTarget"+this.dynamicID,layout:"form",cls:"invalid-target-field-panel",style:"padding-top:5px;",border:false,bodyBorder:false,hideBorders:true}]},e]});Ext.apply(this,{layout:"form",bodyBorder:false,border:false,hideBorders:true,ctCls:"portal-plain-panel",items:[this.interiorFieldButtonPanel]});Ext.apply(this.initialConfig,{layout:this.layout,style:this.style,ctCls:this.ctCls,bodyBorder:this.bodyBorder,border:this.border,width:this.width,items:this.items});IDXM.emailAddressFieldsPanelNoTitle.superclass.initComponent.call(this)}});Ext.reg("emailAddressFieldsPanelNoTitle",IDXM.emailAddressFieldsPanelNoTitle);Ext.namespace("IDXM.emailMultiplePanel");IDXM.emailMultiplePanel=Ext.extend(Ext.Panel,{initComponent:function(){if(!this.blnDisplayAdvicesheet){this.blnDisplayAdvicesheet=false}var b=this.id;var a=this.blnDisplayAdvicesheet;var d=[{xtype:"label",text:"* Email(s):",cls:"supportPortalFormLabelBold"},{xtype:"panel",border:false,bodyBorder:false,hideBorders:true,height:5}];if(this.fieldArray.length){var e=0;for(var c=0;c<this.fieldArray.length;c++){e+=1;if(c){this.fieldArray[c]=new IDXM.emailAddressFieldsPanelNoTitle({id:b+"dynamicID"+c,dynamicID:c,emailContact:this.fieldArray[c],emailTypes:this.emailTypes,blnDisplayAdvicesheet:a})}else{this.fieldArray[c]=new IDXM.emailAddressFieldsPanelNoTitle({id:b+"dynamicID"+c,dynamicID:c,allowDelete:false,emailContact:this.fieldArray[c],emailTypes:this.emailTypes,blnDisplayAdvicesheet:a})}d[d.length]=this.fieldArray[c]}if(e<this.maxTypeRows){this.fieldArray[this.fieldArray.length]=new IDXM.emailAddressFieldsPanelNoTitle({id:b+"dynamicID"+this.fieldArray.length,dynamicID:this.fieldArray.length,emailTypes:this.emailTypes,blnDisplayAdvicesheet:a});d[d.length]=this.fieldArray[this.fieldArray.length-1]}}else{this.fieldArray[0]=new IDXM.emailAddressFieldsPanelNoTitle({id:b+"dynamicID0",dynamicID:0,allowDelete:false,emailTypes:this.emailTypes,blnDisplayAdvicesheet:a});this.fieldArray[1]=new IDXM.emailAddressFieldsPanelNoTitle({id:b+"dynamicID1",dynamicID:1,emailTypes:this.emailTypes,blnDisplayAdvicesheet:a});d[d.length]=this.fieldArray[0];d[d.length]=this.fieldArray[1]}Ext.apply(this,{layout:"form",items:d});Ext.apply(this.initialConfig,{id:this.id,items:this.items});IDXM.emailMultiplePanel.superclass.initComponent.call(this)}});Ext.reg("emailMultiplePanel",IDXM.emailMultiplePanel);Ext.namespace("IDXM.emailsPanel");IDXM.emailsPanel=Ext.extend(Ext.Panel,{initComponent:function(config){if(!this.maxTypeRows){this.maxTypeRows=5}if(!this.blnDisplayAdvicesheet){this.blnDisplayAdvicesheet=false}var panelID=this.id;var hiddenEmailContactsCounter=new Ext.form.Hidden({name:"emailContactCounter"});var fieldsEmailArray;var emailMultiplePanel;var emailTypes=this.emailTypes;var maxTypeRows=this.maxTypeRows;var unMarkAdviceSheetForFaxPanel=this.unMarkAdviceSheetForFaxPanel;var blnDisplayAdvicesheet=this.blnDisplayAdvicesheet;function validateFieldsInPanelHaveValue(m_EmailsObject){var isValid=true;var arrayCount=0;for(i=0;i<fieldsEmailArray.length;i++){if(fieldsEmailArray[i]!=null){arrayCount+=1;var temp=fieldsEmailArray[i].emailAddressObject.getRawValue();if(temp.length<=0){isValid=false;break}var temp=fieldsEmailArray[i].emailTypeObject.getRawValue();if(temp.length<=0){isValid=false;break}var temp=fieldsEmailArray[i].emailTypeOther;if(temp&&!temp.disabled){temp=temp.getRawValue();if(temp.length<=0){isValid=false;break}}}}if(isValid&&arrayCount<maxTypeRows){var emailsObject=m_EmailsObject;var newFieldPanel=new IDXM.emailAddressFieldsPanelNoTitle({id:"emailMultiplePanel"+panelID+"dynamicID"+fieldsEmailArray.length,dynamicID:fieldsEmailArray.length,emailTypes:emailTypes,blnDisplayAdvicesheet:blnDisplayAdvicesheet});fieldsEmailArray[fieldsEmailArray.length]=newFieldPanel;emailsObject.add(newFieldPanel);addListenersFieldsInPanel(emailsObject);emailsObject.doLayout()}return isValid}if(blnDisplayAdvicesheet){function markAdviceSheet(m_adviceObject){for(i=0;i<fieldsEmailArray.length;i++){if(fieldsEmailArray[i]!=null){if(m_adviceObject.adviceIndex==i){fieldsEmailArray[i].emailAdviceSheetNotification.setValue(true)}else{fieldsEmailArray[i].emailAdviceSheetNotification.setValue(false)}}}}}function addListenersFieldsInPanel(m_EmailsObject){var emailsObject=m_EmailsObject;for(i=0;i<fieldsEmailArray.length;i++){if(fieldsEmailArray[i]!=null){fieldsEmailArray[i].emailAddressObject.on("blur",function(){validateFieldsInPanelHaveValue(emailsObject)});fieldsEmailArray[i].emailTypeObject.on("blur",function(){validateFieldsInPanelHaveValue(emailsObject)});fieldsEmailArray[i].emailTypeOther.on("blur",function(){validateFieldsInPanelHaveValue(emailsObject)});if(blnDisplayAdvicesheet){fieldsEmailArray[i].AdviceSheetRadioButton.on("check",function(){eval(unMarkAdviceSheetForFaxPanel);markAdviceSheet(Ext.decode(this.getRawValue()),emailsObject);this.checked=true;this.checked=false})}var panelToDelete=fieldsEmailArray[i].interiorFieldButtonPanel;try{fieldsEmailArray[i].interiorEraseButton.on("click",function(panelToDelete,emailsObject,i){var arrayID=this.arrayID;Ext.getCmp("emailMultiplePanel"+panelID+"dynamicID"+this.arrayID).cascade(function(item){if(item.isFormField){if(item.name=="emailDeleted"+arrayID){item.setValue("true")}}});if(blnDisplayAdvicesheet){fieldsEmailArray[this.arrayID].emailAdviceSheetNotification.setValue(false)}Ext.getCmp("emailMultiplePanel"+panelID+"dynamicID"+this.arrayID).setVisible(false);fieldsEmailArray[this.arrayID]=null})}catch(e){}}}hiddenEmailContactsCounter.setValue(fieldsEmailArray.length-1)}if(this.loadArray&&this.loadArray.length){fieldsEmailArray=this.loadArray;emailMultiplePanel=new IDXM.emailMultiplePanel({id:"emailMultiplePanel"+panelID,fieldArray:this.loadArray,emailTypes:this.emailTypes,maxTypeRows:maxTypeRows,blnDisplayAdvicesheet:blnDisplayAdvicesheet})}else{fieldsEmailArray=new Array();emailMultiplePanel=new IDXM.emailMultiplePanel({id:"emailMultiplePanel"+panelID,fieldArray:fieldsEmailArray,emailTypes:this.emailTypes,blnDisplayAdvicesheet:blnDisplayAdvicesheet})}addListenersFieldsInPanel(emailMultiplePanel);Ext.apply(this,{layout:"form",bodyBorder:false,border:false,ctCls:"portal-plain-panel",hideBorders:true,items:[emailMultiplePanel,hiddenEmailContactsCounter]});Ext.apply(this.initialConfig,{layout:this.layout,style:this.style,bodyBorder:this.bodyBorder,border:this.border,ctCls:"portal-plain-panel",width:this.width,items:this.items});if(blnDisplayAdvicesheet){this.unMarkAdviceSheet=function(){var fieldsEmailArray=this.fieldsEmailArray;for(i=0;i<fieldsEmailArray.length;i++){if(fieldsEmailArray[i]!=null){fieldsEmailArray[i].emailAdviceSheetNotification.setValue(false)}}};this.isAdviceSheetValid=function(formPanelObject,fieldName){var AdviceNotificationCheckBoxFieldArray=formPanelObject.find("name",fieldName);var areAllNotificationChecksEmpty=true;var adviceNotificationValue;for(i=0;i<AdviceNotificationCheckBoxFieldArray.length;i++){if(AdviceNotificationCheckBoxFieldArray[i].getValue()){areAllNotificationChecksEmpty=false;adviceNotificationValue=AdviceNotificationCheckBoxFieldArray[i].getRawValue()}}if(areAllNotificationChecksEmpty){return false}else{var adviceNotificationValueJson=Ext.decode(adviceNotificationValue);if(adviceNotificationValueJson.adviceType=="email"){if(!Ext.isEmpty(fieldsEmailArray[adviceNotificationValueJson.adviceIndex])){if(fieldsEmailArray[adviceNotificationValueJson.adviceIndex].emailAddressObject.getValue().trim()==""&&fieldsEmailArray[adviceNotificationValueJson.adviceIndex].emailTypeOther.getValue().trim()==""){return false}else{return true}}else{return false}}else{return true}}}}this.fieldsEmailArray=fieldsEmailArray;IDXM.emailsPanel.superclass.initComponent.call(this)}});Ext.reg("emailsPanel",IDXM.emailsPanel);Ext.namespace("IDXM.ExternalUserProfile.Action.Edit");IDXM.ExternalUserProfile.Action.Edit=function(config){Ext.form.Field.prototype.msgTarget="sideDetails";var isPhoneRequired=false;var blnDisplayAdvicesheet=false;if(config.userData.userClassCode==IDXM_USER_CLASS_CLIENT){blnDisplayAdvicesheet=true;if(config.userData.phone&&config.userData.phone.length>0){if((config.userData.userStatus.statusCode!=IDXM_USER_STATUS_CODE_MAP.TERMINATED)){isPhoneRequired=true}}}var idxmEmailsPanel=new IDXM.emailsPanel({id:"emailFieldPanel"+config.nameSpace,blnDisplayAdvicesheet:blnDisplayAdvicesheet,unMarkAdviceSheetForFaxPanel:"Ext.getCmp('faxFieldPanel"+config.nameSpace+"').unMarkAdviceSheet()",loadArray:config.userData.email,emailTypes:config.emailTypes,maxTypeRows:config.maxTypeRows});var idxmPhonesPanel=new IDXM.phonesPanel({id:"phoneFieldPanel"+config.nameSpace,loadArray:config.userData.phone,phoneTypes:config.phoneTypes,maxTypeRows:config.maxTypeRows,isPhoneRequired:isPhoneRequired});var idxmFaxPanel=new IDXM.faxsPanel({id:"faxFieldPanel"+config.nameSpace,blnDisplayAdvicesheet:blnDisplayAdvicesheet,unMarkAdviceSheetForEmailPanel:"Ext.getCmp('emailFieldPanel"+config.nameSpace+"').unMarkAdviceSheet()",loadArray:config.userData.fax,faxTypes:config.faxTypes,maxTypeRows:config.maxTypeRows});function formSubmit(){var formObj=Ext.getCmp("idxmExternalUserProfilePanelForm"+config.nameSpace).getForm();g_hideStatusBox();formObj.submit({url:config.urlSubmitUpdateProfile,clientValidation:false,isRedirect:true,success:function(form,action){uRadixRedirectHandler.redirect(config.urlUpdateProfile+"?systemUserId="+config.userData.sysKey)},failure:function(form,action){g_showStatusBox();Ext.getCmp("updateButton"+config.nameSpace).enable();Ext.get(document.body.id).unmask()}})}function formSubmitHandler(){var formObj=Ext.getCmp("idxmExternalUserProfilePanelForm"+config.nameSpace).getForm();var formValues=formObj.getValues();var areEmailContactsValid=IDXM.UserProfile.Utilities.Contacts.ValidateEmailContacts({formId:"idxmExternalUserProfilePanelForm"+config.nameSpace,contactCounter:formValues.emailContactCounter,booleanVariableTobeSet:"areEmailContactsValid"});var arePhoneContactsValid=IDXM.UserProfile.Utilities.Contacts.ValidatePhoneContacts({formId:"idxmExternalUserProfilePanelForm"+config.nameSpace,contactCounter:formValues.phoneContactCounter,booleanVariableTobeSet:"arePhoneContactsValid",isPhoneRequired:isPhoneRequired});var areFaxContactsValid=IDXM.UserProfile.Utilities.Contacts.ValidateFaxContacts({formId:"idxmExternalUserProfilePanelForm"+config.nameSpace,contactCounter:formValues.faxContactCounter,booleanVariableTobeSet:"areFaxContactsValid"});if(areEmailContactsValid&&arePhoneContactsValid&&areFaxContactsValid){if(blnDisplayAdvicesheet){var isEmailAdviceSheetValid=Ext.getCmp("emailFieldPanel"+config.nameSpace).isAdviceSheetValid(Ext.getCmp("idxmExternalUserProfilePanelForm"+config.nameSpace),"AdviceNotificationCheckBox");var isFaxAdviceSheetValid=Ext.getCmp("faxFieldPanel"+config.nameSpace).isAdviceSheetValid(Ext.getCmp("idxmExternalUserProfilePanelForm"+config.nameSpace),"AdviceNotificationCheckBox")}else{var isEmailAdviceSheetValid=true;var isFaxAdviceSheetValid=true}if(isEmailAdviceSheetValid&&isFaxAdviceSheetValid){Ext.getCmp("updateButton"+config.nameSpace).disable();Ext.get(document.body.id).mask("<b> Loading...</b> ","x-mask-loading");formSubmit()}else{IDXM.UserProfile.PopUp.AdviceNotificationOption({})}}}var noAdviceSheetRadioButton={};if(blnDisplayAdvicesheet){noAdviceSheetRadioButton=new Ext.form.Radio({hideLabel:true,labelSeparator:"",boxLabel:"Let User Select Advice Notification",name:"AdviceNotificationCheckBox",inputValue:Ext.encode({adviceType:"none",adviceIndex:this.dynamicID}),value:this.dynamicID,ctCls:"no-advice-sheet-label-txt",cls:"no-advice-sheet-label-txt",listeners:{check:function(){eval("Ext.getCmp('emailFieldPanel"+config.nameSpace+"').unMarkAdviceSheet()");eval("Ext.getCmp('faxFieldPanel"+config.nameSpace+"').unMarkAdviceSheet()")}}})}else{noAdviceSheetRadioButton={xtype:"panel",border:false,bodyBorder:false,hideBorders:true}}new Ext.Panel({renderTo:config.formPanelDivID,border:false,bodyBorder:false,hideBorders:true,width:(config.userData.userClassCode==IDXM_USER_CLASS_CLIENT)?1000:850,items:[{xtype:"panel",border:false,cls:"portal-title",html:"Update User Profile"},{xtype:"panel",height:8,border:0,style:"boder:none;",bodyBorder:0,bodyStyle:"border:none",hideBorders:true},{xtype:"idxm.profile.ux.ProfileBar",nameSpace:config.nameSpace,hideAllIcons:true,statusCode:config.userData.userStatus.statusCode,statusName:config.userData.userStatus.statusName,userSubClassCode:config.userData.userSubClassCode,mirrorUserURL:config.mirrorUserURL,sysKey:config.userData.sysKey,userTypeCode:config.userData.userTypeCode,userClassCode:config.userData.userClassCode},{xtype:"uRadix.form.FormPanel",autoScroll:true,cls:"user-profile-body",id:"idxmExternalUserProfilePanelForm"+config.nameSpace,items:[{xtype:"idxmExternalUserProfilePanel",id:"idxmExternalUserProfilePanel"+config.nameSpace,userData:config.userData,formObjectName:"userProfileAction"+config.nameSpace},idxmEmailsPanel,idxmPhonesPanel,idxmFaxPanel,noAdviceSheetRadioButton]}],buttons:[{id:"cancelButton"+config.nameSpace,text:"CANCEL",ctCls:"support-portal-btn-cancel",handler:function(){if(isFormPanelDirty){idxm.core.popups.Cancel({doCancelFunction:jsonFunctionObject.doCancel,noCancelFunction:jsonFunctionObject.noCancel})}else{document.location=config.urlUpdateProfile+"?systemUserId="+config.userData.sysKey}}},{id:"updateButton"+config.nameSpace,text:"UPDATE",ctCls:"support-portal-btn",handler:formSubmitHandler}],listeners:{uradix_enterkey:formSubmitHandler}});var formPanel=Ext.getCmp("idxmExternalUserProfilePanelForm"+config.nameSpace);var isFormPanelDirty=false;formPanel.getForm().items.each(function(f){f.on("change",function(){isFormPanelDirty=true})});Ext.getCmp("idxmExternalUserProfilePanelForm"+config.nameSpace).getForm().setValues(config.userData);var jsonFunctionObject={doCancel:function(){document.location=config.urlUpdateProfile+"?systemUserId="+config.userData.sysKey},noCancel:function(){}};return jsonFunctionObject};Ext.namespace("IDXM.ux.externalUserProfile");IDXM.ux.externalUserProfile=Ext.extend(Ext.Panel,{initComponent:function(){Ext.apply(this,{layout:"form",bodyBorder:false,border:false,hideBorders:true,labelAlign:"top",items:[{xtype:"hidden",name:"sysKey"},{xtype:"textfield",fieldLabel:"First Name",name:"firstName",maxLength:50,width:200,validateOnBlur:true,allowBlank:false},{xtype:"textfield",fieldLabel:"Last Name",name:"lastName",maxLength:50,width:200,allowBlank:false}]});Ext.apply(this.initialConfig,{layout:this.layout,style:this.style,bodyBorder:this.bodyBorder,border:this.border,width:this.width,items:this.items});IDXM.ux.externalUserProfile.superclass.initComponent.call(this)}});Ext.reg("idxmExternalUserProfilePanel",IDXM.ux.externalUserProfile);Ext.namespace("IDXM.faxAddressFieldsPanelNoTitle");IDXM.faxAddressFieldsPanelNoTitle=Ext.extend(Ext.Panel,{initComponent:function(){this.faxTypes=[{id:"",name:"- Select One -"}].concat(this.faxTypes);if(!this.blnDisplayAdvicesheet){this.blnDisplayAdvicesheet=false}var c=this.blnDisplayAdvicesheet;this.faxDeletedJson={id:"faxDeleted"+this.dynamicID,name:"faxDeleted"+this.dynamicID,value:false};this.faxIdJson={id:"faxId"+this.dynamicID,name:"faxId"+this.dynamicID};this.faxAddressJson={hideLabel:true,labelSeparator:"",id:"faxAddress"+this.dynamicID,name:"faxAddress"+this.dynamicID,maxLength:256,width:200,msgTarget:"faxAddressTarget"+this.dynamicID,msgDisplay:"",vtype:"phone",validationEvent:"blur",allowBlank:true};this.faxTypeJson={hideLabel:true,width:225,labelSeparator:"",hiddenId:"faxTypeCode"+this.dynamicID,hiddenName:"faxTypeCode"+this.dynamicID,id:"faxTypeText"+this.dynamicID,name:"faxTypeText"+this.dynamicID,msgTarget:"faxAddressTarget"+this.dynamicID,msgDisplay:"",mode:"local",store:new Ext.data.JsonStore({fields:["id","name"],root:"rows",idProperty:"id",data:{rows:this.faxTypes}}),valueField:"id",emptyText:"- Select One -",displayField:"name",triggerAction:"all",editable:false,allowBlank:true,forceSelection:false,selectOnFocus:true,listeners:{render:function(){this.el.dom.name=this.name},select:function(){if(this.getValue()=="Other"){b.enable();b.show();b.cascade(function(f){if(f.isFormField){f.enable();f.show()}})}else{b.enable();b.disable();b.hide();b.cascade(function(f){if(f.isFormField){f.disable();f.hide()}})}}}};this.faxAdviceSheetNotification=new Ext.form.Hidden({id:"faxAdviceSheetNotification"+this.dynamicID,name:"faxAdviceSheetNotification"+this.dynamicID,value:false});var a=this.dynamicID;this.AdviceSheetRadioButton=new Ext.form.Radio({hideLabel:true,labelSeparator:"",boxLabel:"Use For Advice Notification",name:"AdviceNotificationCheckBox",inputValue:Ext.encode({adviceType:"fax",adviceIndex:a}),value:this.dynamicID,ctCls:"advice-box-label",cls:"advice-box-label",listeners:{check:function(){}}});if(this.faxContact!=undefined&&this.faxContact.value!=undefined){this.faxIdJson.value=this.faxContact.id;this.faxAddressJson.value=this.faxContact.value;this.faxTypeJson.value=this.faxContact.type;this.faxTypeJson.hiddenValue=this.faxContact.type;if(this.faxContact.adviceNotification!=undefined){this.faxAdviceSheetNotification.value=this.faxContact.adviceNotification;if(this.faxContact.adviceNotification){this.AdviceSheetRadioButton.checked=this.faxContact.adviceNotification}}}this.faxDeletedObject=new Ext.form.Hidden(this.faxDeletedJson);this.faxIdObject=new Ext.form.Hidden(this.faxIdJson);this.faxAddressObject=new Ext.form.TextField(this.faxAddressJson);this.faxTypeObject=new Ext.form.ComboBox(this.faxTypeJson);this.faxTypeOther=new Ext.form.TextField({hideLabel:true,width:120,labelSeparator:"",disabled:true,hidden:true,id:"faxOther"+this.dynamicID,name:"faxOther"+this.dynamicID,maxLength:20,msgTarget:"faxAddressTarget"+this.dynamicID,msgDisplay:"",allowBlank:true});this.faxTypeOtherPanel=new Ext.Panel({layout:"form",width:133,style:"padding-right:5px;",hidden:true,disabled:true,border:false,bodyBorder:false,hideBorders:true,items:[this.faxTypeOther]});var d=this.faxTypeOther;var b=this.faxTypeOtherPanel;if(typeof(this.allowDelete)=="undefined"){this.allowDelete=true}if(this.allowDelete){this.interiorEraseButton=new Ext.Button({arrayID:this.dynamicID,text:"X",ctCls:"support-portal-btn"});this.EraseButtonPanel=new Ext.Panel({layout:"form",width:30,cls:"portal-plain-panel",border:false,bodyBorder:false,hideBorders:true,items:[this.interiorEraseButton]})}else{this.interiorEraseButton=new Ext.Button({arrayID:this.dynamicID,text:"X",ctCls:"support-portal-btn"});this.EraseButtonPanel=new Ext.Panel({layout:"form",width:30,cls:"portal-plain-panel",border:false,bodyBorder:false,hideBorders:true,hidden:true,items:[this.interiorEraseButton]})}var e={border:false,bodyBorder:false,hideBorders:true};if(c){e={layout:"column",cls:"portal-plain-panel",border:false,bodyBorder:false,hideBorders:true,items:[{width:10,html:"&nbsp;"},this.AdviceSheetRadioButton,this.faxAdviceSheetNotification]}}this.interiorFieldButtonPanel=new Ext.Panel({layout:"form",bodyBorder:false,border:false,hideBorders:true,ctCls:"portal-plain-panel",items:[{layout:"column",cls:"portal-plain-panel",border:false,bodyBorder:false,hideBorders:true,items:[{layout:"form",width:205,cls:"portal-plain-panel",border:false,bodyBorder:false,hideBorders:true,items:[this.faxDeletedObject,this.faxIdObject,this.faxAddressObject]},{layout:"form",width:230,style:"padding-right:5px;",cls:"portal-plain-panel",border:false,bodyBorder:false,hideBorders:true,items:[this.faxTypeObject]},this.faxTypeOtherPanel,this.EraseButtonPanel,{id:"faxAddressTarget"+this.dynamicID,layout:"form",cls:"invalid-target-field-panel",style:"padding-top:5px;",border:false,bodyBorder:false,hideBorders:true}]},e]});Ext.apply(this,{layout:"form",bodyBorder:false,border:false,hideBorders:true,ctCls:"portal-plain-panel",items:[this.interiorFieldButtonPanel]});Ext.apply(this.initialConfig,{layout:this.layout,style:this.style,ctCls:this.ctCls,bodyBorder:this.bodyBorder,border:this.border,width:this.width,items:this.items});IDXM.faxAddressFieldsPanelNoTitle.superclass.initComponent.call(this)}});Ext.reg("faxAddressFieldsPanelNoTitle",IDXM.faxAddressFieldsPanelNoTitle);Ext.namespace("IDXM.faxMultiplePanel");IDXM.faxMultiplePanel=Ext.extend(Ext.Panel,{initComponent:function(){if(!this.blnDisplayAdvicesheet){this.blnDisplayAdvicesheet=false}var b=this.id;var a=this.blnDisplayAdvicesheet;var d=[{xtype:"label",text:"Fax(s):",cls:"supportPortalFormLabel"},{xtype:"panel",border:false,bodyBorder:false,hideBorders:true,height:5}];if(this.fieldArray.length){var e=0;for(var c=0;c<this.fieldArray.length;c++){e+=1;if(c){this.fieldArray[c]=new IDXM.faxAddressFieldsPanelNoTitle({id:b+"dynamicID"+c,dynamicID:c,faxContact:this.fieldArray[c],faxTypes:this.faxTypes,blnDisplayAdvicesheet:a})}else{this.fieldArray[c]=new IDXM.faxAddressFieldsPanelNoTitle({id:b+"dynamicID"+c,dynamicID:c,allowDelete:false,faxContact:this.fieldArray[c],faxTypes:this.faxTypes,blnDisplayAdvicesheet:a})}d[d.length]=this.fieldArray[c]}if(e<this.maxTypeRows){this.fieldArray[this.fieldArray.length]=new IDXM.faxAddressFieldsPanelNoTitle({id:b+"dynamicID"+this.fieldArray.length,dynamicID:this.fieldArray.length,faxTypes:this.faxTypes,blnDisplayAdvicesheet:a});d[d.length]=this.fieldArray[this.fieldArray.length-1]}}else{this.fieldArray[0]=new IDXM.faxAddressFieldsPanelNoTitle({id:b+"dynamicID0",dynamicID:0,allowDelete:false,faxTypes:this.faxTypes,blnDisplayAdvicesheet:a});this.fieldArray[1]=new IDXM.faxAddressFieldsPanelNoTitle({id:b+"dynamicID1",dynamicID:1,faxTypes:this.faxTypes,blnDisplayAdvicesheet:a});d[d.length]=this.fieldArray[0];d[d.length]=this.fieldArray[1]}Ext.apply(this,{layout:"form",items:d});Ext.apply(this.initialConfig,{id:this.id,items:this.items});IDXM.faxMultiplePanel.superclass.initComponent.call(this)}});Ext.reg("faxMultiplePanel",IDXM.faxMultiplePanel);Ext.namespace("IDXM.faxsPanel");IDXM.faxsPanel=Ext.extend(Ext.Panel,{initComponent:function(config){if(!this.maxTypeRows){this.maxTypeRows=5}if(!this.blnDisplayAdvicesheet){this.blnDisplayAdvicesheet=false}var panelID=this.id;var faxTypes=this.faxTypes;var maxTypeRows=this.maxTypeRows;var hiddenFaxContactsCounter=new Ext.form.Hidden({name:"faxContactCounter"});var unMarkAdviceSheetForEmailPanel=this.unMarkAdviceSheetForEmailPanel;var fieldsFaxArray;var faxMultiplePanel;var blnDisplayAdvicesheet=this.blnDisplayAdvicesheet;function validateFieldsInPanelHaveValue(m_FaxsObject){var isValid=true;var arrayCount=0;for(i=0;i<fieldsFaxArray.length;i++){if(fieldsFaxArray[i]!=null){arrayCount+=1;var temp=fieldsFaxArray[i].faxAddressObject.getRawValue();if(temp.length<=0){isValid=false;break}var temp=fieldsFaxArray[i].faxTypeObject.getRawValue();if(temp.length<=0){isValid=false;break}var temp=fieldsFaxArray[i].faxTypeOther;if(temp&&!temp.disabled){temp=temp.getRawValue();if(temp.length<=0){isValid=false;break}}}}if(isValid&&arrayCount<maxTypeRows){var faxsObject=m_FaxsObject;var newFieldPanel=new IDXM.faxAddressFieldsPanelNoTitle({id:"faxMultiplePanel"+panelID+"dynamicID"+fieldsFaxArray.length,dynamicID:fieldsFaxArray.length,faxTypes:faxTypes,blnDisplayAdvicesheet:blnDisplayAdvicesheet});fieldsFaxArray[fieldsFaxArray.length]=newFieldPanel;faxsObject.add(newFieldPanel);addListenersFieldsInPanel(faxsObject);faxsObject.doLayout()}return isValid}if(blnDisplayAdvicesheet){function markAdviceSheet(m_adviceObject){for(i=0;i<fieldsFaxArray.length;i++){if(fieldsFaxArray[i]!=null){if(m_adviceObject.adviceIndex==i){fieldsFaxArray[i].faxAdviceSheetNotification.setValue(true)}else{fieldsFaxArray[i].faxAdviceSheetNotification.setValue(false)}}}}}function makeFirstRowDeletable(){var blnMakeFirstRowDeletable=true;for(i=1;i<fieldsFaxArray.length;i++){if(fieldsFaxArray[i]!=null){if(fieldsFaxArray[i].faxDeletedObject.getValue()!=undefined&&fieldsFaxArray[i].faxDeletedObject.getValue()!="true"){if((fieldsFaxArray[i].faxAddressObject.getValue()!=undefined&&fieldsFaxArray[i].faxAddressObject.getValue().trim()!="")||(fieldsFaxArray[i].faxTypeObject.getValue()!=undefined&&fieldsFaxArray[i].faxTypeObject.getValue().trim()!="")){blnMakeFirstRowDeletable=false}}}}fieldsFaxArray[0].EraseButtonPanel.setVisible(blnMakeFirstRowDeletable)}function addListenersFieldsInPanel(m_FaxsObject){var faxsObject=m_FaxsObject;for(i=0;i<fieldsFaxArray.length;i++){if(fieldsFaxArray[i]!=null){fieldsFaxArray[i].faxAddressObject.on("blur",function(){validateFieldsInPanelHaveValue(faxsObject);makeFirstRowDeletable()});fieldsFaxArray[i].faxTypeObject.on("blur",function(){validateFieldsInPanelHaveValue(faxsObject);makeFirstRowDeletable()});fieldsFaxArray[i].faxTypeOther.on("blur",function(){validateFieldsInPanelHaveValue(faxsObject);makeFirstRowDeletable()});if(blnDisplayAdvicesheet){fieldsFaxArray[i].AdviceSheetRadioButton.on("check",function(){makeFirstRowDeletable();eval(unMarkAdviceSheetForEmailPanel);markAdviceSheet(Ext.decode(this.getRawValue()),faxsObject);this.checked=true;this.checked=false})}var panelToDelete=fieldsFaxArray[i].interiorFieldButtonPanel;try{if(i){fieldsFaxArray[i].interiorEraseButton.on("click",function(panelToDelete,faxsObject,i){var arrayID=this.arrayID;Ext.getCmp("faxMultiplePanel"+panelID+"dynamicID"+this.arrayID).cascade(function(item){if(item.isFormField){if(item.name=="faxDeleted"+arrayID){item.setValue("true")}}});makeFirstRowDeletable();if(blnDisplayAdvicesheet){fieldsFaxArray[this.arrayID].faxAdviceSheetNotification.setValue(false)}Ext.getCmp("faxMultiplePanel"+panelID+"dynamicID"+this.arrayID).setVisible(false);fieldsFaxArray[this.arrayID]=null})}else{fieldsFaxArray[i].interiorEraseButton.on("click",function(panelToDelete,faxsObject,i){var arrayID=this.arrayID;fieldsFaxArray[this.arrayID].faxAddressObject.setValue("");fieldsFaxArray[this.arrayID].faxTypeObject.setValue("");fieldsFaxArray[this.arrayID].faxTypeOther.setValue("");if(blnDisplayAdvicesheet){fieldsFaxArray[this.arrayID].faxAdviceSheetNotification.setValue(false)}})}}catch(e){}}}hiddenFaxContactsCounter.setValue(fieldsFaxArray.length-1)}if(this.loadArray&&this.loadArray.length){fieldsFaxArray=this.loadArray;faxMultiplePanel=new IDXM.faxMultiplePanel({id:"faxMultiplePanel"+panelID,fieldArray:this.loadArray,faxTypes:this.faxTypes,maxTypeRows:maxTypeRows,blnDisplayAdvicesheet:blnDisplayAdvicesheet})}else{fieldsFaxArray=new Array();faxMultiplePanel=new IDXM.faxMultiplePanel({id:"faxMultiplePanel"+panelID,fieldArray:fieldsFaxArray,faxTypes:this.faxTypes,blnDisplayAdvicesheet:blnDisplayAdvicesheet})}addListenersFieldsInPanel(faxMultiplePanel);makeFirstRowDeletable();Ext.apply(this,{layout:"form",bodyBorder:false,border:false,ctCls:"portal-plain-panel",hideBorders:true,items:[faxMultiplePanel,hiddenFaxContactsCounter]});Ext.apply(this.initialConfig,{layout:this.layout,style:this.style,bodyBorder:this.bodyBorder,border:this.border,ctCls:"portal-plain-panel",width:this.width,items:this.items});if(blnDisplayAdvicesheet){this.unMarkAdviceSheet=function(){var fieldsFaxArray=this.fieldsFaxArray;for(i=0;i<fieldsFaxArray.length;i++){if(fieldsFaxArray[i]!=null){fieldsFaxArray[i].faxAdviceSheetNotification.setValue(false)}}};this.isAdviceSheetValid=function(formPanelObject,fieldName){var AdviceNotificationCheckBoxFieldArray=formPanelObject.find("name",fieldName);var areAllNotificationChecksEmpty=true;var adviceNotificationValue;for(i=0;i<AdviceNotificationCheckBoxFieldArray.length;i++){if(AdviceNotificationCheckBoxFieldArray[i].getValue()){areAllNotificationChecksEmpty=false;adviceNotificationValue=AdviceNotificationCheckBoxFieldArray[i].getRawValue()}}if(areAllNotificationChecksEmpty){return false}else{var adviceNotificationValueJson=Ext.decode(adviceNotificationValue);if(adviceNotificationValueJson.adviceType=="fax"){if(!Ext.isEmpty(fieldsFaxArray[adviceNotificationValueJson.adviceIndex])){if(fieldsFaxArray[adviceNotificationValueJson.adviceIndex].faxAddressObject.getValue().trim()==""&&fieldsFaxArray[adviceNotificationValueJson.adviceIndex].faxTypeOther.getValue().trim()==""){return false}else{return true}}else{return false}}else{return true}}}}this.fieldsFaxArray=fieldsFaxArray;IDXM.faxsPanel.superclass.initComponent.call(this)}});Ext.reg("faxsPanel",IDXM.faxsPanel);Ext.namespace("IDXM.UserProfile.Action.Edit");IDXM.UserProfile.Action.Edit=function(c){Ext.form.Field.prototype.msgTarget="sideDetails";var a=false;var k=new IDXM.emailsPanel({loadArray:c.userData.email,emailTypes:c.emailTypes,maxTypeRows:c.maxTypeRows});var f=new IDXM.phonesPanel({loadArray:c.userData.phone,phoneTypes:c.phoneTypes,maxTypeRows:c.maxTypeRows,isPhoneRequired:a});var l=new IDXM.faxsPanel({loadArray:c.userData.fax,faxTypes:c.faxTypes,maxTypeRows:c.maxTypeRows});function g(){Ext.get(document.body.id).mask("<b> Loading...</b> ","x-mask-loading");var m=Ext.getCmp("idxmUserProfilePanelForm"+c.nameSpace).getForm();g_hideStatusBox();m.submit({url:c.urlSubmitUpdateProfile,clientValidation:false,isRedirect:true,success:function(n,o){uRadixRedirectHandler.redirect(c.urlUpdateProfile+"?systemUserId="+c.userData.sysKey)},failure:function(n,o){g_showStatusBox();Ext.getCmp("updateButton"+c.nameSpace).enable();Ext.get(document.body.id).unmask()}})}function h(){var m=Ext.getCmp("idxmUserProfilePanelForm"+c.nameSpace).getForm();var p=m.getValues();var n=IDXM.UserProfile.Utilities.Contacts.ValidateEmailContacts({formId:"idxmUserProfilePanelForm"+c.nameSpace,contactCounter:p.emailContactCounter,booleanVariableTobeSet:"areEmailContactsValid"});var q=IDXM.UserProfile.Utilities.Contacts.ValidatePhoneContacts({formId:"idxmUserProfilePanelForm"+c.nameSpace,contactCounter:p.phoneContactCounter,booleanVariableTobeSet:"arePhoneContactsValid"});var o=IDXM.UserProfile.Utilities.Contacts.ValidateFaxContacts({formId:"idxmUserProfilePanelForm"+c.nameSpace,contactCounter:p.faxContactCounter,booleanVariableTobeSet:"areFaxContactsValid"});if(n&&q&&o){Ext.getCmp("updateButton"+c.nameSpace).disable();if(c.userData.reportsTo!=p.reportsTo||c.userData.department!=p.department){uRadixWindowManager.uRadixWindowRegistry["groupsAndRolesChangeWarning"+c.nameSpace].autoLoad.params["$$mpicallback$$"]=c.thisObjectName+".groupsAndRolesChangeWarningCallBack";uRadixWindowManager.launch({id:"groupsAndRolesChangeWarning"+c.nameSpace,key:"groupsAndRolesChangeWarning"+c.nameSpace})}else{g()}}}var d=new Ext.Panel({renderTo:c.formPanelDivID,border:false,bodyBorder:false,hideBorders:true,width:850,items:[{xtype:"panel",border:false,cls:"portal-title",html:"Update User Profile"},{xtype:"panel",height:8,border:0,style:"boder:none;",bodyBorder:0,bodyStyle:"border:none",hideBorders:true},{xtype:"idxm.profile.ux.ProfileBar",nameSpace:c.nameSpace,hideAllIcons:true,statusCode:c.userData.userStatus.statusCode,statusName:c.userData.userStatus.statusName,userSubClassCode:c.userData.userSubClassCode,mirrorUserURL:c.mirrorUserURL,sysKey:c.userData.sysKey,userTypeCode:c.userData.userTypeCode,userClassCode:c.userData.userClassCode},{xtype:"uRadix.form.FormPanel",autoScroll:true,cls:"user-profile-body",id:"idxmUserProfilePanelForm"+c.nameSpace,items:[{xtype:"idxmUserProfilePanel",id:"idxmUserProfilePanel"+c.nameSpace,suffixList:c.suffixes,prefixList:c.prefixes,locationList:c.locations,departmentList:c.departments,reportsToUrl:c.reportsToUrl,userData:c.userData,formObjectName:"Ext.getCmp('idxmUserProfilePanelForm"+c.nameSpace+"')"},k,f,l]}],buttons:[{id:"cancelButton"+c.nameSpace,text:"CANCEL",ctCls:"support-portal-btn-cancel",handler:function(){if(b){idxm.core.popups.Cancel({doCancelFunction:e.doCancel,noCancelFunction:e.noCancel})}else{document.location=c.urlUpdateProfile+"?systemUserId="+c.userData.sysKey}}},{id:"updateButton"+c.nameSpace,text:"UPDATE",ctCls:"support-portal-btn",handler:h}],listeners:{uradix_enterkey:h}});var d=Ext.getCmp("idxmUserProfilePanelForm"+c.nameSpace);var b=false;d.getForm().items.each(function(m){m.on("change",function(){b=true})});Ext.getCmp("idxmUserProfilePanelForm"+c.nameSpace).getForm().setValues(c.userData);var j=Ext.getCmp("idxmUserProfilePanelForm"+c.nameSpace).find("hiddenName","reportsTo");if(c.userData.reportsToText){j[0].setValue(c.userData.reportsTo);j[0].setRawValue(c.userData.reportsToText);if(c.userData.validReportsToIndicator==false){j[0].setValue("");j[0].setRawValue("")}}var e={groupsAndRolesChangeWarningCallBack:function(n){var m=Ext.getCmp("groupsAndRolesChangeWarning"+c.nameSpace);if(n!=undefined&&n.ok!=undefined&&n.ok){m.close();g()}else{m.close();Ext.getCmp("updateButton"+c.nameSpace).enable()}},doCancel:function(){document.location=c.urlUpdateProfile+"?systemUserId="+c.userData.sysKey},noCancel:function(){}};return e};Ext.namespace("IDXM.ux.userProfile");IDXM.ux.userProfile=Ext.extend(Ext.Panel,{initComponent:function(){if(!this.prefixList){this.prefixList=[{id:"1",name:"Dr."},{id:"2",name:"Miss"},{id:"3",name:"Mr."},{id:"4",name:"Mrs."},{id:"5",name:"Rev."}]}if(!this.suffixList){this.suffixList=[{id:"1",name:"II"},{id:"2",name:"III"},{id:"3",name:"IV"},{id:"4",name:"Esq."},{id:"5",name:"Jr."},{id:"6",name:"Sr."}]}if(!this.locationList){this.locationList=[{id:"",name:"- Select One -"},{id:"1",name:"Arlingnton"},{id:"2",name:"Brookfield"},{id:"3",name:"Dallas"},{id:"4",name:"DePere"},{id:"5",name:"Irvine"},{id:"6",name:"Kansas City"},{id:"5",name:"New Orleans"},{id:"6",name:"New York"},{id:"5",name:"Remote"},{id:"6",name:"Rockville"},{id:"6",name:"Rosemont"},{id:"6",name:"Syracuse"},{id:"6",name:"Waltham"}]}if(!this.departmentList){this.departmentList=[{id:"",name:"- Select One -"},{id:"1",name:"Customer Service"},{id:"2",name:"HR"},{id:"3",name:"Legal"},{id:"4",name:"Management"},{id:"5",name:"Operations"},{id:"6",name:"IT"}]}this.prefixList=[{id:"",name:"- Select One -"}].concat(this.prefixList);this.suffixList=[{id:"",name:"- Select One -"}].concat(this.suffixList);var formObjectName=this.formObjectName;var userData=this.userData;var autoLoadValue;if(userData&&userData.userClassCode&&userData.userSubClassCode&&userData.department){autoLoadValue=true}else{autoLoadValue=false}var reportsToStore=new Ext.data.Store({proxy:new Ext.data.HttpProxy({url:this.reportsToUrl,method:"POST"}),baseParams:userData,reader:new Ext.data.JsonReader({root:"payload",id:"id"},[{name:"id",mapping:"id"},{name:"name",mapping:"name"}]),autoLoad:autoLoadValue});var reportsToComboBox=new Ext.form.ComboBox({fieldLabel:"Reports To",hiddenName:"reportsTo",name:"reportsToText",mode:"local",valueField:"id",displayField:"name",triggerAction:"all",emptyText:"- Select One -",allowBlank:false,forceSelection:true,selectOnFocus:true,width:200,store:reportsToStore,autoHeight:true,hidden:this.isMirroredUser,listeners:{render:function(){this.el.dom.name=this.name}},typeAhead:true,typeAheadDelay:0,onHide:function(){this.getEl().up(".x-form-item").setDisplayed(false)},onShow:function(){this.getEl().up(".x-form-item").setDisplayed(true)}});Ext.apply(this,{layout:"form",bodyBorder:false,border:false,hideBorders:true,labelAlign:"top",items:[{xtype:"hidden",name:"sysKey"},{xtype:"hidden",name:"userTypeCode"},{xtype:"hidden",name:"userClassCode"},{xtype:"hidden",name:"userSubClassCode"},{xtype:"combo",fieldLabel:"Prefix",hiddenName:"prefix",name:"prefixText",mode:"local",store:new Ext.data.JsonStore({fields:["id","name"],root:"rows",idProperty:"id",data:{rows:this.prefixList}}),valueField:"id",displayField:"name",triggerAction:"all",emptyText:"- Select One -",forceSelection:true,selectOnFocus:true,width:200,typeAhead:true,typeAheadDelay:0,listeners:{render:function(){this.el.dom.name=this.name}}},{xtype:"textfield",fieldLabel:"First Name",name:"firstName",maxLength:50,width:200,allowBlank:false},{xtype:"textfield",fieldLabel:"Middle Name/Initial",name:"middleName",maxLength:50,width:200},{xtype:"textfield",fieldLabel:"Last Name",name:"lastName",maxLength:50,width:200,allowBlank:false},{xtype:"combo",fieldLabel:"Suffix",hiddenName:"suffix",name:"suffixText",mode:"local",store:new Ext.data.JsonStore({fields:["id","name"],root:"rows",idProperty:"id",data:{rows:this.suffixList}}),valueField:"id",emptyText:"- Select One -",displayField:"name",triggerAction:"all",forceSelection:false,selectOnFocus:true,width:200,listeners:{render:function(){this.el.dom.name=this.name}},typeAhead:true,typeAheadDelay:0},{xtype:"combo",fieldLabel:"Location",hiddenName:"location",name:"locationText",mode:"local",store:new Ext.data.JsonStore({fields:["id","name"],root:"rows",idProperty:"id",data:{rows:this.locationList}}),valueField:"id",emptyText:"- Select One -",displayField:"name",triggerAction:"all",allowBlank:false,forceSelection:false,selectOnFocus:true,width:200,listeners:{render:function(){this.el.dom.name=this.name}},typeAhead:true,typeAheadDelay:0},{xtype:"checkbox",hideLabel:true,boxLabel:"User Works from home",name:"blnWorksFromHome",tabIndex:500,listeners:{change:function(){Ext.getCmp("id_cmb_dept").focus()}}},{xtype:"combo",id:"id_cmb_dept",fieldLabel:"Department",hiddenName:"department",name:"departmentText",mode:"local",store:new Ext.data.JsonStore({fields:["id","name"],root:"rows",idProperty:"id",data:{rows:this.departmentList}}),valueField:"id",emptyText:"- Select One -",displayField:"name",triggerAction:"all",allowBlank:false,forceSelection:false,selectOnFocus:true,width:200,hidden:this.isMirroredUser,listeners:{render:function(){this.el.dom.name=this.name},select:function(){var formValues;try{var formObject=eval(formObjectName);formValues=formObject.getForm().getValues()}catch(e){}reportsToComboBox.store.removeAll();reportsToComboBox.setValue("");reportsToComboBox.setRawValue("");reportsToComboBox.clearInvalid();reportsToComboBox.store.baseParams=formValues;reportsToComboBox.store.reload({params:formValues,baseParam:formValues});reportsToComboBox.setDisabled(false)}},onHide:function(){this.getEl().up(".x-form-item").setDisplayed(false)},onShow:function(){this.getEl().up(".x-form-item").setDisplayed(true)},typeAhead:true,typeAheadDelay:0},reportsToComboBox]});Ext.apply(this.initialConfig,{layout:this.layout,style:this.style,bodyBorder:this.bodyBorder,border:this.border,width:this.width,items:this.items});IDXM.ux.userProfile.superclass.initComponent.call(this)}});Ext.reg("idxmUserProfilePanel",IDXM.ux.userProfile);Ext.namespace("IDXM.InternalSystemUserProfile.Action.Edit");IDXM.InternalSystemUserProfile.Action.Edit=function(b){function a(){var c=Ext.getCmp("idxmInternalSystemUserProfilePanelForm"+b.nameSpace).getForm();Ext.getCmp("updateButton"+b.nameSpace).disable();Ext.get(document.body.id).mask("<b> Loading...</b> ","x-mask-loading");c.submit({url:b.urlSubmitUpdateProfile,isRedirect:true,success:function(d,e){uRadixRedirectHandler.redirect(b.urlUpdateProfile+"?systemUserId="+b.userData.sysKey)},failure:function(d,e){g_showStatusBox();Ext.getCmp("updateButton"+b.nameSpace).enable();Ext.get(document.body.id).unmask()}})}Ext.form.Field.prototype.msgTarget="sideDetails";new Ext.Panel({renderTo:b.formPanelDivID,border:false,bodyBorder:false,hideBorders:true,width:850,items:[{xtype:"panel",border:false,cls:"portal-title",html:"Update User Profile"},{xtype:"panel",height:8,border:0,style:"boder:none;",bodyBorder:0,bodyStyle:"border:none",hideBorders:true},{xtype:"idxm.profile.ux.ProfileBar",nameSpace:b.nameSpace,hideAllIcons:true,statusCode:b.userData.userStatus.statusCode,statusName:b.userData.userStatus.statusName,userSubClassCode:b.userData.userSubClassCode,sysKey:b.userData.sysKey,userTypeCode:b.userData.userTypeCode,userClassCode:b.userData.userClassCode},{xtype:"uRadix.form.FormPanel",autoScroll:true,cls:"user-profile-body",id:"idxmInternalSystemUserProfilePanelForm"+b.nameSpace,items:[{xtype:"idxmInternalSystemUserProfilePanel",id:"idxmInternalSystemUserProfilePanel"+b.nameSpace,userData:b.userData,formObjectName:"idxmInternalSystemUserProfile"}]}],buttons:[{id:"cancelButton"+b.nameSpace,text:"CANCEL",ctCls:"support-portal-btn-cancel",handler:function(){document.location=b.urlUpdateProfile+"?systemUserId="+b.userData.sysKey}},{id:"updateButton"+b.nameSpace,text:"UPDATE",ctCls:"support-portal-btn",handler:a}],listeners:{uradix_enterkey:a}});Ext.getCmp("idxmInternalSystemUserProfilePanelForm"+b.nameSpace).getForm().setValues(b.userData);return jsonFunctionObject={}};Ext.namespace("IDXM.ux.idxmInternalSystemUserProfilePanel");IDXM.ux.idxmInternalSystemUserProfilePanel=Ext.extend(Ext.Panel,{initComponent:function(){Ext.apply(this,{layout:"form",style:"padding-left:10px; padding-right:10px;",bodyStyle:"padding-left:15px;",bodyBorder:false,border:false,labelAlign:"top",items:[{xtype:"hidden",name:"sysKey"},{xtype:"textfield",fieldLabel:"System Name",name:"systemName",maxLength:50,width:200,allowBlank:false},{xtype:"textfield",fieldLabel:"System/Process Owner",name:"systemProcessOwner",maxLength:50,width:200,allowBlank:false},{xtype:"textarea",fieldLabel:"System Description",name:"systemDescription",maxLength:200,width:200}]});Ext.apply(this.initialConfig,{layout:this.layout,style:this.style,bodyBorder:this.bodyBorder,border:this.border,width:this.width,items:this.items});IDXM.ux.idxmInternalSystemUserProfilePanel.superclass.initComponent.call(this)}});Ext.reg("idxmInternalSystemUserProfilePanel",IDXM.ux.idxmInternalSystemUserProfilePanel);Ext.namespace("IDXM.phoneAddressFieldsPanelNoTitle");IDXM.phoneAddressFieldsPanelNoTitle=Ext.extend(Ext.Panel,{initComponent:function(){var b=(this.isPhoneRequired!=undefined)?this.isPhoneRequired:true;this.phoneTypes=[{id:"",name:"- Select One -"}].concat(this.phoneTypes);this.phoneDeletedJson={id:"phoneDeleted"+this.dynamicID,name:"phoneDeleted"+this.dynamicID,value:false};this.phoneIdJson={id:"phoneId"+this.dynamicID,name:"phoneId"+this.dynamicID};this.phoneAddressJson={hideLabel:true,labelSeparator:"",id:"phoneAddress"+this.dynamicID,name:"phoneAddress"+this.dynamicID,maxLength:256,width:200,msgTarget:"phoneAddressTarget"+this.dynamicID,msgDisplay:"",vtype:"phone",validationEvent:"blur",allowBlank:true};this.phoneExtensionJson={hideLabel:true,labelSeparator:"",id:"phoneExtension"+this.dynamicID,name:"phoneExtension"+this.dynamicID,maxLength:10,maxLengthText:"The maximum length for phone extension is 10",width:50,msgTarget:"phoneAddressTarget"+this.dynamicID,msgDisplay:"",vtype:"phoneExt",validationEvent:"blur",allowBlank:true};this.phoneTypeJson={hideLabel:true,width:225,labelSeparator:"",hiddenId:"phoneTypeCode"+this.dynamicID,hiddenName:"phoneTypeCode"+this.dynamicID,id:"phoneTypeText"+this.dynamicID,name:"phoneTypeText"+this.dynamicID,msgTarget:"phoneAddressTarget"+this.dynamicID,msgDisplay:"",mode:"local",store:new Ext.data.JsonStore({fields:["id","name"],root:"rows",idProperty:"id",data:{rows:this.phoneTypes}}),valueField:"id",emptyText:"- Select One -",displayField:"name",triggerAction:"all",editable:false,allowBlank:true,forceSelection:false,selectOnFocus:true,listeners:{render:function(){this.el.dom.name=this.name},select:function(){if(this.getValue()=="Other"){c.enable();c.show();c.cascade(function(d){if(d.isFormField){d.enable();d.show()}})}else{c.enable();c.disable();c.hide();c.cascade(function(d){if(d.isFormField){d.disable();d.hide()}})}}}};if(this.phoneContact!=undefined&&this.phoneContact.value!=undefined){this.phoneIdJson.value=this.phoneContact.id;this.phoneAddressJson.value=this.phoneContact.value;this.phoneExtensionJson.value=this.phoneContact.extention;this.phoneTypeJson.value=this.phoneContact.type;this.phoneTypeJson.hiddenValue=this.phoneContact.type}this.phoneDeletedObject=new Ext.form.Hidden(this.phoneDeletedJson);this.phoneIdObject=new Ext.form.Hidden(this.phoneIdJson);this.phoneAddressObject=new Ext.form.TextField(this.phoneAddressJson);this.phoneExtensionObject=new Ext.form.TextField(this.phoneExtensionJson);this.phoneTypeObject=new Ext.form.ComboBox(this.phoneTypeJson);this.phoneTypeOther=new Ext.form.TextField({hideLabel:true,width:120,labelSeparator:"",disabled:true,hidden:true,id:"phoneOther"+this.dynamicID,name:"phoneOther"+this.dynamicID,maxLength:20,msgTarget:"phoneAddressTarget"+this.dynamicID,msgDisplay:"",allowBlank:true});this.phoneTypeOtherPanel=new Ext.Panel({layout:"form",width:133,style:"padding-right:5px;",hidden:true,disabled:true,border:false,bodyBorder:false,hideBorders:true,items:[this.phoneTypeOther]});var a=this.phoneTypeOther;var c=this.phoneTypeOtherPanel;if(typeof(this.allowDelete)=="undefined"){this.allowDelete=true}if(this.allowDelete){this.interiorEraseButton=new Ext.Button({arrayID:this.dynamicID,text:"X",ctCls:"support-portal-btn"});this.EraseButtonPanel=new Ext.Panel({layout:"form",width:30,cls:"portal-plain-panel",border:false,bodyBorder:false,hideBorders:true,items:[this.interiorEraseButton]})}else{this.interiorEraseButton=new Ext.Button({arrayID:this.dynamicID,text:"X",ctCls:"support-portal-btn"});this.EraseButtonPanel=new Ext.Panel({layout:"form",width:30,cls:"portal-plain-panel",border:false,bodyBorder:false,hideBorders:true,hidden:true,items:[this.interiorEraseButton]})}this.interiorFieldButtonPanel=new Ext.Panel({layout:"column",cls:"portal-plain-panel",border:false,bodyBorder:false,hideBorders:true,items:[{layout:"form",width:205,cls:"portal-plain-panel",border:false,bodyBorder:false,hideBorders:true,items:[this.phoneDeletedObject,this.phoneIdObject,this.phoneAddressObject]},{layout:"form",width:10,style:"padding-top:5px;",cls:"portal-plain-panel",border:false,bodyBorder:false,hideBorders:true,html:"X"},{layout:"form",width:55,style:"padding-right:5px;",cls:"portal-plain-panel",border:false,bodyBorder:false,hideBorders:true,items:[this.phoneExtensionObject]},{layout:"form",width:230,style:"padding-right:5px;",cls:"portal-plain-panel",border:false,bodyBorder:false,hideBorders:true,items:[this.phoneTypeObject]},this.phoneTypeOtherPanel,this.EraseButtonPanel,{id:"phoneAddressTarget"+this.dynamicID,layout:"form",cls:"invalid-target-field-panel",style:"padding-top:5px;",border:false,bodyBorder:false,hideBorders:true}]});Ext.apply(this,{layout:"form",bodyBorder:false,border:false,hideBorders:true,ctCls:"portal-plain-panel",items:[this.interiorFieldButtonPanel]});Ext.apply(this.initialConfig,{layout:this.layout,style:this.style,ctCls:this.ctCls,bodyBorder:this.bodyBorder,border:this.border,width:this.width,items:this.items});IDXM.phoneAddressFieldsPanelNoTitle.superclass.initComponent.call(this)}});Ext.reg("phoneAddressFieldsPanelNoTitle",IDXM.phoneAddressFieldsPanelNoTitle);Ext.namespace("IDXM.phoneMultiplePanel");IDXM.phoneMultiplePanel=Ext.extend(Ext.Panel,{initComponent:function(){var b=this.id;var a=(this.isPhoneRequired!=undefined)?this.isPhoneRequired:true;var d=[{xtype:"label",text:(a)?"* Phone(s):":"Phone(s):",cls:(a)?"supportPortalFormLabelBold":"supportPortalFormLabel"},{xtype:"panel",border:false,bodyBorder:false,hideBorders:true,height:5}];if(this.fieldArray.length){var e=0;for(var c=0;c<this.fieldArray.length;c++){e+=1;if(c){this.fieldArray[c]=new IDXM.phoneAddressFieldsPanelNoTitle({id:b+"dynamicID"+c,dynamicID:c,phoneContact:this.fieldArray[c],phoneTypes:this.phoneTypes,isPhoneRequired:a})}else{this.fieldArray[c]=new IDXM.phoneAddressFieldsPanelNoTitle({id:b+"dynamicID"+c,dynamicID:c,allowDelete:false,phoneContact:this.fieldArray[c],phoneTypes:this.phoneTypes,isPhoneRequired:a})}d[d.length]=this.fieldArray[c]}if(e<this.maxTypeRows){this.fieldArray[this.fieldArray.length]=new IDXM.phoneAddressFieldsPanelNoTitle({id:b+"dynamicID"+this.fieldArray.length,dynamicID:this.fieldArray.length,phoneTypes:this.phoneTypes,isPhoneRequired:a});d[d.length]=this.fieldArray[this.fieldArray.length-1]}}else{this.fieldArray[0]=new IDXM.phoneAddressFieldsPanelNoTitle({id:b+"dynamicID0",dynamicID:0,allowDelete:false,phoneTypes:this.phoneTypes,isPhoneRequired:a});this.fieldArray[1]=new IDXM.phoneAddressFieldsPanelNoTitle({id:b+"dynamicID1",dynamicID:1,phoneTypes:this.phoneTypes,isPhoneRequired:a});d[d.length]=this.fieldArray[0];d[d.length]=this.fieldArray[1]}Ext.apply(this,{layout:"form",items:d});Ext.apply(this.initialConfig,{id:this.id,items:this.items});IDXM.phoneMultiplePanel.superclass.initComponent.call(this)}});Ext.reg("phoneMultiplePanel",IDXM.phoneMultiplePanel);Ext.namespace("IDXM.phonesPanel");IDXM.phonesPanel=Ext.extend(Ext.Panel,{initComponent:function(d){if(!this.maxTypeRows){this.maxTypeRows=5}var j=this.id;var c=this.phoneTypes;var b=(this.isPhoneRequired!=undefined)?this.isPhoneRequired:true;var h=this.maxTypeRows;var a=new Ext.form.Hidden({name:"phoneContactCounter"});var g;var l;function k(o){var r=true;var p=0;for(i=0;i<g.length;i++){if(g[i]!=null){p+=1;var n=g[i].phoneAddressObject.getRawValue();if(n.length<=0){r=false;break}var n=g[i].phoneTypeObject.getRawValue();if(n.length<=0){r=false;break}var n=g[i].phoneTypeOther;if(n&&!n.disabled){n=n.getRawValue();if(n.length<=0){r=false;break}}}}if(r&&p<h){var m=o;var q=new IDXM.phoneAddressFieldsPanelNoTitle({id:"phoneMultiplePanel"+j+"dynamicID"+g.length,dynamicID:g.length,phoneTypes:c,isPhoneRequired:b});g[g.length]=q;m.add(q);f(m);m.doLayout()}return r}function e(){var m=true;for(i=1;i<g.length;i++){if(g[i]!=null){if(g[i].phoneDeletedObject.getValue()!=undefined&&g[i].phoneDeletedObject.getValue()!="true"){if((g[i].phoneAddressObject.getValue()!=undefined&&g[i].phoneAddressObject.getValue().trim()!="")||(g[i].phoneTypeObject.getValue()!=undefined&&g[i].phoneTypeObject.getValue().trim()!="")){m=false}}}}g[0].EraseButtonPanel.setVisible(m)}function f(o){var m=o;for(i=0;i<g.length;i++){if(g[i]!=null){g[i].phoneAddressObject.on("blur",function(){k(m);if(!b){e()}});g[i].phoneTypeObject.on("blur",function(){k(m);if(!b){e()}});g[i].phoneTypeOther.on("blur",function(){k(m);if(!b){e()}});var n=g[i].interiorFieldButtonPanel;try{if(i){g[i].interiorEraseButton.on("click",function(r,q,s){var t=this.arrayID;Ext.getCmp("phoneMultiplePanel"+j+"dynamicID"+this.arrayID).cascade(function(u){if(u.isFormField){if(u.name=="phoneDeleted"+t){u.setValue("true")}}});if(!b){e()}Ext.getCmp("phoneMultiplePanel"+j+"dynamicID"+this.arrayID).setVisible(false);g[this.arrayID]=null})}else{g[i].interiorEraseButton.on("click",function(r,q,s){var t=this.arrayID;g[this.arrayID].phoneAddressObject.setValue("");g[this.arrayID].phoneTypeObject.setValue("");g[this.arrayID].phoneTypeOther.setValue("")})}}catch(p){}}}a.setValue(g.length-1)}if(this.loadArray&&this.loadArray.length){g=this.loadArray;l=new IDXM.phoneMultiplePanel({id:"phoneMultiplePanel"+j,fieldArray:this.loadArray,phoneTypes:this.phoneTypes,maxTypeRows:h,isPhoneRequired:(this.isPhoneRequired!=undefined)?this.isPhoneRequired:true})}else{g=new Array();l=new IDXM.phoneMultiplePanel({id:"phoneMultiplePanel"+j,fieldArray:g,phoneTypes:this.phoneTypes,isPhoneRequired:(this.isPhoneRequired!=undefined)?this.isPhoneRequired:true})}f(l);if(!b){e()}Ext.apply(this,{layout:"form",bodyBorder:false,border:false,ctCls:"portal-plain-panel",hideBorders:true,items:[l,a]});Ext.apply(this.initialConfig,{layout:this.layout,style:this.style,bodyBorder:this.bodyBorder,border:this.border,ctCls:"portal-plain-panel",width:this.width,items:this.items});IDXM.phonesPanel.superclass.initComponent.call(this)}});Ext.reg("phonesPanel",IDXM.phonesPanel);Ext.namespace("IDXM.UserProfile.Utilities.Contacts.ValidateRowContacts");IDXM.UserProfile.Utilities.Contacts.ValidateRowContacts=function(row,startIndex,arrayOfRows,contactType,formPanelID,booleanVariableTobeSet){var startIndex=startIndex;var arrayOfRows=arrayOfRows;var endIndex=arrayOfRows.length;var rowTypeCode;var isRowValid=true;if(eval("row."+contactType+"TypeCode[0].getValue()")=="Other"){rowTypeCode=eval("row."+contactType+"Other[0].getValue()")}else{rowTypeCode=eval("row."+contactType+"TypeCode[0].getValue()")}if(arrayOfRows[startIndex+1]){var i;var field1;var field2;var currentTypeCode;for(i=startIndex+1;i<endIndex;i++){if(eval("arrayOfRows[i]."+contactType+"TypeCode[0].getValue()")=="Other"){currentTypeCode=eval("arrayOfRows[i]."+contactType+"Other[0].getValue()")}else{currentTypeCode=eval("arrayOfRows[i]."+contactType+"TypeCode[0].getValue()")}var formObj=Ext.getCmp(formPanelID).getForm();var formPanel=Ext.getCmp(formPanelID);if(rowTypeCode.toLowerCase().replace(/[^a-zA-Z 0-9]+/g,"").trim()==currentTypeCode.toLowerCase().replace(/[^a-zA-Z 0-9]+/g,"").trim()){if((rowTypeCode.trim()!="")&&(currentTypeCode.trim()!="")){isRowValid=false;var field1Array=formPanel.find("name",eval("row."+contactType+"TypeCode[0].name"));field1=field1Array[0];var field2Array=formPanel.find("name",eval("arrayOfRows[i]."+contactType+"TypeCode[0].name"));field2=field2Array[0]}}}if(field1){eval(booleanVariableTobeSet+"=false;");field1.markInvalid("Duplicate Contact Type")}if(field2){eval(booleanVariableTobeSet+"=false;");field2.markInvalid("Duplicate Contact Type")}}if(startIndex<=endIndex){if(arrayOfRows[startIndex+1]){IDXM.UserProfile.Utilities.Contacts.ValidateRowContacts(arrayOfRows[startIndex+1],startIndex+1,arrayOfRows,contactType,formPanelID,booleanVariableTobeSet)}}return isRowValid};Ext.namespace("IDXM.UserProfile.Utilities.Contacts.ValidateEmailContacts");IDXM.UserProfile.Utilities.Contacts.ValidateEmailContacts=function(config){var emailArray=new Array();var hasPrimary=false;var validEmails=true;var blnOneEmailEntered=false;for(var i=0;i<=config.contactCounter;i++){var emailDeleted=Ext.getCmp(config.formId).find("name","emailDeleted"+i);var emailAddress=Ext.getCmp(config.formId).find("name","emailAddress"+i);var emailTypeCode=Ext.getCmp(config.formId).find("hiddenName","emailTypeCode"+i);var emailOther=Ext.getCmp(config.formId).find("name","emailOther"+i);if(emailTypeCode[0].getValue()=="Primary"){hasPrimary=true}if(emailDeleted[0].getValue()!="true"){if(emailAddress[0].getValue()||emailTypeCode[0].getValue()){blnOneEmailEntered=true;if((!emailAddress[0].validate())||(!emailTypeCode[0].validate())){validEmails=false}else{if(emailTypeCode[0].getValue()=="Other"){if(!emailOther[0].validate()){validEmails=false}}}}if(validEmails){if((!emailAddress[0].getValue().trim())&&(emailTypeCode[0].getValue().trim())){validEmails=false;emailAddress[0].markInvalid("Email is Required.")}else{if((emailAddress[0].getValue().trim())&&(!emailTypeCode[0].getValue().trim())){validEmails=false;emailTypeCode[0].markInvalid("Email Type is Required.")}else{if(emailTypeCode[0].getValue()=="Other"){if(!emailOther[0].getValue().trim()){validEmails=false;emailOther[0].markInvalid("Email Other Type is Required.")}else{if(emailOther[0].getValue().trim().toLowerCase()=="account notification"){validEmails=false;emailOther[0].markInvalid("Email Other Type value cannot be Account Notification.")}}}}}}emailArray[emailArray.length]={emailDeleted:emailDeleted,emailAddress:emailAddress,emailTypeCode:emailTypeCode,emailOther:emailOther}}}if(validEmails){if(blnOneEmailEntered){if(hasPrimary){eval(config.booleanVariableTobeSet+"= true");IDXM.UserProfile.Utilities.Contacts.ValidateRowContacts(emailArray[0],0,emailArray,"email",config.formId,config.booleanVariableTobeSet);return eval(config.booleanVariableTobeSet)}else{emailArray[0].emailTypeCode[0].markInvalid("Please enter Primary Email Address");return false}}else{emailArray[0].emailAddress[0].markInvalid("Please enter an Email Address");return false}}else{return validEmails}};Ext.namespace("IDXM.UserProfile.Utilities.Contacts.ValidatePhoneContacts");IDXM.UserProfile.Utilities.Contacts.ValidatePhoneContacts=function(config){var phoneArray=new Array();var hasPrimary=false;var validPhones=true;var blnOnePhoneEntered=false;var isPhoneRequired=(config.isPhoneRequired)?true:false;for(var i=0;i<=config.contactCounter;i++){var phoneDeleted=Ext.getCmp(config.formId).find("name","phoneDeleted"+i);var phoneAddress=Ext.getCmp(config.formId).find("name","phoneAddress"+i);var phoneExtension=Ext.getCmp(config.formId).find("name","phoneExtension"+i);var phoneTypeCode=Ext.getCmp(config.formId).find("hiddenName","phoneTypeCode"+i);var phoneOther=Ext.getCmp(config.formId).find("name","phoneOther"+i);if(phoneTypeCode[0].getValue()=="Primary"){hasPrimary=true}if(phoneDeleted[0].getValue()!="true"){if(phoneAddress[0].getValue()||phoneTypeCode[0].getValue()||phoneExtension[0].getValue()){blnOnePhoneEntered=true;if((!phoneAddress[0].validate())||(!phoneTypeCode[0].validate())||(!phoneExtension[0].validate())){validPhones=false}else{if(phoneTypeCode[0].getValue()=="Other"){if(!phoneOther[0].validate()){validPhones=false}}}}if(validPhones){if((!phoneAddress[0].getValue().trim())&&(phoneTypeCode[0].getValue().trim())){validPhones=false;phoneAddress[0].markInvalid("Phone Number is Required.")}else{if((phoneAddress[0].getValue().trim())&&(!phoneTypeCode[0].getValue().trim())){validPhones=false;phoneTypeCode[0].markInvalid("Phone Type is Required.")}else{if((!phoneAddress[0].getValue().trim())&&(!phoneTypeCode[0].getValue().trim())&&phoneExtension[0].getValue().trim()){validPhones=false;phoneAddress[0].markInvalid("Phone Number is Required.")}else{if(phoneTypeCode[0].getValue()=="Other"){if(!phoneOther[0].getValue().trim()){validPhones=false;phoneOther[0].markInvalid("Phone Other Type is Required.")}else{if(phoneOther[0].getValue().trim().toLowerCase()=="account notification"){validPhones=false;phoneOther[0].markInvalid("Phone Other Type value cannot be Account Notification.")}}}}}}}phoneArray[phoneArray.length]={phoneDeleted:phoneDeleted,phoneAddress:phoneAddress,phoneTypeCode:phoneTypeCode,phoneOther:phoneOther}}}if(validPhones){if(blnOnePhoneEntered){if(hasPrimary){eval(config.booleanVariableTobeSet+"= true");IDXM.UserProfile.Utilities.Contacts.ValidateRowContacts(phoneArray[0],0,phoneArray,"phone",config.formId,config.booleanVariableTobeSet);return eval(config.booleanVariableTobeSet)}else{phoneArray[0].phoneTypeCode[0].markInvalid("Please enter Primary Phone Number");return false}}else{if(isPhoneRequired){phoneArray[0].phoneAddress[0].markInvalid("Please enter a Phone Number");return false}else{return true}}}else{return validPhones}};Ext.namespace("IDXM.UserProfile.Utilities.Contacts.ValidateFaxContacts");IDXM.UserProfile.Utilities.Contacts.ValidateFaxContacts=function(config){var faxArray=new Array();var hasPrimary=false;var validFaxes=true;var blnOneFaxEnter=false;for(var i=0;i<=config.contactCounter;i++){var faxDeleted=Ext.getCmp(config.formId).find("name","faxDeleted"+i);var faxAddress=Ext.getCmp(config.formId).find("name","faxAddress"+i);var faxTypeCode=Ext.getCmp(config.formId).find("hiddenName","faxTypeCode"+i);var faxOther=Ext.getCmp(config.formId).find("name","faxOther"+i);if(faxTypeCode[0].getValue()=="Primary"){hasPrimary=true}if(faxDeleted[0].getValue()!="true"){if(faxAddress[0].getValue()||faxTypeCode[0].getValue()){blnOneFaxEnter=true;if((!faxAddress[0].validate())||(!faxTypeCode[0].validate())){validFaxes=false}else{if(faxTypeCode[0].getValue()=="Other"){if(!faxOther[0].validate()){validFaxes=false}}}if(validFaxes){if((!faxAddress[0].getValue().trim())&&(faxTypeCode[0].getValue().trim())){validFaxes=false;faxAddress[0].markInvalid("Fax Number is Required.")}else{if((faxAddress[0].getValue().trim())&&(!faxTypeCode[0].getValue().trim())){validFaxes=false;faxTypeCode[0].markInvalid("Fax Type is Required.")}else{if(faxTypeCode[0].getValue()=="Other"){if(!faxOther[0].getValue().trim()){validFaxes=false;faxOther[0].markInvalid("Fax Other Type is Required.")}else{if(faxOther[0].getValue().trim().toLowerCase()=="account notification"){validFaxes=false;faxOther[0].markInvalid("Fax Other Type value cannot be Account Notification.")}}}}}}}faxArray[faxArray.length]={faxDeleted:faxDeleted,faxAddress:faxAddress,faxTypeCode:faxTypeCode,faxOther:faxOther}}}if(validFaxes){if(blnOneFaxEnter){if(hasPrimary){eval(config.booleanVariableTobeSet+"= true");IDXM.UserProfile.Utilities.Contacts.ValidateRowContacts(faxArray[0],0,faxArray,"fax",config.formId,config.booleanVariableTobeSet);return eval(config.booleanVariableTobeSet)}else{faxArray[0].faxTypeCode[0].markInvalid("Please enter Primary Fax Number");return false}}else{return true}}else{return validFaxes}};Ext.namespace("idxm.profile.demographics.client.exception.EditController");idxm.profile.demographics.client.exception.EditController=function(d){Ext.form.Field.prototype.msgTarget="sideDetails";var a=false;var g=false;if(d.userData.userClassCode==IDXM_USER_CLASS_CLIENT){g=true;if(d.userData.phone&&d.userData.phone.length>0){if((d.userData.userStatus.statusCode!=IDXM_USER_STATUS_CODE_MAP.TERMINATED)){a=true}}}var l={};l.email0=(userData.accountNotificationEmailIndicator==""||userData.accountNotificationEmailIndicator=="off")?"Primary":"Account Notification";l.email1="Alternate";l.phone0="Primary";l.phone1="Alternate";l.fax0="Primary";l.fax1="Alternate";function h(s){var r=s.email;var p=s.phone;var n=s.fax;for(var m=0;m<=1;m++){try{if(r[m].type=="Account Notification"||r[m].type=="Primary"){Ext.getCmp("emailAddress0").setValue(r[m].value);Ext.getCmp("emailId0").setValue(r[m].id)}else{Ext.getCmp("emailAddress1").setValue(r[m].value);Ext.getCmp("emailId1").setValue(r[m].id)}}catch(q){}try{if(p[m].type=="Primary"){Ext.getCmp("phoneAddress0").setValue(p[m].value);Ext.getCmp("phoneId0").setValue(p[m].id);Ext.getCmp("phoneExtension0").setValue(p[m].extention)}else{Ext.getCmp("phoneAddress1").setValue(p[m].value);Ext.getCmp("phoneId1").setValue(p[m].id);Ext.getCmp("phoneExtension1").setValue(p[m].extention)}}catch(q){}try{if(n[m].type=="Primary"){Ext.getCmp("faxAddress0").setValue(n[m].value);Ext.getCmp("faxId0").setValue(n[m].id)}else{Ext.getCmp("faxAddress1").setValue(n[m].value);Ext.getCmp("faxId1").setValue(n[m].id)}}catch(q){}try{if(g&&r[m].adviceNotification){Ext.getCmp("AdviceNotificationCheckBox").setValue("emailAdviceSheetNotification"+m)}}catch(q){}try{if(g&&n[m].adviceNotification){Ext.getCmp("AdviceNotificationCheckBox").setValue("faxAdviceSheetNotification"+m)}}catch(q){}}}function f(){var m=Ext.getCmp("idxmExternalUserProfilePanelForm"+d.nameSpace).getForm();g_hideStatusBox();m.submit({url:d.urlSubmitUpdateProfile,clientValidation:true,isRedirect:true,success:function(n,o){uRadixRedirectHandler.redirect(d.urlUpdateProfile+"?systemUserId="+d.userData.sysKey)},failure:function(n,o){g_showStatusBox();Ext.getCmp("updateButton"+d.nameSpace).enable();Ext.get(document.body.id).unmask()}})}function k(){var p=Ext.getCmp("idxmExternalUserProfilePanelForm"+d.nameSpace).getForm();var q=p.getValues();var m=0,u=0,s=0;for(var n=0;n<=1;n++){try{if(!Ext.isEmpty(Ext.getCmp("emailAddress"+n).getValue())){m++;Ext.getCmp("emailDeleted"+n).setValue("false");Ext.getCmp("emailTypeCode"+n).setValue(l["email"+n])}else{if(!Ext.isEmpty(Ext.getCmp("emailId"+n).getValue())){Ext.getCmp("emailDeleted"+n).setValue("true")}}}catch(r){}try{if(!Ext.isEmpty(Ext.getCmp("phoneAddress"+n).getValue())){s++;Ext.getCmp("phoneDeleted"+n).setValue("false");Ext.getCmp("phoneTypeCode"+n).setValue(l["phone"+n])}else{if(!Ext.isEmpty(Ext.getCmp("phoneId"+n).getValue())){Ext.getCmp("phoneDeleted"+n).setValue("true")}}}catch(r){}try{if(!Ext.isEmpty(Ext.getCmp("faxAddress"+n).getValue())){u++;Ext.getCmp("faxDeleted"+n).setValue("false");Ext.getCmp("faxTypeCode"+n).setValue(l["fax"+n])}else{if(!Ext.isEmpty(Ext.getCmp("faxId"+n).getValue())){Ext.getCmp("faxDeleted"+n).setValue("true")}}}catch(r){}Ext.getCmp("emailAdviceSheetNotification"+n).setValue("");Ext.getCmp("faxAdviceSheetNotification"+n).setValue("")}Ext.getCmp("emailContactCounter").setValue(m);Ext.getCmp("phoneContactCounter").setValue(s);Ext.getCmp("faxContactCounter").setValue(u);if(!Ext.isEmpty(p.getValues().AdviceNotificationCheckBox)){var o=p.getValues().AdviceNotificationCheckBox;Ext.getCmp(o).setValue("true");var t=o.charAt(o.length-1);if(o.startsWith("email")){if(Ext.isEmpty(Ext.getCmp("emailAddress"+t).getValue())){IDXM.UserProfile.PopUp.AdviceNotificationOption({});return}}else{if(o.startsWith("fax")){if(Ext.isEmpty(Ext.getCmp("faxAddress"+t).getValue())){IDXM.UserProfile.PopUp.AdviceNotificationOption({});return}}}}Ext.getCmp("updateButton"+d.nameSpace).disable();Ext.get(document.body.id).mask("<b> Loading...</b> ","x-mask-loading");f()}var j={};if(g){j=new Ext.form.Radio({hideLabel:true,boxLabel:"Let User Select Advice Notification",name:"AdviceNotificationCheckBox",inputValue:"",value:false,ctCls:"no-advice-sheet-label-txt",listeners:{check:function(n,m){if(m){n.setValue(true);n.setRawValue("")}}}})}else{j={xtype:"panel",border:false,bodyBorder:false,hideBorders:true}}new Ext.Panel({renderTo:d.formPanelDivID,border:false,bodyBorder:false,hideBorders:true,width:(d.userData.userClassCode==IDXM_USER_CLASS_CLIENT)?1000:850,items:[{xtype:"panel",border:false,cls:"portal-title",html:"Update User Profile"},{xtype:"panel",height:8,border:0,style:"boder:none;",bodyBorder:0,bodyStyle:"border:none",hideBorders:true},{xtype:"idxm.profile.ux.ProfileBar",nameSpace:d.nameSpace,hideAllIcons:true,statusCode:d.userData.userStatus.statusCode,statusName:d.userData.userStatus.statusName,userSubClassCode:d.userData.userSubClassCode,mirrorUserURL:d.mirrorUserURL,sysKey:d.userData.sysKey,userTypeCode:d.userData.userTypeCode,userClassCode:d.userData.userClassCode},{xtype:"uRadix.form.FormPanel",autoScroll:true,cls:"user-profile-body",id:"idxmExternalUserProfilePanelForm"+d.nameSpace,labelAlign:"top",items:[{xtype:"idxmExternalUserProfilePanel",id:"idxmExternalUserProfilePanel"+d.nameSpace,userData:d.userData,formObjectName:"userProfileAction"+d.nameSpace},{xtype:"textfield",fieldLabel:(userData.accountNotificationEmailIndicator==""||userData.accountNotificationEmailIndicator=="off")?"Primary Email":"Account Notification Email",allowBlank:false,id:"emailAddress0",name:"emailAddress0",vtype:"email",maxLength:256,width:200},{xtype:"hidden",id:"emailTypeCode0",name:"emailTypeCode0",value:(userData.accountNotificationEmailIndicator==""||userData.accountNotificationEmailIndicator=="off")?"Primary":"Account Notification"},{xtype:"hidden",id:"emailId0",name:"emailId0"},{xtype:"hidden",id:"emailDeleted0",name:"emailDeleted0",value:"false"},{xtype:"radio",id:"AdviceNotificationCheckBox",hideLabel:true,boxLabel:"Use For Advice Notification",name:"AdviceNotificationCheckBox",inputValue:"emailAdviceSheetNotification0",value:false,ctCls:"advice-box-label",style:"margin-left:15px;",listeners:{check:function(n,m){if(m){n.setValue(true);n.setRawValue("emailAdviceSheetNotification0")}}},hidden:g?false:true},{xtype:"textfield",fieldLabel:"Alternate Email",allowBlank:true,id:"emailAddress1",name:"emailAddress1",vtype:"email",maxLength:256,width:200},{xtype:"hidden",id:"emailTypeCode1",name:"emailTypeCode1"},{xtype:"hidden",id:"emailId1",name:"emailId1"},{xtype:"hidden",id:"emailDeleted1",name:"emailDeleted1",value:"false"},{xtype:"radio",hideLabel:true,boxLabel:"Use For Advice Notification",name:"AdviceNotificationCheckBox",inputValue:"emailAdviceSheetNotification1",value:false,ctCls:"advice-box-label",style:"margin-left:15px;",listeners:{check:function(n,m){if(m){n.setValue(true);n.setRawValue("emailAdviceSheetNotification1")}}},hidden:g?false:true},{xtype:"hidden",id:"emailContactCounter",name:"emailContactCounter",value:"1"},{xtype:"panel",width:900,layout:"column",border:false,items:[{xtype:"panel",width:200,border:false,layout:"form",items:[{xtype:"textfield",fieldLabel:"Primary Phone",allowBlank:true,id:"phoneAddress0",name:"phoneAddress0",maxLength:20,width:200,msgTarget:"phoneAddressTarget0"},{xtype:"hidden",id:"phoneTypeCode0",name:"phoneTypeCode0"}]},{layout:"form",width:15,style:"padding-top:22px; padding-left:5px;",cls:"portal-plain-panel",border:false,html:"X"},{xtype:"panel",width:50,border:false,layout:"form",items:[{xtype:"textfield",fieldLabel:"&nbsp;",labelSeparator:" ",allowBlank:true,id:"phoneExtension0",name:"phoneExtension0",maxLength:10,width:50,msgTarget:"phoneAddressTarget0",msgLengthText:"The maximum length for phone extension is 10"}]},{id:"phoneAddressTarget0",layout:"form",cls:"invalid-target-field-panel",style:"padding-top:22px;padding-left:10px;",border:false},{xtype:"hidden",id:"phoneId0",name:"phoneId0"},{xtype:"hidden",id:"phoneDeleted0",name:"phoneDeleted0",value:"false"},{xtype:"hidden",id:"phoneContactCounter",name:"phoneContactCounter",value:"1"}]},{xtype:"panel",width:900,layout:"column",border:false,items:[{xtype:"panel",width:200,border:false,layout:"form",items:[{xtype:"textfield",fieldLabel:"Alternate Phone",allowBlank:true,id:"phoneAddress1",name:"phoneAddress1",maxLength:20,width:200,msgTarget:"phoneAddressTarget1"},{xtype:"hidden",id:"phoneTypeCode1",name:"phoneTypeCode1"}]},{layout:"form",width:15,style:"padding-top:22px; padding-left:5px;",cls:"portal-plain-panel",border:false,html:"X"},{xtype:"panel",width:50,border:false,layout:"form",items:[{xtype:"textfield",fieldLabel:"&nbsp;",labelSeparator:" ",allowBlank:true,id:"phoneExtension1",name:"phoneExtension1",maxLength:10,width:50,msgTarget:"phoneAddressTarget1",msgLengthText:"The maximum length for phone extension is 10"}]},{id:"phoneAddressTarget1",layout:"form",cls:"invalid-target-field-panel",style:"padding-top:22px;padding-left:10px;",border:false},{xtype:"hidden",id:"phoneId1",name:"phoneId1"},{xtype:"hidden",id:"phoneDeleted1",name:"phoneDeleted1",value:"false"}]},{xtype:"textfield",fieldLabel:"Primary Fax",allowBlank:true,id:"faxAddress0",name:"faxAddress0",maxLength:20,width:200},{xtype:"hidden",id:"faxTypeCode0",name:"faxTypeCode0"},{xtype:"hidden",id:"faxId0",name:"faxId0"},{xtype:"hidden",id:"faxDeleted0",name:"faxDeleted0",value:"false"},{xtype:"radio",hideLabel:true,boxLabel:"Use For Advice Notification",name:"AdviceNotificationCheckBox",inputValue:"faxAdviceSheetNotification0",value:false,ctCls:"advice-box-label",style:"margin-left:15px;",listeners:{check:function(n,m){if(m){n.setValue(true);n.setRawValue("faxAdviceSheetNotification0")}}},hidden:g?false:true},{xtype:"textfield",fieldLabel:"Alternate Fax",allowBlank:true,id:"faxAddress1",name:"faxAddress1",maxLength:20,width:200},{xtype:"hidden",id:"faxTypeCode1",name:"faxTypeCode1"},{xtype:"hidden",id:"faxId1",name:"faxId1"},{xtype:"hidden",id:"faxDeleted1",name:"faxDeleted1",value:"false"},{xtype:"radio",hideLabel:true,boxLabel:"Use For Advice Notification",name:"AdviceNotificationCheckBox",inputValue:"faxAdviceSheetNotification1",value:false,ctCls:"advice-box-label",style:"margin-left:15px;",listeners:{check:function(n,m){if(m){n.setValue(true);n.setRawValue("faxAdviceSheetNotification1")}}},hidden:g?false:true},{xtype:"hidden",id:"faxContactCounter",name:"faxContactCounter",value:"1"},{xtype:"hidden",id:"emailAdviceSheetNotification0",name:"emailAdviceSheetNotification0",value:""},{xtype:"hidden",id:"emailAdviceSheetNotification1",name:"emailAdviceSheetNotification1",value:""},{xtype:"hidden",id:"faxAdviceSheetNotification0",name:"faxAdviceSheetNotification0",value:""},{xtype:"hidden",id:"faxAdviceSheetNotification1",name:"faxAdviceSheetNotification1",value:""},j]}],buttons:[{id:"cancelButton"+d.nameSpace,text:"CANCEL",ctCls:"support-portal-btn-cancel",handler:function(){if(b){idxm.core.popups.Cancel({doCancelFunction:e.doCancel,noCancelFunction:e.noCancel})}else{document.location=d.urlUpdateProfile+"?systemUserId="+d.userData.sysKey}}},{id:"updateButton"+d.nameSpace,text:"UPDATE",ctCls:"support-portal-btn",handler:k}],listeners:{uradix_enterkey:k}});var c=Ext.getCmp("idxmExternalUserProfilePanelForm"+d.nameSpace);var b=false;c.getForm().items.each(function(m){m.on("change",function(){b=true})});Ext.getCmp("idxmExternalUserProfilePanelForm"+d.nameSpace).getForm().setValues(d.userData);var e={doCancel:function(){document.location=d.urlUpdateProfile+"?systemUserId="+d.userData.sysKey},noCancel:function(){}};h(d.userData);return e};Ext.namespace("idxm.profile.demographics.provider.exception.EditController");idxm.profile.demographics.provider.exception.EditController=function(c){Ext.form.Field.prototype.msgTarget="sideDetails";var a=false;var g=false;var k={};k.email0="Primary";k.email1="Alternate";k.phone0="Primary";k.phone1="Alternate";k.fax0="Primary";k.fax1="Alternate";function h(r){var q=r.email;var n=r.phone;var m=r.fax;for(var l=0;l<=1;l++){try{if(q[l].type=="Primary"){Ext.getCmp("emailAddress0").setValue(q[l].value);Ext.getCmp("emailId0").setValue(q[l].id)}else{Ext.getCmp("emailAddress1").setValue(q[l].value);Ext.getCmp("emailId1").setValue(q[l].id)}}catch(p){}try{if(n[l].type=="Primary"){Ext.getCmp("phoneAddress0").setValue(n[l].value);Ext.getCmp("phoneId0").setValue(n[l].id);Ext.getCmp("phoneExtension0").setValue(n[l].extention)}else{Ext.getCmp("phoneAddress1").setValue(n[l].value);Ext.getCmp("phoneId1").setValue(n[l].id);Ext.getCmp("phoneExtension1").setValue(n[l].extention)}}catch(p){}try{if(m[l].type=="Primary"){Ext.getCmp("faxAddress0").setValue(m[l].value);Ext.getCmp("faxId0").setValue(m[l].id)}else{Ext.getCmp("faxAddress1").setValue(m[l].value);Ext.getCmp("faxId1").setValue(m[l].id)}}catch(p){}}}function f(){var l=Ext.getCmp("idxmExternalUserProfilePanelForm"+c.nameSpace).getForm();g_hideStatusBox();l.submit({url:c.urlSubmitUpdateProfile,clientValidation:true,isRedirect:true,success:function(m,n){uRadixRedirectHandler.redirect(c.urlUpdateProfile+"?systemUserId="+c.userData.sysKey)},failure:function(m,n){g_showStatusBox();Ext.getCmp("updateButton"+c.nameSpace).enable();Ext.get(document.body.id).unmask()}})}function j(){var l=Ext.getCmp("idxmExternalUserProfilePanelForm"+c.nameSpace).getForm();var r=l.getValues();var p=0,n=0,m=0;for(var o=0;o<=1;o++){try{if(!Ext.isEmpty(Ext.getCmp("emailAddress"+o).getValue())){p++;Ext.getCmp("emailDeleted"+o).setValue("false");Ext.getCmp("emailTypeCode"+o).setValue(k["email"+o])}else{if(!Ext.isEmpty(Ext.getCmp("emailId"+o).getValue())){Ext.getCmp("emailDeleted"+o).setValue("true")}}}catch(q){}try{if(!Ext.isEmpty(Ext.getCmp("phoneAddress"+o).getValue())){m++;Ext.getCmp("phoneDeleted"+o).setValue("false");Ext.getCmp("phoneTypeCode"+o).setValue(k["phone"+o])}else{if(!Ext.isEmpty(Ext.getCmp("phoneId"+o).getValue())){Ext.getCmp("phoneDeleted"+o).setValue("true")}}}catch(q){}try{if(!Ext.isEmpty(Ext.getCmp("faxAddress"+o).getValue())){n++;Ext.getCmp("faxDeleted"+o).setValue("false");Ext.getCmp("faxTypeCode"+o).setValue(k["fax"+o])}else{if(!Ext.isEmpty(Ext.getCmp("faxId"+o).getValue())){Ext.getCmp("faxDeleted"+o).setValue("true")}}}catch(q){}}Ext.getCmp("emailContactCounter").setValue(p);Ext.getCmp("phoneContactCounter").setValue(m);Ext.getCmp("faxContactCounter").setValue(n);Ext.getCmp("updateButton"+c.nameSpace).disable();Ext.get(document.body.id).mask("<b> Loading...</b> ","x-mask-loading");f()}new Ext.Panel({renderTo:c.formPanelDivID,border:false,bodyBorder:false,hideBorders:true,width:(c.userData.userClassCode==IDXM_USER_CLASS_PROVIDER)?1000:850,items:[{xtype:"panel",border:false,cls:"portal-title",html:"Update User Profile"},{xtype:"panel",height:8,border:0,style:"boder:none;",bodyBorder:0,bodyStyle:"border:none",hideBorders:true},{xtype:"idxm.profile.ux.ProfileBar",nameSpace:c.nameSpace,hideAllIcons:true,statusCode:c.userData.userStatus.statusCode,statusName:c.userData.userStatus.statusName,userSubClassCode:c.userData.userSubClassCode,mirrorUserURL:c.mirrorUserURL,sysKey:c.userData.sysKey,userTypeCode:c.userData.userTypeCode,userClassCode:c.userData.userClassCode},{xtype:"uRadix.form.FormPanel",autoScroll:true,cls:"user-profile-body",id:"idxmExternalUserProfilePanelForm"+c.nameSpace,labelAlign:"top",items:[{xtype:"idxmExternalUserProfilePanel",id:"idxmExternalUserProfilePanel"+c.nameSpace,userData:c.userData,formObjectName:"userProfileAction"+c.nameSpace},{xtype:"textfield",fieldLabel:"Primary Email",allowBlank:false,id:"emailAddress0",name:"emailAddress0",vtype:"email",maxLength:256,width:200},{xtype:"hidden",id:"emailTypeCode0",name:"emailTypeCode0",value:"Primary"},{xtype:"hidden",id:"emailId0",name:"emailId0"},{xtype:"hidden",id:"emailDeleted0",name:"emailDeleted0",value:"false"},{xtype:"textfield",fieldLabel:"Alternate Email",allowBlank:true,id:"emailAddress1",name:"emailAddress1",vtype:"email",maxLength:256,width:200},{xtype:"hidden",id:"emailTypeCode1",name:"emailTypeCode1"},{xtype:"hidden",id:"emailId1",name:"emailId1"},{xtype:"hidden",id:"emailDeleted1",name:"emailDeleted1",value:"false"},{xtype:"hidden",id:"emailContactCounter",name:"emailContactCounter",value:"1"},{xtype:"panel",width:900,layout:"column",border:false,items:[{xtype:"panel",width:200,border:false,layout:"form",items:[{xtype:"textfield",fieldLabel:"Primary Phone",allowBlank:true,id:"phoneAddress0",name:"phoneAddress0",maxLength:20,width:200,msgTarget:"phoneAddressTarget0"},{xtype:"hidden",id:"phoneTypeCode0",name:"phoneTypeCode0"}]},{layout:"form",width:15,style:"padding-top:22px; padding-left:5px;",cls:"portal-plain-panel",border:false,html:"X"},{xtype:"panel",width:50,border:false,layout:"form",items:[{xtype:"textfield",fieldLabel:"&nbsp;",labelSeparator:" ",allowBlank:true,id:"phoneExtension0",name:"phoneExtension0",maxLength:10,width:50,msgTarget:"phoneAddressTarget0",msgLengthText:"The maximum length for phone extension is 10"}]},{id:"phoneAddressTarget0",layout:"form",cls:"invalid-target-field-panel",style:"padding-top:22px;padding-left:10px;",border:false},{xtype:"hidden",id:"phoneId0",name:"phoneId0"},{xtype:"hidden",id:"phoneDeleted0",name:"phoneDeleted0",value:"false"},{xtype:"hidden",id:"phoneContactCounter",name:"phoneContactCounter",value:"1"}]},{xtype:"panel",width:900,layout:"column",border:false,items:[{xtype:"panel",width:200,border:false,layout:"form",items:[{xtype:"textfield",fieldLabel:"Alternate Phone",allowBlank:true,id:"phoneAddress1",name:"phoneAddress1",maxLength:20,width:200,msgTarget:"phoneAddressTarget1"},{xtype:"hidden",id:"phoneTypeCode1",name:"phoneTypeCode1"}]},{layout:"form",width:15,style:"padding-top:22px; padding-left:5px;",cls:"portal-plain-panel",border:false,html:"X"},{xtype:"panel",width:50,border:false,layout:"form",items:[{xtype:"textfield",fieldLabel:"&nbsp;",labelSeparator:" ",allowBlank:true,id:"phoneExtension1",name:"phoneExtension1",maxLength:10,width:50,msgTarget:"phoneAddressTarget1",msgLengthText:"The maximum length for phone extension is 10"}]},{id:"phoneAddressTarget1",layout:"form",cls:"invalid-target-field-panel",style:"padding-top:22px;padding-left:10px;",border:false},{xtype:"hidden",id:"phoneId1",name:"phoneId1"},{xtype:"hidden",id:"phoneDeleted1",name:"phoneDeleted1",value:"false"}]},{xtype:"textfield",fieldLabel:"Primary Fax",allowBlank:true,id:"faxAddress0",name:"faxAddress0",maxLength:20,width:200},{xtype:"hidden",id:"faxTypeCode0",name:"faxTypeCode0"},{xtype:"hidden",id:"faxId0",name:"faxId0"},{xtype:"hidden",id:"faxDeleted0",name:"faxDeleted0",value:"false"},{xtype:"textfield",fieldLabel:"Alternate Fax",allowBlank:true,id:"faxAddress1",name:"faxAddress1",maxLength:20,width:200},{xtype:"hidden",id:"faxTypeCode1",name:"faxTypeCode1"},{xtype:"hidden",id:"faxId1",name:"faxId1"},{xtype:"hidden",id:"faxDeleted1",name:"faxDeleted1",value:"false"},{xtype:"hidden",id:"faxContactCounter",name:"faxContactCounter",value:"1"}]}],buttons:[{id:"cancelButton"+c.nameSpace,text:"CANCEL",ctCls:"support-portal-btn-cancel",handler:function(){if(b){idxm.core.popups.Cancel({doCancelFunction:e.doCancel,noCancelFunction:e.noCancel})}else{document.location=c.urlUpdateProfile+"?systemUserId="+c.userData.sysKey}}},{id:"updateButton"+c.nameSpace,text:"UPDATE",ctCls:"support-portal-btn",handler:j}],listeners:{uradix_enterkey:j}});var d=Ext.getCmp("idxmExternalUserProfilePanelForm"+c.nameSpace);var b=false;d.getForm().items.each(function(l){l.on("change",function(){b=true})});Ext.getCmp("idxmExternalUserProfilePanelForm"+c.nameSpace).getForm().setValues(c.userData);var e={doCancel:function(){document.location=c.urlUpdateProfile+"?systemUserId="+c.userData.sysKey},noCancel:function(){}};h(c.userData);return e};Ext.namespace("IDXM.UserProfile.Action.PopUp.ResendAccountActivationEmail");IDXM.UserProfile.Action.PopUp.ResendAccountActivationEmail=function(b){Ext.form.Field.prototype.msgTarget="sideDetails";function a(){var d=Ext.getCmp("IDXMuserProfileActionPopUpResendAccountActivationEmailForm"+b.nameSpace).getForm();if(d.isValid()){Ext.getCmp("resendButton"+b.nameSpace).disable();d.submit({url:b.urlSubmitUpdateProfile,clientValidation:true,isRedirect:true,success:function(e,f){uRadixRedirectHandler.redirect(b.userBaseURL)},failure:function(e,f){uRadixRedirectHandler.redirect(b.userBaseURL)}})}}var c=new Ext.Panel({renderTo:b.renderTo,border:false,bodyBorder:false,hideBorders:true,bodyStyle:"padding:5px;",width:b.windowObject.getInnerWidth(),items:[{xtype:"panel",border:false,bodyBorder:false,hideBorders:true,items:[{xtype:"panel",border:false,cls:"portal-title",html:"Resend Activation Email"},{xtype:"panel",height:8,border:0,style:"boder:none;",bodyBorder:0,bodyStyle:"border:none",hideBorders:true},{xtype:"uRadix.form.FormPanel",id:"IDXMuserProfileActionPopUpResendAccountActivationEmailForm"+b.nameSpace,labelAlign:"top",autoScroll:true,height:100,items:[{xtype:"panel",border:false,bodyBorder:false,hideBorders:true,html:"<span class='templateTextNormal' style='font-size:12px;'>Currrent User ID:<b> "+b.userID+"</b><BR><BR>To resend the activation email to this user, click <b>RESEND</b></span>"}],buttonAlign:"right",buttons:[{id:"resendCancelButton"+b.nameSpace,text:"CANCEL",ctCls:"support-portal-btn-cancel",handler:function(){b.windowObject.close()}},{id:"resendButton"+b.nameSpace,text:"RESEND",ctCls:"support-portal-btn",handler:a}],listeners:{uradix_enterkey:a}}]}]});b.windowObject.setHeight(c.getInnerHeight()+IDXM_POPUP_WINDOW_HEIGHT_ADJUST)};Ext.namespace("IDXM.UserProfile.Action.PopUp.ResetPassword");IDXM.UserProfile.Action.PopUp.ResetPassword=function(b){function a(){var d=Ext.getCmp("IDXMuserProfileActionPopUpResetPasswordForm"+b.nameSpace).getForm();if(d.isValid()){Ext.getCmp("resetPasswordButton"+b.nameSpace).disable();d.submit({url:b.urlSubmitUpdateProfile,clientValidation:true,isRedirect:true,success:function(e,f){uRadixRedirectHandler.redirect(b.userBaseURL)},failure:function(e,f){uRadixRedirectHandler.redirect(b.userBaseURL)}})}}var c=new Ext.Panel({renderTo:b.renderTo,border:false,bodyBorder:false,hideBorders:true,bodyStyle:"padding:5px;",width:b.windowObject.getInnerWidth(),items:[{xtype:"panel",border:false,bodyBorder:false,hideBorders:true,items:[{xtype:"panel",border:false,cls:"portal-title",html:"Reset Password"},{xtype:"panel",height:8,border:0,style:"boder:none;",bodyBorder:0,bodyStyle:"border:none",hideBorders:true},{xtype:"uRadix.form.FormPanel",id:"IDXMuserProfileActionPopUpResetPasswordForm"+b.nameSpace,labelAlign:"top",autoScroll:true,height:100,items:[{xtype:"panel",border:false,bodyBorder:false,hideBorders:true,html:"<span class='templateTextNormal' style='font-size:12px;'>Currrent User ID:<b> "+b.userID+"</b><BR><BR>To Reset Password process for this user, click <b>RESET</b></span>"}],buttonAlign:"right",buttons:[{id:"cancelButton"+b.nameSpace,text:"CANCEL",ctCls:"support-portal-btn-cancel",handler:function(){b.windowObject.close()}},{id:"resetPasswordButton"+b.nameSpace,text:"RESET",ctCls:"support-portal-btn",handler:a}],listeners:{uradix_enterkey:a}}]}]});b.windowObject.setHeight(c.getInnerHeight()+IDXM_POPUP_WINDOW_HEIGHT_ADJUST)};Ext.namespace("IDXM.UserProfile.Action.PopUp.UpdateStatus");IDXM.UserProfile.Action.PopUp.UpdateStatus=function(s){Ext.form.Field.prototype.msgTarget="sideDetails";var g;var b;if((s.userIsLocked!=undefined)&&(s.userIsLocked==true)){g={boxLabel:"Unlock Account",name:"statusAction",inputValue:"unLockAcct"};b="<td><span class='icon-locked' id='profile_icon_locked'></span></td>"}else{g={boxLabel:"Lock Account",name:"statusAction",inputValue:"lockAcct"};b=""}var c={boxLabel:"Terminate Account",name:"statusAction",inputValue:"terminateAcct"};var t=new Ext.Panel({layout:"form",labelAlign:"top",style:"padding-left:25px",border:false,bodyBorder:false,hideBorders:true,items:[{xtype:"datefield",minValue:new Date().clearTime(),id:"terminateDateIdField",fieldLabel:"Terminate On",name:"date",width:200,value:new Date().clearTime(),allowBlank:true}]});var a={boxLabel:"Change Start Date",name:"statusAction",inputValue:"changeStartDt"};var j=new Ext.Panel({layout:"form",labelAlign:"top",style:"padding-left:25px",border:false,bodyBorder:false,hideBorders:true,items:[{xtype:"datefield",minValue:new Date().clearTime(),id:"changeStartDateIdField",fieldLabel:"Start On",name:"date",width:200,value:new Date().clearTime(),hidden:(s.userData.userClassCode==IDXM_USER_CLASS_PROVIDER),hideLabel:(s.userData.userClassCode==IDXM_USER_CLASS_PROVIDER),hiddenValue:new Date().clearTime(),allowBlank:true}]});var q={boxLabel:"Activate Account",name:"statusAction",inputValue:"changeStartDt"};var n=new Ext.Panel({layout:"form",labelAlign:"top",style:"padding-left:25px",border:false,bodyBorder:false,hideBorders:true,items:[{xtype:"datefield",minValue:new Date().clearTime(),id:"changeStartDateIdField",fieldLabel:"Activate On",name:"date",width:200,value:new Date().clearTime(),hidden:(s.userData.userClassCode==IDXM_USER_CLASS_PROVIDER),hideLabel:(s.userData.userClassCode==IDXM_USER_CLASS_PROVIDER),hiddenValue:new Date().clearTime(),allowBlank:true}]});var o={boxLabel:"Activate Account",name:"statusAction",inputValue:"activateAcct"};var f=new Ext.Panel({layout:"form",labelAlign:"top",style:"padding-left:25px",border:false,bodyBorder:false,hideBorders:true,items:[{xtype:"datefield",minValue:new Date().clearTime(),id:"activateDateIdField",fieldLabel:"Activate On",name:"date",width:200,value:new Date().clearTime(),allowBlank:true}]});var l=[];var d=IDXM.Utilities.TogglePanels();d.disableShowPanel(t);d.disableShowPanel(j);d.disableShowPanel(f);var r={xtype:"radiogroup",vertical:true,columns:1,style:"padding-left:15;"};var p;if(s.userStatusCode==IDXM_USER_STATUS_CODE_MAP.ACTIVE){g.checked=true;c.listeners={check:function(){var u=IDXM.Utilities.TogglePanels();if(this.checked){u.enableShowPanel(t)}else{u.disableShowPanel(t)}}};l[l.length]=g;l[l.length]=c;p=t}else{if(s.userStatusCode==IDXM_USER_STATUS_CODE_MAP.INACTIVE){o.checked=true;l[l.length]=o;l[l.length]=g;l[l.length]=c;p={border:false,bodyBorder:false,hideBorders:true}}else{if(s.userStatusCode==IDXM_USER_STATUS_CODE_MAP.TERMINATED){q.checked=true;l[l.length]=q;p=n;if(!(s.userData.userClassCode==IDXM_USER_CLASS_PROVIDER)){d.enableShowPanel(n)}o.listeners={check:function(){var u=IDXM.Utilities.TogglePanels();if(this.checked){u.enableShowPanel(f)}else{u.disableShowPanel(f)}}}}else{if(s.userStatusCode==IDXM_USER_STATUS_CODE_MAP.PENDING_START_DATE){g.checked=true;a.listeners={check:function(){var u=IDXM.Utilities.TogglePanels();if(this.checked){u.enableShowPanel(j)}else{u.disableShowPanel(j)}}};l[l.length]=g;l[l.length]=c;l[l.length]=a;p=j}else{if(s.userStatusCode==IDXM_USER_STATUS_CODE_MAP.PENDING_INITIAL_LOGIN){g.checked=true;l[l.length]=g;l[l.length]=c;if(s.userData.userClassCode!=IDXM_USER_CLASS_INTERNAL){p={border:false,bodyBorder:false,hideBorders:true}}else{l[l.length]=a;a.listeners={check:function(){var u=IDXM.Utilities.TogglePanels();if(this.checked){u.enableShowPanel(j)}else{u.disableShowPanel(j)}}};p=j}}else{if(s.userStatusCode==IDXM_USER_STATUS_CODE_MAP.PENDING_USER_VALIDATION){g.checked=true;a.listeners={check:function(){var u=IDXM.Utilities.TogglePanels();if(this.checked){u.enableShowPanel(j)}else{u.disableShowPanel(j)}}};l[l.length]=g;l[l.length]=c;if((s.userData.userClassCode!=IDXM_USER_CLASS_PROVIDER)&&((s.userData.userClassCode==IDXM_USER_CLASS_CLIENT)||(s.userData.userClassCode==IDXM_USER_CLASS_VENDOR))){l[l.length]=a}p=j}}}}}}r.items=l;function m(){var w=Ext.getCmp("statusViewURadixFormPanel"+s.namespace);var u=w.getForm();var v=Ext.getCmp("updateButton"+s.namespace);v.disable();if(u.isValid()){v.disable();u.submit({url:s.urlSubmitUpdateStatus,clientValidation:true,isRedirect:true,success:function(x,y){s.windowObject.close();uRadixRedirectHandler.redirect(s.userBaseURL)},failure:function(x,y){g_showStatusBox();v.enable()}})}}var k=new Ext.Panel({renderTo:s.renderTo,border:false,bodyBorder:false,hideBorders:true,bodyStyle:"padding:5px;",width:s.windowObject.getInnerWidth(),items:[{xtype:"panel",border:false,bodyBorder:false,hideBorders:true,items:[{xtype:"panel",border:false,cls:"portal-title",html:"Update Status"},{xtype:"panel",height:8,border:0,style:"boder:none;",bodyBorder:0,bodyStyle:"border:none",hideBorders:true},{xtype:"uRadix.form.FormPanel",id:"statusViewURadixFormPanel"+s.namespace,labelAlign:"top",autoScroll:true,height:250,items:[{xtype:"panel",border:false,bodyBorder:false,hideBorders:true,html:"<table border='0' cellspacing='3'><tr><td><span class='templateTextNormal' style='font-size:12px;'>Currrent Status:</span></td><td><span class='status-"+s.userStatusCode+"'>"+s.userStatusName+"</span></td>"+b+"</tr></table>"},r,p],buttonAlign:"right",buttons:[{id:"cancelButton"+s.namespace,text:"CANCEL",ctCls:"support-portal-btn-cancel",handler:function(){s.windowObject.close()}},{id:"updateButton"+s.namespace,text:"UPDATE",ctCls:"support-portal-btn",handler:m}],listeners:{uradix_enterkey:m}}]}]});var h=Ext.getCmp("statusViewURadixFormPanel"+s.namespace);var e=h.getForm();s.windowObject.setHeight(k.getInnerHeight()+IDXM_POPUP_WINDOW_HEIGHT_ADJUST)};Ext.namespace("IDXM.UserProfile.Action.PopUp.UpdateSubClass");IDXM.UserProfile.Action.PopUp.UpdateSubClass=function(c){var b=new IDXM.ux.internalUserContractorPanel({fieldId:"contractorField"+c.nameSpace,hidden:true,disabled:true,ContractorList:c.contractorList});var d=new IDXM.ux.internalUserContractorOtherPanel({fieldId:"contractorOtherField"+c.nameSpace,hidden:true,disabled:true});Ext.getCmp("contractorField"+c.nameSpace).on("select",function(){if(this.getValue()=="IDXM_CNTRCT_Other"){d.enable();d.show();d.cascade(function(f){if(f.isFormField){f.enable();f.show();f.allowBlank=false}})}else{d.disable();d.hide();d.cascade(function(f){if(f.isFormField){f.disable();f.hide();f.allowBlank=true}})}});if(!Ext.isEmpty(c.userData.contractor)){b.enable();b.show();Ext.getCmp("contractorField"+c.nameSpace).enable();Ext.getCmp("contractorField"+c.nameSpace).show();Ext.getCmp("contractorField"+c.nameSpace).setValue(c.userData.contractor)}Ext.form.Field.prototype.msgTarget="sideDetails";function a(){Ext.getCmp("nextButton").disable();var f=Ext.getCmp("IDXMuserProfileActionPopUpUpdateUserSubClassForm"+c.nameSpace).getForm();f.submit({url:c.urlSubmitAction,clientValidation:true,isRedirect:true,success:function(h,j){c.windowObject.close();Ext.getCmp("nextButton").enable();var g=window.location.protocol+"//"+window.location.host+window.location.pathname+"?systemUserId="+uRadixUtilities.getParameter(window.location.search,"systemUserId");uRadixRedirectHandler.redirect(g)},failure:function(g,h){Ext.getCmp("nextButton").enable()}})}var e=new Ext.Panel({renderTo:c.renderTo,border:false,bodyBorder:false,hideBorders:true,bodyStyle:"padding:5px;",width:c.windowObject.getInnerWidth(),items:[{xtype:"panel",border:false,bodyBorder:false,hideBorders:true,items:[{xtype:"panel",border:false,cls:"portal-title",html:"Update Sub-Class"},{xtype:"panel",height:8,border:0,style:"boder:none;",bodyBorder:0,bodyStyle:"border:none",hideBorders:true},{xtype:"uRadix.form.FormPanel",id:"IDXMuserProfileActionPopUpUpdateUserSubClassForm"+c.nameSpace,labelAlign:"top",autoScroll:true,height:175,items:[{xtype:"combo",fieldLabel:"Sub-Class",hiddenName:"userSubClassCode",name:"subClassText",mode:"local",store:new Ext.data.JsonStore({fields:["id","name"],root:"rows",idProperty:"id",data:{rows:c.subClassDataArray}}),valueField:"id",displayField:"name",triggerAction:"all",value:c.userData.userSubClassCode,editable:false,forceSelection:true,selectOnFocus:true,width:200,allowBlank:false,listeners:{render:function(){this.el.dom.name=this.name},select:function(){if(this.getValue()==IDXM_USER_SUB_CLASS_CONSULTANT){b.enable();b.show();b.cascade(function(f){if(f.isFormField){f.enable();f.show();if(f.hiddenName=="contractor"){f.allowBlank=false}}})}else{b.disable();b.hide();b.cascade(function(f){if(f.isFormField){f.disable();f.hide();f.allowBlank=true}})}}}},b,d],buttonAlign:"right",buttons:[{id:"cancelButton",text:"CANCEL",ctCls:"support-portal-btn-cancel",handler:function(){c.windowObject.close()}},{id:"nextButton",text:"UPDATE",ctCls:"support-portal-btn",handler:a}]}]}]});c.windowObject.setHeight(e.getInnerHeight()+IDXM_POPUP_WINDOW_HEIGHT_ADJUST)};Ext.namespace("IDXM.UserProfile.Action.PopUp.UpdateUserId");IDXM.UserProfile.Action.PopUp.UpdateUserId=function(b){Ext.form.Field.prototype.msgTarget="sideDetails";function a(){var d=Ext.getCmp("IDXMuserProfileActionPopUpUpdateUserIdForm"+b.nameSpace).getForm();if(d.isValid()){Ext.getCmp("updateUser"+b.nameSpace).disable();d.submit({url:b.urlSubmitUpdateProfile,clientValidation:true,isRedirect:true,success:function(e,f){uRadixRedirectHandler.redirect(b.userBaseURL)},failure:function(e,f){g_hideStatusBox();Ext.getCmp("updateUser"+b.nameSpace).enable()}})}}var c=new Ext.Panel({renderTo:b.renderTo,border:false,bodyBorder:false,hideBorders:true,bodyStyle:"padding:5px;",width:b.windowObject.getInnerWidth(),items:[{xtype:"panel",border:false,bodyBorder:false,hideBorders:true,items:[{xtype:"panel",border:false,cls:"portal-title",html:"Update User ID"},{xtype:"panel",height:8,border:0,style:"boder:none;",bodyBorder:0,bodyStyle:"border:none",hideBorders:true},{xtype:"panel",border:false,bodyBorder:false,hideBorders:true,layout:"column",items:[{border:false,columnWidth:0.65,bodyBorder:false,hideBorders:true,items:[{xtype:"panel",border:false,bodyBorder:false,hideBorders:true,html:"<span class='templateTextNormal' style='font-size:12px;'>Currrent User ID:<b> "+b.userID+"</b><br><br></span>"},{xtype:"uRadix.form.FormPanel",id:"IDXMuserProfileActionPopUpUpdateUserIdForm"+b.nameSpace,labelAlign:"top",autoScroll:true,width:300,height:130,items:[{xtype:"textfield",width:250,fieldLabel:"New User ID",name:"NewUserID",allowBlank:false,msgTarget:"under"}],buttonAlign:"right",buttons:[{id:"updateUserIdCancelButton"+b.nameSpace,text:"CANCEL",ctCls:"support-portal-btn-cancel",handler:function(){b.windowObject.close()}},{id:"updateUser"+b.nameSpace,text:"UPDATE",ctCls:"support-portal-btn",handler:a}],listeners:{uradix_enterkey:a}}]},{border:false,columnWidth:0.35,bodyBorder:false,hideBorders:true,xtype:"panel",style:"border:2px solid #009900; padding:10px; background:#EFFFFF; background-color:#EFFFFF;",bodyStyle:"background:#EFFFFF; background-color:#EFFFFF;",autoHeight:true,width:200,html:"<table border='0'><tr><td width='40'><div class='hint-Icon'></div></td><td valign='bottom'><span class='hintTextHeader'><b>Hint</b></span></td></tr></table><span class='hintText'><BR>The new User ID must already exist in Active Directory in order to reset it in the Support Portal.<BR><BR>This will be changed in a subsequent phase.</span>"}]}]}]});b.windowObject.setHeight(c.getInnerHeight()+IDXM_POPUP_WINDOW_HEIGHT_ADJUST)};Ext.namespace("IDXM.UserProfile.PopUp.AdviceNotificationOption");IDXM.UserProfile.PopUp.AdviceNotificationOption=function(a){var b=new Ext.Window({width:600,height:200,modal:true,autoScroll:true,closable:false,resizable:false,layout:"fit",plain:true,items:[{xtype:"panel",border:false,bodyBorder:false,hideBorders:true,style:"background-color:#FFFFFF; background:#FFFFFF; padding:5px;",items:[{xtype:"idxmStatusBox",status:"warning",statusText:"Select Advice Notification Option"},{xtype:"panel",height:100,style:"padding-left:15px;",autoScroll:true,html:"<span class='advice-pop-up-message-txt'><BR>You must make a selection for Advice Notification<BR></span><span class='advice-pop-up-description-txt'><br>Select either an email address or fax number.</span>"}],buttons:[{ctCls:"support-portal-btn",text:"CLOSE",handler:function(){b.hide()}}]}]});b.show()};Ext.namespace("IDXM.UserProfile.View.PopUp.AccessHistory");IDXM.UserProfile.View.PopUp.AccessHistory=function(b){Ext.form.Field.prototype.msgTarget="sideDetails";var a="";if(b.endDate&&b.endDate!=undefined&&b.endDate!=null&&b.endDate.trim()!=""){a="<td width='10'>&nbsp;</td><td><span class='idxmTextSmall'><b>Termination Date:</b> "+b.endDate+"</span></td>"}var c=new Ext.Panel({renderTo:b.renderTo,border:false,bodyBorder:false,hideBorders:true,bodyStyle:"padding:5px;",width:b.windowObject.getInnerWidth(),items:[{xtype:"panel",border:false,bodyBorder:false,hideBorders:true,items:[{xtype:"panel",border:false,cls:"portal-title",html:"Access History - Last "+b.historyPeriod+" Days"},{xtype:"panel",height:8,border:0,style:"boder:none;",bodyBorder:0,bodyStyle:"border:none",hideBorders:true},{xtype:"uRadix.form.FormPanel",labelAlign:"top",autoScroll:true,items:[{xtype:"panel",border:false,bodyBorder:false,hideBorders:true,html:"<table><tr><td><span class='idxmTextSmall'><b>Start Date:</b> "+b.startDate+"</span></td>"+a+"</tr></table>"},{xtype:"panel",height:8,border:0,style:"boder:none;",bodyBorder:0,bodyStyle:"border:none",hideBorders:true},{xtype:"grid",autoScroll:true,height:180,buttonAlign:"right",cm:new Ext.grid.ColumnModel({columns:[{id:"loginDate",header:"Date",sortable:true,dataIndex:"loginDate"},{header:"Log in Time",sortable:true,dataIndex:"loginTime"},{header:"Successful",sortable:true,dataIndex:"logonSuccessIndicator",renderer:function(d){if(d){return"Yes"}else{return"No"}}}],defaults:{sortable:true,menuDisabled:true}}),store:new Ext.data.Store({reader:new Ext.data.JsonReader({root:"data",fields:["loginDate","loginTime","logonSuccessIndicator"]}),data:{data:b.historyData}})}],buttonAlign:"right",buttons:[{id:"closeButton",text:"CLOSE",ctCls:"support-portal-btn",handler:function(){b.windowObject.close()}}]}]}]});b.windowObject.setHeight(c.getInnerHeight()+IDXM_POPUP_CLOSABLE_WINDOW_HEIGHT_ADJUST)};Ext.namespace("IDXM.UserProfile.View.PopUp.GroupsAndRolesChanging");IDXM.UserProfile.View.PopUp.GroupsAndRolesChanging=function(a){Ext.form.Field.prototype.msgTarget="sideDetails";var b=new uRadix.form.FormPanel({renderTo:a.renderTo,border:false,bodyBorder:false,hideBorders:true,bodyStyle:"padding:5px;",width:a.windowObject.getInnerWidth(),items:[{xtype:"idxmStatusBox",status:"warning",statusText:"Groups and/or Roles are Changing"},{xtype:"panel",autoScroll:true,height:170,contentEl:a.contentEl,style:"padding-left:10px; padding-right:10px;"},{xtype:"panel",layout:"column",border:false,bodyBorder:false,hideBorders:true,items:[{columnWidth:0.5,buttonAlign:"left",buttons:[{text:"CANCEL",ctCls:"support-portal-btn-cancel",handler:function(){a.callBackWrapper()}}]},{columnWidth:0.5,buttonAlign:"right",buttons:[{text:"OK",ctCls:"support-portal-btn",handler:function(){a.callBackWrapper({ok:true})}}]}]}]});a.windowObject.setHeight(b.getInnerHeight()+IDXM_POPUP_WINDOW_HEIGHT_ADJUST)};Ext.namespace("idxm.profile.popups.InvalidReportsTo");idxm.profile.popups.InvalidReportsTo=function(b,a){var c=new Ext.Window({width:450,height:175,modal:true,autoScroll:true,closable:false,resizable:false,layout:"fit",plain:true,buttonAlign:"center",items:[{xtype:"panel",border:false,bodyBorder:false,hideBorders:true,style:"background-color:#FFFFFF; background:#FFFFFF; padding:5px;",items:[{xtype:"idxmStatusBox",status:"warning",statusText:"User Does Not Have a Valid Reports To"},{xtype:"panel",height:100,style:"padding-left:15px;",autoScroll:true,html:"<span><BR><b>"+b+" "+a+"</b> does not currently have a valid 'Reports To'.<br><br>A valid 'Reports To' must be selected in order to mirror this user.</span>"}],buttons:[{ctCls:"support-portal-btn",text:"OK",handler:function(){c.hide()}}]}]});c.show()};Ext.namespace("idxm.profile.ux.ProfileBar");idxm.profile.ux.ProfileBar=Ext.extend(Ext.Panel,{STATUS_TABLE:new Ext.XTemplate("<table border='0' cellspacing='3' cellpadding='0' width='100%'><tr>","<td style='width:325px;' valign='middle'>","<table border='0' cellspacing='0' cellpadding='0' width='100%'><tr>","<td width='150'><span class='status-{statusCode}'>{statusName}</span></td>",'<tpl if="hideAllIcons == false">','<tpl if="isLocked == true">',"<td width='18'><span class='icon-locked' id='profile_icon_locked' qtip='Account is Locked'></span></td>","</tpl>","</tpl>",'<tpl if="hideAllIcons == false">','<tpl if="this.isResendActivationShowable(userClassCode, statusCode, isLocked)">',"<td width='18'><a href='javascript:uRadixWindowManager.launch({registryResendAccountActivation});' class='icon-resendactivation' id='profile_icon_resendactivation' qtip='Resend Activation Email'></a></td>","</tpl>","</tpl>",'<tpl if="this.isLoginDateShowable(statusCode, lastLoginDate)">',"<td width='150'><span class='idxmTextSmall'>&nbsp;&nbsp;Last Log-in: <b>{lastLoginDate}</b></span></td>",'<tpl if="hideAllIcons == false">',"<td width='18'><span><a href='javascript:uRadixWindowManager.launch({registryAccessHistory});' class='icon-accesshistory' id='profile_icon_accesshistory' qtip='View Log-in History'></a></span></td>","</tpl>","</tpl>","<td></td>","</tr></table>","</td>","<td style='width:300px;' valign='middle'>","<table border='0' cellspacing='0' cellpadding='0' width='100%'><tr>","<td style='width:230px; padding:0px; margin:0px;'><span class='idxmTextSmall'>&nbsp;&nbsp;User Class: <b>{userSubClassLabel}</b></span></td>",'<tpl if="hideAllIcons == false">','<tpl if="this.isInternal(userClassCode) && this.isPerson(userTypeCode)">',"<td align='left' valign='middle'><a href='javascript:uRadixWindowManager.launch({registryUpdateSubClass});' class='icon-updatesubclass' id='profile_icon_updatesubclass' qtip='Update Sub Class'></a></td>","</tpl>","</tpl>","</tr></table>","</td>","<td></td>",'<tpl if="hideAllIcons == false">',"<td align='right' style='width:30px;'><a href='javascript:uRadixWindowManager.launch({registryUpdateStatus});' class='icon-updatestatus' id='profile_icon_updatestatus' qtip='Update Status'></a></td>",'<tpl if="this.isInternal(userClassCode)">',"<td align='right' style='width:30px;'><a href='javascript:uRadixWindowManager.launch({registryUpdateUser});' class='icon-updateuser' id='profile_icon_updateuser' qtip='Update User ID'></a></td>","</tpl>",'<tpl if="this.isResetPasswordShowable(userClassCode, statusCode) == true">',"<td align='right' style='width:30px;'><a href='javascript:uRadixWindowManager.launch({registryResetPassword});' class='icon-resetpassword' id='profile_icon_resetpassword' qtip='Reset Password'></a></td>","</tpl>",'<tpl if="this.isPerson(userTypeCode) && (!this.isInternal(userClassCode))">','<tpl if="!this.isProvider(userClassCode)">',"<tpl if='mirrorUserURL'>","<td align='right' style='width:30px;'><a href='{mirrorUserURL}?mirrorUserId={sysKey}&userTypeCode={userTypeCode}' class='icon-mirror' id='profile_icon_mirror' qtip='Mirror User'></a></td>","</tpl>","</tpl>","</tpl>",'<tpl if="this.isPerson(userTypeCode) && this.isInternal(userClassCode)">','<tpl if="(userReportsToIndicator)">',"<tpl if='mirrorUserURL'>","<td align='right' style='width:30px;'><a href='{mirrorUserURL}?mirrorUserId={sysKey}&userTypeCode={userTypeCode}' class='icon-mirror' id='profile_icon_mirror' qtip='Mirror User'></a></td>","</tpl>","</tpl>",'<tpl if="(!userReportsToIndicator)">',"<tpl if='mirrorUserURL'>","<td align='right' style='width:30px;'><a href='javascript:idxm.profile.popups.InvalidReportsTo(\"{userFirstName}\",\"{userLastName}\");' class='icon-mirror' id='profile_icon_mirror' qtip='Mirror User'></a></td>","</tpl>","</tpl>","</tpl>","</tpl>","</tr></table>",{isInternal:function(a){return a==IDXM_USER_CLASS_INTERNAL},isLoginDateShowable:function(b,a){return(!Ext.isEmpty(a))},isResendActivationShowable:function(b,d,c){var a=false;if(this.isInternal(b)==false){if((c==false)&&(d==IDXM_USER_STATUS_CODE_MAP.PENDING_USER_VALIDATION)){a=true}}return a},isPerson:function(a){return a==IDXM_USER_TYPE_PERSON},isResetPasswordShowable:function(b,c){var a=false;if(this.isInternal(b)==false){if((c==IDXM_USER_STATUS_CODE_MAP.ACTIVE||c==IDXM_USER_STATUS_CODE_MAP.PENDING_INITIAL_LOGIN)){a=true}}return a},isProvider:function(a){return a==IDXM_USER_CLASS_PROVIDER}}),constructor:function(a){var b={border:true,cls:"user-profile-toolbar",bodyBorder:false,bodyCssClass:"user-profile-toolbar-body",html:this.STATUS_TABLE.applyTemplate({nameSpace:a.nameSpace,statusCode:a.statusCode,statusName:a.statusName,userSubClassLabel:IDXM_USER_TYPE_MAP[a.userSubClassCode],userFirstName:a.userFirstName,userLastName:a.userLastName,userReportsToIndicator:a.userReportsToIndicator,mirrorUserURL:a.mirrorUserURL,sysKey:a.sysKey,userTypeCode:a.userTypeCode,userClassCode:a.userClassCode,lastLoginDate:a.lastLoginDate,isLocked:((a.isLocked!=undefined)&&(a.isLocked==true))?true:false,hideAllIcons:((a.hideAllIcons!=undefined)&&(a.hideAllIcons==true))?true:false,registryUpdateUser:'{id:"updateUserId'+a.nameSpace+'", key:"updateUserId'+a.nameSpace+'"}',registryUpdateStatus:'{id:"updateStatus'+a.nameSpace+'", key:"updateStatus'+a.nameSpace+'"}',registryResendAccountActivation:'{id:"resendAccountActivation'+a.nameSpace+'", key:"resendAccountActivation'+a.nameSpace+'"}',registryAccessHistory:'{id:"accessHistory'+a.nameSpace+'", key:"accessHistory'+a.nameSpace+'"}',registryResetPassword:'{id:"resetPassword'+a.nameSpace+'", key:"resetPassword'+a.nameSpace+'"}',registryUpdateSubClass:'{id:"updateSubClass'+a.nameSpace+'", key:"updateSubClass'+a.nameSpace+'"}'})};Ext.apply(this,b);idxm.profile.ux.ProfileBar.superclass.constructor.call(this,b)}});Ext.reg("idxm.profile.ux.ProfileBar",idxm.profile.ux.ProfileBar);